{"remainingRequest":"D:\\aa-tong\\my-projects\\watches\\node_modules\\thread-loader\\dist\\cjs.js!D:\\aa-tong\\my-projects\\watches\\node_modules\\babel-loader\\lib\\index.js!D:\\aa-tong\\my-projects\\watches\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\aa-tong\\my-projects\\watches\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\aa-tong\\my-projects\\watches\\src\\components\\purch\\Tip-page.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\aa-tong\\my-projects\\watches\\src\\components\\purch\\Tip-page.vue","mtime":1585714278030},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkQ6XFxhYS10b25nXFxteS1wcm9qZWN0c1xcd2F0Y2hlc1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnV5X2ZlZVN0YXRlOiB0cnVlLAogICAgICAvLyDmmK/lkKbmnInlsI/otLkKICAgICAgYnV5X2ZlZXRpbWU6IG5ldyBEYXRlKCksCiAgICAgIC8vIOWwj+i0ueaXtumXtAogICAgICBidXlfZmVlbW9uZXk6ICIiLAogICAgICAvLyDlsI/otLnph5Hpop0KICAgICAgYnV5X2ZlZWN1cnJlbmN5OiAiIiwKICAgICAgLy8g5bCP6LS56YeR6aKd5biB56eNCiAgICAgIGJ1eV9mZWVub3RlOiAiIiAvLyDlsI/otLnlpIfms6gKCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuYWNxdWlyZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgYWNxdWlyZTogZnVuY3Rpb24gYWNxdWlyZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJGF4aW9zLnBvc3QodGhpcy4kc3RvcmUuc3RhdGUuYmFzZVVybCArICIvQnV5T3JkZXJHZXQiLCB7CiAgICAgICAgYnV5X2lkOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJidXlfaWQiKQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocmVzLmRhdGEud2F0Y2gpLAogICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgIF90aGlzLmJ1eV9mZWVjdXJyZW5jeSA9IGl0ZW0uYnV5X3dhdGNoY3VycmVuY3k7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgIH0KCiAgICAgICAgOwoKICAgICAgICBpZiAocmVzLmRhdGEuZmVlLmJ1eV9mZWVTdGF0ZSA9PSAtMSkgewogICAgICAgICAgX3RoaXMuYnV5X2ZlZVN0YXRlID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIGlmIChyZXMuZGF0YS5mZWUuYnV5X2ZlZVN0YXRlID09IDAgfHwgcmVzLmRhdGEuZmVlLmJ1eV9mZWVTdGF0ZSA9PSAxKSB7CiAgICAgICAgICBfdGhpcy5idXlfZmVlU3RhdGUgPSB0cnVlOwogICAgICAgICAgX3RoaXMuYnV5X2ZlZXRpbWUgPSByZXMuZGF0YS5mZWUuYnV5X2ZlZXRpbWU7CiAgICAgICAgICBfdGhpcy5idXlfZmVlbW9uZXkgPSByZXMuZGF0YS5mZWUuYnV5X2ZlZW1vbmV5OwogICAgICAgICAgX3RoaXMuYnV5X2ZlZW5vdGUgPSByZXMuZGF0YS5mZWUuYnV5X2ZlZW5vdGU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDkv53lrZjmj5DkuqTlsI/otLnkv6Hmga8KICAgIHN1Ym1pdFRpcDogZnVuY3Rpb24gc3VibWl0VGlwKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJGF4aW9zLnBvc3QodGhpcy4kc3RvcmUuc3RhdGUuYmFzZVVybCArICIvQnV5RmVlU2F2ZSIsIHsKICAgICAgICBidXlfaWQ6IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImJ1eV9pZCIpLAogICAgICAgIGJ1eV9mZWVTdGF0ZTogdGhpcy5idXlfZmVlU3RhdGUgPT0gdHJ1ZSA/IDEgOiAtMSwKICAgICAgICBidXlfZmVldGltZTogdGhpcy5idXlfZmVlU3RhdGUgPT0gdHJ1ZSA/IHRoaXMuc2hlbGxEYXRlKHRoaXMuYnV5X2ZlZXRpbWUpIDogIiIsCiAgICAgICAgYnV5X2ZlZW1vbmV5OiB0aGlzLmJ1eV9mZWVTdGF0ZSA9PSB0cnVlID8gdGhpcy5idXlfZmVlbW9uZXkgOiAiIiwKICAgICAgICBidXlfZmVlY3VycmVuY3k6IHRoaXMuYnV5X2ZlZVN0YXRlID09IHRydWUgPyB0aGlzLmJ1eV9mZWVjdXJyZW5jeSA6ICIiLAogICAgICAgIGJ1eV9mZWVub3RlOiB0aGlzLmJ1eV9mZWVTdGF0ZSA9PSB0cnVlID8gdGhpcy5idXlfZmVlbm90ZSA6ICIiCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKCLlsI/otLnkv6Hmga/mj5DkuqTmiJDlip8iKTsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICBfdGhpczIuJGVtaXQoImxpc3RlblRpcCIsIHJlcy5kYXRhLmJ1eV9mZWVTdGF0ZSk7CgogICAgICAgIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKHsKICAgICAgICAgIG1lc3NhZ2U6ICLlsI/otLnkv6Hmga/kv53lrZjmiJDlip8iLAogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICB9KTsgLy8g6aG16Z2i5Zue5Yiw6aG26YOoCgoKICAgICAgICAoZnVuY3Rpb24gc21vb3Roc2Nyb2xsKCkgewogICAgICAgICAgdmFyIGN1cnJlbnRTY3JvbGwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwoKICAgICAgICAgIGlmIChjdXJyZW50U2Nyb2xsID4gMCkgewogICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNtb290aHNjcm9sbCk7CiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBjdXJyZW50U2Nyb2xsIC0gY3VycmVudFNjcm9sbCAvIDUpOwogICAgICAgICAgfQogICAgICAgIH0pKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwoKICAgICAgICBfdGhpczIuJG1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgbWVzc2FnZTogZXJyLmRhdGEubWVzc2FnZSwKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Tip-page.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"tip-container\">\r\n    <div class=\"drawback-top\">\r\n      <div class=\"top-form\">\r\n        <span class=\"top-span\">是否有小费</span>\r\n        <el-switch v-model=\"buy_feeState\" active-color=\"#13ce66\" inactive-color=\"#ff4949\"></el-switch>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"buy_feeState == true\" class=\"tip-center\">\r\n      <el-form label-width=\"10%\">\r\n        <el-form-item label=\"小费日期\">\r\n          <el-date-picker v-model=\"buy_feetime\" type=\"date\" class=\"input-style\"></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"小费金额\">\r\n          <el-input v-model=\"buy_feemoney\" class=\"input-style\">\r\n            <i slot=\"suffix\" style=\"color: #000;margin-right:5%;font-style:normal;\">{{buy_feecurrency}}</i>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"备注\">\r\n          <el-input type=\"textarea\" :autosize=\"{ minRows: 6}\" placeholder=\"请输入备注内容\" v-model=\"buy_feenote\"\r\n            class=\"input-style\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <div class=\"drawback-submit\">\r\n      <img src=\"../../assets/imgs/save.png\" @click=\"submitTip\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        buy_feeState: true, // 是否有小费\r\n        buy_feetime: new Date(), // 小费时间\r\n        buy_feemoney: \"\", // 小费金额\r\n        buy_feecurrency: \"\", // 小费金额币种\r\n        buy_feenote: \"\" // 小费备注\r\n      };\r\n    },\r\n    created() {\r\n      this.acquire();\r\n    },\r\n    methods: {\r\n      acquire() {\r\n        this.$axios\r\n          .post(this.$store.state.baseUrl + \"/BuyOrderGet\", {\r\n            buy_id: sessionStorage.getItem(\"buy_id\")\r\n          })\r\n          .then(res => {\r\n            for (let item of res.data.watch) {\r\n              this.buy_feecurrency = item.buy_watchcurrency;\r\n            };\r\n            if (res.data.fee.buy_feeState == -1) {\r\n              this.buy_feeState = false;\r\n            } else if (res.data.fee.buy_feeState == 0 || res.data.fee.buy_feeState == 1) {\r\n              this.buy_feeState = true;\r\n              this.buy_feetime = res.data.fee.buy_feetime;\r\n              this.buy_feemoney = res.data.fee.buy_feemoney;\r\n              this.buy_feenote = res.data.fee.buy_feenote;\r\n            }\r\n          });\r\n      },\r\n      // 保存提交小费信息\r\n      submitTip() {\r\n        this.$axios\r\n          .post(this.$store.state.baseUrl + \"/BuyFeeSave\", {\r\n            buy_id: sessionStorage.getItem(\"buy_id\"),\r\n            buy_feeState: this.buy_feeState == true ? 1 : -1,\r\n            buy_feetime: this.buy_feeState == true ? this.shellDate(this.buy_feetime) : \"\",\r\n            buy_feemoney: this.buy_feeState == true ? this.buy_feemoney : \"\",\r\n            buy_feecurrency: this.buy_feeState == true ? this.buy_feecurrency : \"\",\r\n            buy_feenote: this.buy_feeState == true ? this.buy_feenote : \"\"\r\n          })\r\n          .then(res => {\r\n            console.log(\"小费信息提交成功\");\r\n            console.log(res);\r\n            this.$emit(\"listenTip\", res.data.buy_feeState);\r\n            this.$message.success({\r\n              message: \"小费信息保存成功\",\r\n              showClose: true,\r\n              duration: 2000\r\n            });\r\n            // 页面回到顶部\r\n            (function smoothscroll() {\r\n              var currentScroll =\r\n                document.documentElement.scrollTop || document.body.scrollTop;\r\n              if (currentScroll > 0) {\r\n                window.requestAnimationFrame(smoothscroll);\r\n                window.scrollTo(0, currentScroll - currentScroll / 5);\r\n              }\r\n            })();\r\n          })\r\n          .catch(err => {\r\n            console.log(err);\r\n            this.$message.error({\r\n              message: err.data.message,\r\n              showClose: true,\r\n              duration: 2000\r\n            });\r\n          });\r\n      }\r\n    }\r\n  };\r\n\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .tip-container {\r\n    width: 100%;\r\n\r\n    .drawback-top {\r\n      width: 100%;\r\n\r\n      @media screen and (min-width: 1401px) {\r\n        .top-form {\r\n          width: 25%;\r\n        }\r\n      }\r\n\r\n      @media screen and (max-width: 1400px) {\r\n        .top-form {\r\n          width: 40%;\r\n        }\r\n      }\r\n\r\n      .top-form {\r\n        height: 80px;\r\n        padding-left: 40px;\r\n        line-height: 80px;\r\n        background-color: #fff;\r\n        border-radius: 30px;\r\n\r\n        .top-span {\r\n          margin-right: 30%;\r\n          font-size: 23px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .tip-center {\r\n      width: 100%;\r\n      margin: 40px 0;\r\n      padding: 40px 0;\r\n      background-color: #fff;\r\n      border-radius: 30px;\r\n\r\n      .input-style {\r\n        width: 50% !important;\r\n      }\r\n    }\r\n\r\n    .drawback-submit {\r\n      width: 100%;\r\n      margin-top: 30px;\r\n      text-align: right;\r\n\r\n      img {\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n\r\n</style>\r\n<style lang=\"scss\">\r\n  .el-form-item__label {\r\n    font-size: 16px;\r\n  }\r\n\r\n</style>\r\n"],"sourceRoot":"src/components/purch"}]}