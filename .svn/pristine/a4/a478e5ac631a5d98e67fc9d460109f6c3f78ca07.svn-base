{"remainingRequest":"D:\\aa-tong\\my-projects\\watches\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\aa-tong\\my-projects\\watches\\src\\components\\views\\In-handle-list.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\aa-tong\\my-projects\\watches\\src\\components\\views\\In-handle-list.vue","mtime":1597917064073},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXJsOiB0aGlzLiRzdG9yZS5zdGF0ZS5iYXNlVXJsLAogICAgICB0b3RhbDogMCwKICAgICAgcGFnZTogMSwKICAgICAgcGFnZU51bTogMTAsCiAgICAgIGxpc3Q6IFtdLAogICAgICBpbkhhbmRsZVJlY29yZDoge30sCiAgICAgIGRpYWxvZ0RlbGV0ZVJlY29yZFZpc2libGU6IGZhbHNlLAogICAgICBkZWxldGVJZDogMCwKICAgICAgZGVsZXRlVHlwZTogMCwKCiAgICB9CiAgfSwKICBwcm9wczogWydpbkhhbmRsZUxpc3QnXSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmn6XnnIvorrDlvZXor6bmg4UKICAgIHZpZXdEZXRhaWxzKGlkLCB0eXBlKSB7CiAgICAgIHRoaXMucmVjb3JkSWQgPSBpZDsKICAgICAgdGhpcy4kYXhpb3MucG9zdCh0aGlzLnVybCArICcvYm9ycm93UmVjb3JkSW5mbz9qYXZhJywgewogICAgICAgIGlkOiB0aGlzLnJlY29yZElkCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZygn6I635Y+W5a+55pa55aSE55CG5Lit6K6w5b2V6K+m5oOFJyk7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICB0aGlzLmluSGFuZGxlUmVjb3JkID0gcmVzLmRhdGE7CiAgICAgICAgY29uc29sZS5sb2codGhpcy51bkhhbmRsZVJlY29yZCk7CiAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICBjYXNlIDE6CgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMjoKCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAzOgoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfTsKICAgICAgICAvLyDpobXpnaLlm57liLDpobbpg6gKICAgICAgICAoZnVuY3Rpb24gc21vb3Roc2Nyb2xsKCkgewogICAgICAgICAgdmFyIGN1cnJlbnRTY3JvbGwgPQogICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgaWYgKGN1cnJlbnRTY3JvbGwgPiAwKSB7CiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc21vb3Roc2Nyb2xsKTsKICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIGN1cnJlbnRTY3JvbGwgLSBjdXJyZW50U2Nyb2xsIC8gNSk7CiAgICAgICAgICB9CiAgICAgICAgfSkoKTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KQogICAgfSwKICAgIC8vIOWIoOmZpOiusOW9lQogICAgZGVsZXRlUmVjb3JkKGlkLCB0eXBlKSB7CiAgICAgIHRoaXMuZGVsZXRlSWQgPSBpZDsKICAgICAgdGhpcy5kZWxldGVUeXBlID0gdHlwZTsKICAgICAgaWYgKHRoaXMuZGVsZXRlVHlwZSA9PSAyKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih7CiAgICAgICAgICBtZXNzYWdlOiAn6K+l6K6w5b2V5Li65Yir5Lq65ZCR5L2g5YCf5qy+77yM5L2g5ZCR5Yir5Lq65omT5qy+77yM562J5bim5a+55pa556Gu6K6k54q25oCB77yM5LiN5Y+v5Yig6ZmkJywKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIGR1cmF0aW9uOiAzMDAwCiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRpYWxvZ0RlbGV0ZVJlY29yZFZpc2libGUgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgLy8g56Gu5a6a5Yig6ZmkCiAgICBkZWxldGVSZWNvcmRTdXJlKCkgewogICAgICB0aGlzLiRheGlvcy5wb3N0KHRoaXMudXJsICsgJy9kZWxCb3Jyb3dSZWNvcmQ/amF2YScsIHsKICAgICAgICBpZDogdGhpcy5kZWxldGVJZCwKICAgICAgICB0eXBlOiB0aGlzLmRlbGV0ZVR5cGUKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCfliKDpmaTorrDlvZUnKTsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyh7CiAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk6K+l6K6w5b2V5oiQ5YqfJywKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5kaWFsb2dEZWxldGVSZWNvcmRWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgdGhpcy4kZW1pdCgnYXBwbHlSZXN1bHQnLCAwKTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyh7CiAgICAgICAgICBtZXNzYWdlOiBlcnIuZGF0YS5tZXNzYWdlLAogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICB9KTsKICAgICAgICB0aGlzLmRpYWxvZ0RlbGV0ZVJlY29yZFZpc2libGUgPSBmYWxzZTsKICAgICAgfSkKICAgIH0sCiAgICAvLyDliIbpobXlpITnkIbmlbDmja4KICAgIGdldExpc3QoKSB7CiAgICAgIGNvbnNvbGUubG9nKCfliIbpobXmlbDmja4nKTsKICAgICAgdGhpcy50b3RhbCA9IHRoaXMuaW5IYW5kbGVMaXN0Lmxlbmd0aDsKICAgICAgY29uc29sZS5sb2codGhpcy5pbkhhbmRsZUxpc3QpOwogICAgICAvLyBlczbov4fmu6TlvpfliLDmu6HotrPmkJzntKLmnaHku7bnmoTlsZXnpLrmlbDmja5saXN0CiAgICAgIHRoaXMubGlzdCA9IHRoaXMuaW5IYW5kbGVMaXN0LmZpbHRlcigoaXRlbSwgaW5kZXgpID0+CiAgICAgICAgaW5kZXggPCB0aGlzLnBhZ2UgKiB0aGlzLnBhZ2VOdW0gJiYgaW5kZXggPj0gdGhpcy5wYWdlTnVtICogKHRoaXMucGFnZSAtIDEpCiAgICAgICk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMubGlzdCk7CiAgICB9LAogICAgLy8g5YiG6aG1CiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICBjb25zb2xlLmxvZyhg5b2T5YmN6aG1OiAke3ZhbH1gKTsKICAgICAgdGhpcy5wYWdlID0gdmFsOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgKGZ1bmN0aW9uIHNtb290aHNjcm9sbCgpIHsKICAgICAgICBsZXQgY3VycmVudFNjcm9sbCA9CiAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgIGlmIChjdXJyZW50U2Nyb2xsID4gMCkgewogICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzbW9vdGhzY3JvbGwpOwogICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIGN1cnJlbnRTY3JvbGwgLSBjdXJyZW50U2Nyb2xsIC8gNSk7CiAgICAgICAgfQogICAgICB9KSgpOwogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["In-handle-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"In-handle-list.vue","sourceRoot":"src/components/views","sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <table v-for=\"(item,index) in list\" :key=\"index\" class=\"borrow-table\">\r\n        <tr>\r\n          <th>对象</th>\r\n          <th>原因/描述</th>\r\n          <th>{{item.type == 1 ? '申请时间' : (item.type == 2 ? '打款时间' : '转账时间')}}</th>\r\n          <th>金额</th>\r\n          <th>操作</th>\r\n        </tr>\r\n        <tr>\r\n          <td>{{item.userNick}}</td>\r\n          <td>{{item.describe}}</td>\r\n          <td>{{item.time}}</td>\r\n          <td>\r\n            <p :style=\"{color: item.type == 1 ? '#0c7063' : 'red'}\">\r\n              {{item.type == 1 ? '+' +formatNumberRgx(item.money) + ' ' +item.currency : '-' +formatNumberRgx(item.money) + ' ' +item.currency}}\r\n            </p>\r\n          </td>\r\n          <td>\r\n            <el-tooltip class=\"item\" effect=\"light\" content=\"查看详情\" placement=\"top-end\">\r\n              <img src=\"../../assets/imgs/details.png\" style=\"cursor: pointer;\"\r\n                @click=\"viewDetails(item.id,item.type)\" />\r\n            </el-tooltip>\r\n\r\n            <el-tooltip class=\"item\" effect=\"light\" content=\"删除记录\" placement=\"top-end\">\r\n              <img src=\"../../assets/imgs/delete.png\" style=\"margin-left: 30px;cursor: pointer;\"\r\n                @click=\"deleteRecord(item.id,item.type)\" />\r\n            </el-tooltip>\r\n            <el-dialog title=\"删除记录\" :visible.sync=\"dialogDeleteRecordVisible\" center>\r\n              <div style=\"text-align: center;\">\r\n                <p>确定删除该记录？删除后不可恢复</p>\r\n              </div>\r\n              <div slot=\"footer\">\r\n                <el-button @click=\"dialogDeleteRecordVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"deleteRecordSure\">确 定</el-button>\r\n              </div>\r\n            </el-dialog>\r\n          </td>\r\n        </tr>\r\n      </table>\r\n      <div style=\"width: 100%;height: 50px;\">\r\n        <div style=\"margin:15px 0;position:absolute;right:6%;\">\r\n          <el-pagination @current-change=\"handleCurrentChange\" :current-page=\"page\"\r\n            layout=\"total, prev, pager, next, jumper\" :total=\"total\">\r\n          </el-pagination>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        url: this.$store.state.baseUrl,\r\n        total: 0,\r\n        page: 1,\r\n        pageNum: 10,\r\n        list: [],\r\n        inHandleRecord: {},\r\n        dialogDeleteRecordVisible: false,\r\n        deleteId: 0,\r\n        deleteType: 0,\r\n\r\n      }\r\n    },\r\n    props: ['inHandleList'],\r\n    created() {\r\n      this.getList();\r\n    },\r\n    methods: {\r\n      // 查看记录详情\r\n      viewDetails(id, type) {\r\n        this.recordId = id;\r\n        this.$axios.post(this.url + '/borrowRecordInfo?java', {\r\n          id: this.recordId\r\n        }).then(res => {\r\n          console.log('获取对方处理中记录详情');\r\n          console.log(res);\r\n          this.inHandleRecord = res.data;\r\n          console.log(this.unHandleRecord);\r\n          switch (type) {\r\n            case 1:\r\n\r\n              break;\r\n            case 2:\r\n\r\n              break;\r\n            case 3:\r\n\r\n              break;\r\n          };\r\n          // 页面回到顶部\r\n          (function smoothscroll() {\r\n            var currentScroll =\r\n              document.documentElement.scrollTop || document.body.scrollTop;\r\n            if (currentScroll > 0) {\r\n              window.requestAnimationFrame(smoothscroll);\r\n              window.scrollTo(0, currentScroll - currentScroll / 5);\r\n            }\r\n          })();\r\n        }).catch(err => {\r\n          console.log(err);\r\n        })\r\n      },\r\n      // 删除记录\r\n      deleteRecord(id, type) {\r\n        this.deleteId = id;\r\n        this.deleteType = type;\r\n        if (this.deleteType == 2) {\r\n          this.$message.error({\r\n            message: '该记录为别人向你借款，你向别人打款，等带对方确认状态，不可删除',\r\n            showClose: true,\r\n            duration: 3000\r\n          })\r\n        } else {\r\n          this.dialogDeleteRecordVisible = true;\r\n        }\r\n      },\r\n      // 确定删除\r\n      deleteRecordSure() {\r\n        this.$axios.post(this.url + '/delBorrowRecord?java', {\r\n          id: this.deleteId,\r\n          type: this.deleteType\r\n        }).then(res => {\r\n          console.log('删除记录');\r\n          console.log(res);\r\n          this.$message.success({\r\n            message: '删除该记录成功',\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.dialogDeleteRecordVisible = false;\r\n          this.$emit('applyResult', 0);\r\n        }).catch(err => {\r\n          console.log(err);\r\n          this.$message.success({\r\n            message: err.data.message,\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.dialogDeleteRecordVisible = false;\r\n        })\r\n      },\r\n      // 分页处理数据\r\n      getList() {\r\n        console.log('分页数据');\r\n        this.total = this.inHandleList.length;\r\n        console.log(this.inHandleList);\r\n        // es6过滤得到满足搜索条件的展示数据list\r\n        this.list = this.inHandleList.filter((item, index) =>\r\n          index < this.page * this.pageNum && index >= this.pageNum * (this.page - 1)\r\n        );\r\n        console.log(this.list);\r\n      },\r\n      // 分页\r\n      handleCurrentChange(val) {\r\n        console.log(`当前页: ${val}`);\r\n        this.page = val;\r\n        this.getList();\r\n        (function smoothscroll() {\r\n          let currentScroll =\r\n            document.documentElement.scrollTop || document.body.scrollTop;\r\n          if (currentScroll > 0) {\r\n            window.requestAnimationFrame(smoothscroll);\r\n            window.scrollTo(0, currentScroll - currentScroll / 5);\r\n          }\r\n        })();\r\n      },\r\n    },\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .borrow-table {\r\n    width: 100%;\r\n    margin-top: 20px;\r\n\r\n    th {\r\n      height: 50px;\r\n      line-height: 50px;\r\n      background-color: #d7ebe7;\r\n    }\r\n\r\n    td {\r\n      padding: 20px;\r\n      background-color: #f3fbf9;\r\n      border-bottom: 1px solid #d7ebe7;\r\n    }\r\n  }\r\n\r\n  .borrow-table tr:hover>td {\r\n    background-color: #d7ebe7 !important;\r\n  }\r\n\r\n  table {\r\n    width: 100%;\r\n    border-collapse: separate;\r\n    border-spacing: 0;\r\n  }\r\n\r\n  tr {\r\n\r\n    th,\r\n    td {\r\n      width: 20%;\r\n      text-align: center;\r\n    }\r\n  }\r\n</style>"]}]}