<template>
  <!-- 行程结束后各状态显示不同页面 -->
  <div class="reimbursement-container" id="reimbursement">
    <!-- 我的报销页面 -->
    <div v-if="reimbursementSel.select == 0">
      <el-tabs v-model="activeName" @tab-click="handleTabClick">
        <el-tab-pane label="新增消费单" name="first">
          <div style="display: flex;justify-content: space-between">
            <div style="margin-bottom: 30px;margin-top: 10px;text-align: center;">
              <el-checkbox-group v-model="typeList">
                <el-checkbox label="行程报销"></el-checkbox>
                <el-checkbox label="非行程报销"></el-checkbox>
              </el-checkbox-group>
            </div>
            <el-form label-width="100px" style="display: flex;">
              <el-form-item label="开始时间：">
                <el-date-picker v-model="startTime" type="date" placeholder="请选择开始时间" value-format="yyyy-MM-dd"
                  class="input-style" style="width: 70%;">
                </el-date-picker>
              </el-form-item>
              <el-form-item label="结束时间：">
                <el-date-picker v-model="endTime" type="date" placeholder="请选择结束时间" value-format="yyyy-MM-dd"
                  class="input-style" style="width: 70%;"></el-date-picker>
              </el-form-item>
            </el-form>
            <el-button type="primary" style="width: 100px;height: 40px;font-size: 14px;" @click="filtrateMsgSure"
              v-preventClick>筛 选
            </el-button>
          </div>
          <div class="reimbursement-container-center">
            <div style="height: 80px;line-height: 60px;">
              <p style="height: 20px;margin: 0;text-align: center;color: #ccc;">+</p>
              <p style="height: 20px;margin: 0;text-align: center;color: #ccc;">新增</p>
            </div>
            <div class="addBtn">
              <el-button type="primary" style="width: 160px;height: 45px;font-size: 14px;" @click="addJourney">新增行程消费
              </el-button>
            </div>
            <div class="addBtn">
              <el-button type="primary" style="width: 160px;height: 45px;font-size: 14px;" @click="addNotJourney">非行程消费
              </el-button>
              <el-dialog title="新增非行程消费" :visible.sync="dialogNotJourneyVisible" center :close-on-press-escape="false"
                :close-on-click-modal="false">
                <div>
                  <div class="not-type">
                    <p style="height: 20px;margin: 0;line-height: 20px;font-size: 17px;text-align: center;">类型</p>
                    <div>
                      <el-radio-group v-model="notType" style="display: flex;justify-content: space-around;">
                        <div>
                          <el-radio-button label="交通" style="display: block;margin-top: 10px;">
                            <img src="../../assets/imgs/car.png" style="width: 20px;height: 13px;margin-right: 5px;" />
                            <span style="font-size: 15px;">交通</span>
                          </el-radio-button>
                          <el-radio-button label="工资支出" style="display: block;margin-top: 10px;">
                            <img src="../../assets/imgs/money.png"
                              style="width: 20px;height: 13px;margin-right: 5px;" />
                            <span style="font-size: 15px;">工资支出</span>
                          </el-radio-button>
                          <el-radio-button label="接待购物" style="display: block;margin-top: 10px;">
                            <img src="../../assets/imgs/08-1.png" style="width: 20px;height: 13px;margin-right: 5px;" />
                            <span style="font-size: 15px;">接待购物</span>
                          </el-radio-button>
                        </div>
                        <div>
                          <el-radio-button label="住宿" style="display: block;margin-top: 10px;">
                            <img src="../../assets/imgs/hotel.png"
                              style="width: 20px;height: 13px;margin-right: 5px;" />
                            <span style="font-size: 15px;">住宿</span>
                          </el-radio-button>
                          <el-radio-button label="公司运营" style="display: block;margin-top: 10px;">
                            <img src="../../assets/imgs/money.png"
                              style="width: 20px;height: 13px;margin-right: 5px;" />
                            <span style="font-size: 15px;">公司运营</span>
                          </el-radio-button>
                          <el-radio-button label="其他" style="display: block;margin-top: 10px;">
                            <img src="../../assets/imgs/other.png"
                              style="width: 20px;height: 13px;margin-right: 5px;" />
                            <span style="font-size: 15px;">其他</span>
                          </el-radio-button>
                        </div>
                        <div>
                          <el-radio-button label="餐饮" style="display: block;margin-top: 10px;">
                            <img src="../../assets/imgs/eat.png" style="width: 20px;height: 13px;margin-right: 5px;" />
                            <span style="font-size: 15px;">餐饮</span>
                          </el-radio-button>
                          <el-radio-button label="经费拨款" style="display: block;margin-top: 10px;">
                            <img src="../../assets/imgs/money.png"
                              style="width: 20px;height: 13px;margin-right: 5px;" />
                            <span style="font-size: 15px;">经费拨款</span>
                          </el-radio-button>
                        </div>
                      </el-radio-group>
                    </div>
                  </div>
                  <el-form label-width="120px">
                    <el-form-item label="日期：" required>
                      <el-date-picker v-model="notTime" type="date" value-format="yyyy-MM-dd" class="input-style">
                      </el-date-picker>
                    </el-form-item>
                    <el-form-item label="金额：" required>
                      <el-input v-model="notEstimateMoney" type="text" class="input-style"></el-input>
                      <el-select v-model="notCurrency" placeholder="请选择">
                        <el-option v-for="(item,index) in currencyList" :key="index" :label="item" :value="item">
                        </el-option>
                      </el-select>
                    </el-form-item>
                    <el-form-item label="账单图片：">
                      <div style="display:flex;">
                        <div class="upload-imgs">
                          <div class="add">
                            <form enctype="multipart/form-data">
                              <input @change="inputChange($event)" type="file" name="img" accept="image/*"
                                class="inputUpload" multiple />
                              <i class="el-icon-plus addIcon"></i>
                            </form>
                          </div>
                          <div style="display:flex;position:relative;" id="delImg">
                            <div v-for="(imgurl,index) of imgurls" :key="index"
                              style="margin-left:10px;position:relative;">
                              <span v-show="imgurl !== ''" class="spanStyle" @click="delImage(index)">x</span>
                              <img v-show="imgurl !== ''" :src="img + imgurl" width="100px" height="100px"
                                style="border-radius:5px;object-fit:cover;" />
                            </div>
                          </div>
                        </div>
                      </div>
                    </el-form-item>
                    <el-form-item label="备注：" required>
                      <el-input type="textarea" v-model="notRemark"></el-input>
                    </el-form-item>
                  </el-form>
                </div>
                <div slot="footer">
                  <el-button @click="dialogNotJourneyVisible = false">取 消</el-button>
                  <el-button type="primary" @click="addNotJourneySure" v-preventClick>确 定</el-button>
                </div>
              </el-dialog>
            </div>
          </div>
          <div v-if="reimburseList.length == 0" style="text-align: center;">
            <p>{{hintMsg}}</p>
          </div>
          <div v-if="reimburseList.length !== 0">
            <table v-for="(reim,index) in reimburseList" :key="index" class="reimburse-list-table">
              <tr>
                <th></th>
                <th>{{reim.type == 0 ? '行程名称' : '类型'}}</th>
                <th>{{reim.type == 0 ? '行程描述' : '描述'}}</th>
                <th>{{reim.type == 0 ? '起止时间' : '时间'}}</th>
                <th>{{reim.type == 0 ? '行程状态' : '金额'}}</th>
                <th>操作</th>
              </tr>
              <tr>
                <td>
                  <img :src="reim.type == 0 ? img2 : img1" style="width: 25px;height: 25px;" />
                </td>
                <td>{{reim.type == 0 ? reim.data.name : (reim.type == 1 ? reim.data.type : '')}}</td>
                <td>{{reim.type == 0 ? reim.data.des : (reim.type == 1 ? reim.data.remark : '')}}</td>
                <td>
                  <p v-if="reim.type == 0" style="margin: 0;">{{reim.data.startTime}}</p>
                  <p v-if="reim.type == 0" style="margin: 0;">至</p>
                  <p v-if="reim.type == 0" style="margin: 0;">{{reim.data.endTime}}</p>
                  <p v-if="reim.type == 1">{{reim.data.time}}</p>
                  <!-- {{reim.type == 0 ? reim.data.startTime + ' ~ ' + reim.data.endTime : (reim.type == 1 ? reim.data.time : '')}} -->
                </td>
                <td>
                  <div style="display: flex;justify-content: center">
                    <div style="margin-top: -3px;margin-right: 5px;">
                      <img v-show="reim.data.flag == 0" src="../../assets/imgs/ing.png"
                        style="width: 25px;height: 25px;" />
                    </div>
                    {{reim.type == 0 ? (reim.data.flag == 0 ? '进行中' : (reim.data.flag == 1 ? '未报销' : (reim.data.flag == 2 ? '待审核' : (reim.data.flag == 3 ? '待确认' : '已完成')))) : (reim.type == 1 ? formatNumberRgx(reim.data.estimateMoney) + ' ' + reim.data.currency: '')}}
                  </div>
                </td>
                <td>
                  <el-tooltip class="item" effect="light" content="查看详情" placement="top-end">
                    <img src="../../assets/imgs/details.png" style="cursor:pointer;"
                      @click="updateReimburse(reim.type,reim.data.flag,reim.data.id)" />
                  </el-tooltip>
                  <el-dialog title="修改非行程消费" :visible.sync="dialogUpdateReimburseVisible" center
                    :close-on-press-escape="false" :close-on-click-modal="false">
                    <div>
                      <div class="not-type">
                        <p style="height: 20px;margin: 0;line-height: 20px;font-size: 17px;text-align: center;">类型</p>
                        <div>
                          <el-radio-group v-model="notType" style="display: flex;justify-content: space-around;">
                            <div style="text-align: left;">
                              <el-radio-button label="交通" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/car.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">交通</span>
                              </el-radio-button>
                              <el-radio-button label="工资支出" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/money.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">工资支出</span>
                              </el-radio-button>
                              <el-radio-button label="接待购物" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/08-1.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">接待购物</span>
                              </el-radio-button>
                            </div>
                            <div style="text-align: left;">
                              <el-radio-button label="住宿" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/hotel.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">住宿</span>
                              </el-radio-button>
                              <el-radio-button label="公司运营" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/money.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">公司运营</span>
                              </el-radio-button>
                              <el-radio-button label="其他" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/other.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">其他</span>
                              </el-radio-button>
                            </div>
                            <div style="text-align: left;">
                              <el-radio-button label="餐饮" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/eat.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">餐饮</span>
                              </el-radio-button>
                              <el-radio-button label="经费拨款" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/money.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">经费拨款</span>
                              </el-radio-button>
                            </div>
                          </el-radio-group>
                        </div>
                      </div>
                      <el-form label-width="120px">
                        <el-form-item label="日期：" required>
                          <el-date-picker v-model="notTime" type="date" value-format="yyyy-MM-dd" class="input-style">
                          </el-date-picker>
                        </el-form-item>
                        <el-form-item label="金额：" required>
                          <el-input v-model="notEstimateMoney" type="text" class="input-style"></el-input>
                          <el-select v-model="notCurrency" placeholder="请选择">
                            <el-option v-for="(item,index) in currencyList" :key="index" :label="item" :value="item">
                            </el-option>
                          </el-select>
                        </el-form-item>
                        <el-form-item label="账单图片：">
                          <div style="display:flex;">
                            <div class="upload-imgs">
                              <div class="add">
                                <form enctype="multipart/form-data">
                                  <input @change="inputChange($event)" type="file" name="img" accept="image/*"
                                    class="inputUpload" multiple />
                                  <i class="el-icon-plus addIcon" style="left: 45%;"></i>
                                </form>
                              </div>
                              <div style="display:flex;position:relative;" id="delImg">
                                <div v-for="(imgurl,index) of imgurls" :key="index"
                                  style="margin-left:10px;position:relative;">
                                  <span v-show="imgurl !== ''" class="spanStyle" @click="delImage(index)">x</span>
                                  <img v-show="imgurl !== ''" :src="img + imgurl" width="100px" height="100px"
                                    style="border-radius:5px;object-fit:cover;" />
                                </div>
                              </div>
                            </div>
                          </div>
                        </el-form-item>
                        <el-form-item label="备注：" required>
                          <el-input type="textarea" v-model="notRemark"></el-input>
                        </el-form-item>
                      </el-form>
                    </div>
                    <div slot="footer">
                      <el-button @click="dialogUpdateReimburseVisible = false">取 消</el-button>
                      <el-button type="primary" @click="updateReimburseSure" v-preventClick>确 定</el-button>
                    </div>
                  </el-dialog>
                  <el-dialog title="非行程记录详情" :visible.sync="dialogUnReimDetailsVisible" center="">
                    <div>
                      <div style="text-align: center;">
                        <p>{{formatNumberRgx(notEstimateMoney) + ' ' + notCurrency}}</p>
                      </div>
                      <el-form label-width="120px">
                        <el-form-item label="日期：">
                          <span>{{notTime}}</span>
                        </el-form-item>
                        <el-form-item label="账单图片：">
                          <div style="display:flex;">
                            <div class="upload-imgs">
                              <div style="display:flex;position:relative;" id="delImg">
                                <div v-for="(imgurl,index) of imgurls" :key="index"
                                  style="margin-left:10px;position:relative;">
                                  <img v-show="imgurl !== ''" :src="img + imgurl" width="100px" height="100px"
                                    style="border-radius:5px;object-fit:cover;" />
                                </div>
                              </div>
                            </div>
                          </div>
                        </el-form-item>
                        <el-form-item label="备注：">
                          <span>{{notRemark}}</span>
                        </el-form-item>
                      </el-form>
                    </div>
                    <div slot="footer">
                      <el-button @click="dialogUnReimDetailsVisible = false">取 消</el-button>
                      <el-button type="primary" @click="dialogUnReimDetailsVisible = false">确 定</el-button>
                    </div>
                  </el-dialog>
                  <el-dialog title="非行程记录信息" :visible.sync="dialogUnReimbursementVisible" center>
                    <div>
                      <p style="text-align: center;">
                        <span>{{formatNumberRgx(unJourneyInfo.estimateMoney) + ' ' + unJourneyInfo.currency}}</span>
                      </p>
                      <p>
                        <span>日期： <span>{{unJourneyInfo.time}}</span></span>
                      </p>
                      <div>
                        <span>账单图片：</span>
                        <div style="display:flex;position:relative;" id="delImg">
                          <div v-for="(imgurl,index) of imgurls" :key="index"
                            style="margin-left:10px;position:relative;">
                            <img v-show="imgurl !== ''" :src="img + imgurl" width="100px" height="100px"
                              style="border-radius:5px;object-fit:cover;" />
                          </div>
                        </div>
                      </div>
                      <p>
                        <span>备注： <span>{{unJourneyInfo.remark}}</span></span>
                      </p>
                      <div style="margin-top: 20px;border-top: 1px solid #ddd;">
                        <p>财务核算：</p>
                        <div style="padding-left: 15px;display: flex;justify-content: space-between;">
                          <p>汇率：<span>{{unJourneyInfo.rate}}</span></p>
                          <img src="../../assets/imgs/calc.png" style="height: 35px;cursor: pointer;"
                            @click="rateCalcJump" />
                        </div>
                        <p style="margin-top: 0;padding-left: 15px;">
                          汇率日期：<span>{{unJourneyInfo.rateTime}}</span>
                        </p>
                        <p style="padding-left: 15px;">
                          预估报销金额：<span>{{formatNumberRgx(unJourneyInfo.sysCheckMoney) + ' ' + 'HKD'}}</span>
                        </p>
                        <p style="padding-left: 15px;">
                          核算报销金额：<span>{{formatNumberRgx(unJourneyInfo.checkMoney) + ' ' + 'HKD'}}</span>
                        </p>
                      </div>
                    </div>
                    <div slot="footer">
                      <el-button @click="dialogUnReimbursementVisible = false">取 消</el-button>
                      <el-button type="primary" @click="dialogUnReimbursementVisible = false">确 认</el-button>
                    </div>
                  </el-dialog>
                  <el-tooltip class="item" effect="light" content="删除" placement="top-end">
                    <img src="../../assets/imgs/delete.png" style="margin-left: 30px;cursor:pointer;"
                      @click="deleteReimburse(reim.type,reim.data.id,reim.data.flag)" />
                  </el-tooltip>
                  <el-dialog title="删除消费单" :visible.sync="dialogDeleteReimVisible">
                    <div style="text-align: center;">
                      <p>确定删除该消费单？删除后不可恢复</p>
                    </div>
                    <div slot="footer">
                      <el-button @click="dialogDeleteReimVisible = false">取 消</el-button>
                      <el-button type="primary" @click="deleteReimburseSure" v-preventClick>确 定</el-button>
                    </div>
                  </el-dialog>
                </td>
              </tr>
            </table>
            <div style="width: 100%;height: 50px;">
              <div style="margin:15px 0;position:absolute;right:6%;">
                <el-pagination @current-change="handleCurrentChange" :current-page="page"
                  layout="total, prev, pager, next, jumper" :total="total">
                </el-pagination>
              </div>
            </div>
          </div>
        </el-tab-pane>
        <el-tab-pane name="second">
          <div slot="label" style="display: flex;">报销单
            <p style="margin-top: -10px;margin-left: 3px;">
              <img v-if="whether == 1" src="../../assets/imgs/circle.png" style="width: 10px;height: 10px;" />
            </p>
          </div>
          <div>
            <el-tabs type="border-card" v-model="activeSecondName" @tab-click="handleSecondTabClick">
              <el-tab-pane name="one">
                <div slot="label" style="font-size: 15px;">未报销</div>
                <div>
                  <Un-reimbursement v-if="activeName == 'second' && activeSecondName == 'one'"
                    :unReimbursementSel="unReimbursementSel">
                  </Un-reimbursement>
                </div>
              </el-tab-pane>
              <el-tab-pane name="two">
                <div slot="label" style="font-size: 15px;">待审核</div>
                <div>
                  <Check-pending v-if="activeSecondName == 'two'" :checkPendingSel="checkPendingSel"></Check-pending>
                </div>
              </el-tab-pane>
              <el-tab-pane name="three">
                <div slot="label" style="display: flex;font-size: 15px;">待确认
                  <p style="margin-top: -10px;margin-left: 3px;">
                    <img v-if="whether == 1" src="../../assets/imgs/circle.png" style="width: 10px;height: 10px;" />
                  </p>
                </div>
                <div>
                  <To-confirmed v-if="activeSecondName == 'three'" :toConfirmedSel="toConfirmedSel"
                    @rateCalcJump="rateCalcJump" @sumCom="sumCom"></To-confirmed>
                </div>
              </el-tab-pane>
              <el-tab-pane name="four">
                <div slot="label" style="font-size: 15px;">已完成</div>
                <div>
                  <Complete-reimbursement v-if="activeSecondName == 'four'"
                    :completeReimbursementSel="completeReimbursementSel" @rateCalcJump="rateCalcJump">
                  </Complete-reimbursement>
                </div>
              </el-tab-pane>
            </el-tabs>
          </div>
        </el-tab-pane>
      </el-tabs>
    </div>
    <div v-if="reimbursementSel.select == 1">
      <div class="back-img" @click="gobackList">
        <div>
          <img src="../../assets/imgs/goback.png" />
        </div>
        <span class="font">返回</span>
      </div>
      <div class="add-container">
        <el-form label-width="140px">
          <el-form-item label="行程名称：" required>
            <el-input v-model="name" class="input-style"></el-input>
          </el-form-item>
          <el-form-item label="预计起止时间：" required>
            <el-date-picker v-model="startTime2" type="daterange" range-separator="至" start-placeholder="开始日期"
              end-placeholder="结束日期" value-format="yyyy-MM-dd" class="input-style">
            </el-date-picker>
          </el-form-item>
          <el-form-item label="行程描述：" required>
            <el-input v-model="des" type="textarea" class="input-style"></el-input>
          </el-form-item>
        </el-form>
        <div class="add-second">
          <div>
            <el-radio-group v-model="type">
              <el-radio-button label="交通">
                <img src="../../assets/imgs/car.png" style="width: 20px;height: 13px;margin-right: 5px;" />
                <span style="font-size: 15px;">交通</span>
              </el-radio-button>
              <el-radio-button label="住宿">
                <img src="../../assets/imgs/hotel.png" style="width: 20px;height: 13px;margin-right: 5px;" />
                <span style="font-size: 15px;">住宿</span>
              </el-radio-button>
              <el-radio-button label="餐饮">
                <img src="../../assets/imgs/eat.png" style="width: 20px;height: 13px;margin-right: 5px;" />
                <span style="font-size: 15px;">餐饮</span>
              </el-radio-button>
              <el-radio-button label="人工">
                <img src="../../assets/imgs/people.png" style="width: 20px;height: 13px;margin-right: 5px;" />
                <span style="font-size: 15px;">人工</span>
              </el-radio-button>
              <el-radio-button label="小费">
                <img src="../../assets/imgs/tip.png" style="width: 20px;height: 13px;margin-right: 5px;" />
                <span style="font-size: 15px;">小费</span>
              </el-radio-button>
              <el-radio-button label="其他">
                <img src="../../assets/imgs/other.png" style="width: 20px;height: 13px;margin-right: 5px;" />
                <span style="font-size: 15px;">其他</span>
              </el-radio-button>
            </el-radio-group>
          </div>
          <div>
            <div style="height: 80px;line-height: 60px;cursor: pointer;" @click="addRecord">
              <p style="height: 20px;margin: 0;text-align: center;color: #0aa1ed;">+</p>
              <p style="height: 20px;margin: 0;text-align: center;color: #0aa1ed;">增加记录</p>
            </div>
            <el-dialog title="增加记录" :visible.sync="dialogAddRecordVisible" center :close-on-press-escape="false"
              :close-on-click-modal="false">
              <div>
                <el-form label-width="120px">
                  <el-form-item label="日期：" required>
                    <el-date-picker v-model="time" type="date" value-format="yyyy-MM-dd" class="input-style"
                      placeholder="请选择日期">
                    </el-date-picker>
                  </el-form-item>
                  <el-form-item label="金额：" required>
                    <el-input v-model="estimateMoney" type="text" class="input-style"></el-input>
                    <el-select v-model="currency" placeholder="请选择">
                      <el-option v-for="(item,index) in currencyList" :key="index" :label="item" :value="item">
                      </el-option>
                    </el-select>
                  </el-form-item>
                  <el-form-item label="账单图片：">
                    <div style="display:flex;">
                      <div class="upload-imgs">
                        <div class="add">
                          <form enctype="multipart/form-data">
                            <input @change="inputChange($event)" type="file" name="img" accept="image/*"
                              class="inputUpload" multiple />
                            <i class="el-icon-plus addIcon"></i>
                          </form>
                        </div>
                        <div style="display:flex;position:relative;" id="delImg">
                          <div v-for="(imgurl,index) of imgurls" :key="index"
                            style="margin-left:10px;position:relative;">
                            <span v-show="imgurl !== ''" class="spanStyle" @click="delImage(index)">x</span>
                            <img v-show="imgurl !== ''" :src="img + imgurl" width="100px" height="100px"
                              style="border-radius:5px;object-fit:cover;" />
                          </div>
                        </div>
                      </div>
                    </div>
                  </el-form-item>
                  <el-form-item label="备注：" required>
                    <el-input type="textarea" v-model="remark"></el-input>
                  </el-form-item>
                </el-form>
              </div>
              <div slot="footer">
                <el-button @click="dialogAddRecordVisible = false">取 消</el-button>
                <el-button type="primary" @click="addRecordSure" v-preventClick>保 存</el-button>
              </div>
            </el-dialog>
          </div>
        </div>
        <div>
          <div style="margin-top: 15px;">
            <span>预估总费用：</span>
            <span>{{formatNumberRgx(sum) + ' ' + currency}}</span>
          </div>
          <p style="margin: 0;font-size: 14px;color: #bbb;">实际报销费用以财务核算为准</p>
          <div v-if="records.length !== 0">
            <table>
              <tr>
                <th>类型</th>
                <th>金额</th>
                <th>时间</th>
                <th>操作</th>
              </tr>
              <tr v-for="(record,index) in records" :key="index">
                <td>{{record.type}}</td>
                <td>{{formatNumberRgx(record.estimateMoney) + ' ' + record.currency}}</td>
                <td>{{record.time}}</td>
                <td>
                  <el-tooltip class="item" effect="light" content="修改信息" placement="top-end">
                    <img src="../../assets/imgs/update.png" style="cursor:pointer;"
                      @click="updateRecord(record,index)" />
                  </el-tooltip>
                  <el-dialog title="修改记录" :visible.sync="dialogUpdateRecordVisible" center
                    :close-on-press-escape="false" :close-on-click-modal="false">
                    <div>
                      <div class="not-type">
                        <p style="height: 20px;margin: 0;line-height: 20px;font-size: 17px;text-align: center;">类型</p>
                        <div>
                          <el-radio-group v-model="updateType" style="display: flex;justify-content: space-around;">
                            <div>
                              <el-radio-button label="交通" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/car.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">交通</span>
                              </el-radio-button>
                              <el-radio-button label="人工" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/people.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">人工</span>
                              </el-radio-button>
                            </div>
                            <div>
                              <el-radio-button label="住宿" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/hotel.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">住宿</span>
                              </el-radio-button>
                              <el-radio-button label="小费" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/tip.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">小费</span>
                              </el-radio-button>
                            </div>
                            <div>
                              <el-radio-button label="餐饮" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/eat.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">餐饮</span>
                              </el-radio-button>
                              <el-radio-button label="其他" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/other.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">其他</span>
                              </el-radio-button>
                            </div>
                          </el-radio-group>
                        </div>
                      </div>
                      <el-form label-width="120px">
                        <el-form-item label="日期：" required>
                          <el-date-picker v-model="time" type="date" value-format="yyyy-MM-dd" class="input-style"
                            placeholder="请选择日期">
                          </el-date-picker>
                        </el-form-item>
                        <el-form-item label="金额：" required>
                          <el-input v-model="estimateMoney" type="text" class="input-style"></el-input>
                          <el-select v-model="currency" placeholder="请选择">
                            <el-option v-for="(item,index) in currencyList" :key="index" :label="item" :value="item">
                            </el-option>
                          </el-select>
                        </el-form-item>
                        <el-form-item label="账单图片：">
                          <div style="display:flex;">
                            <div class="upload-imgs">
                              <div class="add">
                                <form enctype="multipart/form-data">
                                  <input @change="inputChange($event)" type="file" name="img" accept="image/*"
                                    class="inputUpload" multiple />
                                  <i class="el-icon-plus addIcon"></i>
                                </form>
                              </div>
                              <div style="display:flex;position:relative;" id="delImg">
                                <div v-for="(imgurl,index) of imgurls" :key="index"
                                  style="margin-left:10px;position:relative;">
                                  <span v-show="imgurl !== ''" class="spanStyle" @click="delImage(index)">x</span>
                                  <img v-show="imgurl !== ''" :src="img + imgurl" width="100px" height="100px"
                                    style="border-radius:5px;object-fit:cover;" />
                                </div>
                              </div>
                            </div>
                          </div>
                        </el-form-item>
                        <el-form-item label="备注：" required>
                          <el-input type="textarea" v-model="remark"></el-input>
                        </el-form-item>
                      </el-form>
                    </div>
                    <div slot="footer">
                      <el-button @click="dialogUpdateRecordVisible = false">取 消</el-button>
                      <el-button type="primary" @click="updateRecordSure" v-preventClick>保 存</el-button>
                    </div>
                  </el-dialog>
                  <el-tooltip class="item" effect="light" content="删除" placement="top-end">
                    <img src="../../assets/imgs/delete.png" style="margin-left: 30px;cursor:pointer;"
                      @click="deleteRecord(index)" />
                  </el-tooltip>
                  <el-dialog title="删除记录" :visible.sync="dialogDelRecordVisible">
                    <div style="text-align: center;">
                      <p>确定删除该记录？删除后不可恢复</p>
                    </div>
                    <div slot="footer">
                      <el-button @click="dialogDelRecordVisible = false">取 消</el-button>
                      <el-button type="primary" @click="deleteRecordSure" v-preventClick>确 定</el-button>
                    </div>
                  </el-dialog>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div style="margin-top: 40px;margin-right: 10%;text-align: right;">
          <el-button type="primary" @click="addJourneySure" v-preventClick>保 存</el-button>
        </div>
      </div>
    </div>
    <div v-if="reimbursementSel.select == 2">
      <div class="back-img" @click="gobackList">
        <div>
          <img src="../../assets/imgs/goback.png" />
        </div>
        <span class="font">返回</span>
      </div>
      <div class="add-container">
        <el-form label-width="140px">
          <el-form-item label="行程名称：" required>
            <el-input v-model="name" class="input-style"></el-input>
          </el-form-item>
          <el-form-item label="预计起止时间：" required>
            <el-date-picker v-model="startTime2" type="daterange" range-separator="至" start-placeholder="开始日期"
              end-placeholder="结束日期" value-format="yyyy-MM-dd" class="input-style">
            </el-date-picker>
          </el-form-item>
          <el-form-item label="行程描述：" required>
            <el-input v-model="des" type="textarea" class="input-style"></el-input>
          </el-form-item>
        </el-form>
        <div class="add-second" v-show="updateFlag == 0">
          <div>
            <el-radio-group v-model="type">
              <el-radio-button label="交通">
                <img src="../../assets/imgs/car.png" style="width: 20px;height: 13px;margin-right: 5px;" />
                <span style="font-size: 15px;">交通</span>
              </el-radio-button>
              <el-radio-button label="住宿">
                <img src="../../assets/imgs/hotel.png" style="width: 20px;height: 13px;margin-right: 5px;" />
                <span style="font-size: 15px;">住宿</span>
              </el-radio-button>
              <el-radio-button label="餐饮">
                <img src="../../assets/imgs/eat.png" style="width: 20px;height: 13px;margin-right: 5px;" />
                <span style="font-size: 15px;">餐饮</span>
              </el-radio-button>
              <el-radio-button label="人工">
                <img src="../../assets/imgs/people.png" style="width: 20px;height: 13px;margin-right: 5px;" />
                <span style="font-size: 15px;">人工</span>
              </el-radio-button>
              <el-radio-button label="小费">
                <img src="../../assets/imgs/tip.png" style="width: 20px;height: 13px;margin-right: 5px;" />
                <span style="font-size: 15px;">小费</span>
              </el-radio-button>
              <el-radio-button label="其他">
                <img src="../../assets/imgs/other.png" style="width: 20px;height: 13px;margin-right: 5px;" />
                <span style="font-size: 15px;">其他</span>
              </el-radio-button>
            </el-radio-group>
          </div>
          <div>
            <div style="height: 80px;line-height: 60px;cursor: pointer;" @click="addRecord">
              <p style="height: 20px;margin: 0;text-align: center;color: #0aa1ed;">+</p>
              <p style="height: 20px;margin: 0;text-align: center;color: #0aa1ed;">增加记录</p>
            </div>
            <el-dialog title="增加记录" :visible.sync="dialogAddRecordVisible" center :close-on-press-escape="false"
              :close-on-click-modal="false">
              <div>
                <el-form label-width="120px">
                  <el-form-item label="日期：" required>
                    <el-date-picker v-model="time" type="date" value-format="yyyy-MM-dd" class="input-style"
                      placeholder="请选择日期">
                    </el-date-picker>
                  </el-form-item>
                  <el-form-item label="金额：" required>
                    <el-input v-model="estimateMoney" type="text" class="input-style"></el-input>
                    <el-select v-model="currency" placeholder="请选择">
                      <el-option v-for="(item,index) in currencyList" :key="index" :label="item" :value="item">
                      </el-option>
                    </el-select>
                  </el-form-item>
                  <el-form-item label="账单图片：">
                    <div style="display:flex;">
                      <div class="upload-imgs">
                        <div class="add">
                          <form enctype="multipart/form-data">
                            <input @change="inputChange($event)" type="file" name="img" accept="image/*"
                              class="inputUpload" multiple />
                            <i class="el-icon-plus addIcon"></i>
                          </form>
                        </div>
                        <div style="display:flex;position:relative;" id="delImg">
                          <div v-for="(imgurl,index) of imgurls" :key="index"
                            style="margin-left:10px;position:relative;">
                            <span v-show="imgurl !== ''" class="spanStyle" @click="delImage(index)">x</span>
                            <img v-show="imgurl !== ''" :src="img + imgurl" width="100px" height="100px"
                              style="border-radius:5px;object-fit:cover;" />
                          </div>
                        </div>
                      </div>
                    </div>
                  </el-form-item>
                  <el-form-item label="备注：" required>
                    <el-input type="textarea" v-model="remark"></el-input>
                  </el-form-item>
                </el-form>
              </div>
              <div slot="footer">
                <el-button @click="dialogAddRecordVisible = false">取 消</el-button>
                <el-button type="primary" @click="addRecordSure" v-preventClick>保 存</el-button>
              </div>
            </el-dialog>
          </div>
        </div>
        <div>
          <div style="margin-top: 15px;">
            <span>预估总费用：</span>
            <span>{{formatNumberRgx(sum) + ' ' + currency}}</span>
          </div>
          <p style="margin: 0;font-size: 14px;color: #bbb;">实际报销费用以财务核算为准</p>
          <div v-if="records.length !== 0">
            <table>
              <tr>
                <th>类型</th>
                <th>金额</th>
                <th>时间</th>
                <th>操作</th>
              </tr>
              <tr v-for="(record,index) in records" :key="index">
                <td>{{record.type}}</td>
                <td>{{formatNumberRgx(record.estimateMoney) + ' ' + record.currency}}</td>
                <td>{{record.time}}</td>
                <td>
                  <el-tooltip class="item" effect="light" content="修改信息" placement="top-end">
                    <img src="../../assets/imgs/update.png" style="cursor:pointer;"
                      @click="updateRecord(record,index)" />
                  </el-tooltip>
                  <el-dialog title="修改记录" :visible.sync="dialogUpdateRecordVisible" center
                    :close-on-press-escape="false" :close-on-click-modal="false">
                    <div>
                      <div class="not-type">
                        <p style="height: 20px;margin: 0;line-height: 20px;font-size: 17px;text-align: center;">类型</p>
                        <div>
                          <el-radio-group v-model="updateType" style="display: flex;justify-content: space-around;">
                            <div>
                              <el-radio-button label="交通" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/car.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">交通</span>
                              </el-radio-button>
                              <el-radio-button label="人工" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/people.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">人工</span>
                              </el-radio-button>
                            </div>
                            <div>
                              <el-radio-button label="住宿" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/hotel.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">住宿</span>
                              </el-radio-button>
                              <el-radio-button label="小费" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/tip.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">小费</span>
                              </el-radio-button>
                            </div>
                            <div>
                              <el-radio-button label="餐饮" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/eat.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">餐饮</span>
                              </el-radio-button>
                              <el-radio-button label="其他" style="display: block;margin-top: 10px;">
                                <img src="../../assets/imgs/other.png"
                                  style="width: 20px;height: 13px;margin-right: 5px;" />
                                <span style="font-size: 15px;">其他</span>
                              </el-radio-button>
                            </div>
                          </el-radio-group>
                        </div>
                      </div>
                      <el-form label-width="120px">
                        <el-form-item label="日期：" required>
                          <el-date-picker v-model="time" type="date" value-format="yyyy-MM-dd" class="input-style"
                            placeholder="请选择日期">
                          </el-date-picker>
                        </el-form-item>
                        <el-form-item label="金额：" required>
                          <el-input v-model="estimateMoney" type="text" class="input-style"></el-input>
                          <el-select v-model="currency" placeholder="请选择">
                            <el-option v-for="(item,index) in currencyList" :key="index" :label="item" :value="item">
                            </el-option>
                          </el-select>
                        </el-form-item>
                        <el-form-item label="账单图片：">
                          <div style="display:flex;">
                            <div class="upload-imgs">
                              <div class="add">
                                <form enctype="multipart/form-data">
                                  <input @change="inputChange($event)" type="file" name="img" accept="image/*"
                                    class="inputUpload" multiple />
                                  <i class="el-icon-plus addIcon"></i>
                                </form>
                              </div>
                              <div style="display:flex;position:relative;" id="delImg">
                                <div v-for="(imgurl,index) of imgurls" :key="index"
                                  style="margin-left:10px;position:relative;">
                                  <span v-show="imgurl !== ''" class="spanStyle" @click="delImage(index)">x</span>
                                  <img v-show="imgurl !== ''" :src="img + imgurl" width="100px" height="100px"
                                    style="border-radius:5px;object-fit:cover;" />
                                </div>
                              </div>
                            </div>
                          </div>
                        </el-form-item>
                        <el-form-item label="备注：" required>
                          <el-input type="textarea" v-model="remark"></el-input>
                        </el-form-item>
                      </el-form>
                    </div>
                    <div slot="footer">
                      <el-button @click="dialogUpdateRecordVisible = false">取 消</el-button>
                      <el-button type="primary" @click="updateRecordSure" v-preventClick>保 存</el-button>
                    </div>
                  </el-dialog>
                  <el-tooltip class="item" effect="light" content="删除" placement="top-end">
                    <img src="../../assets/imgs/delete.png" style="margin-left: 30px;cursor:pointer;"
                      v-show="updateFlag == 0" @click="deleteRecord(record.id,index)" />
                  </el-tooltip>
                  <el-dialog title="删除记录" :visible.sync="dialogDelRecordVisible">
                    <div style="text-align: center;">
                      <p>确定删除该记录？删除后不可恢复</p>
                    </div>
                    <div slot="footer">
                      <el-button @click="dialogDelRecordVisible = false">取 消</el-button>
                      <el-button type="primary" @click="deleteRecordSure" v-preventClick>确 定</el-button>
                    </div>
                  </el-dialog>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div>
          <el-button type="primary" @click="finishTrip" v-show="updateFlag == 0"
            style="width: 15%;margin-top: 40px;margin-right: 19%;position: fixed;bottom: 35px;right: 10%;">
            结束行程</el-button>
          <el-dialog title="结束行程" :visible.sync="dialogFinishTripVisible" center>
            <div style="text-align: center;">
              <p>结束行程后，将不能增加或者删除记录。是否结束行程？</p>
            </div>
            <div slot="footer">
              <el-button @click="dialogFinishTripVisible = false">手滑了</el-button>
              <el-button type="primary" @click="finishTripSure" v-preventClick>结束行程</el-button>
            </div>
          </el-dialog>
          <el-button type="primary" @click="updateJourneySure" v-preventClick
            style="width: 15%;margin-top: 40px;margin-right: 2%;position: fixed;bottom: 35px;right: 10%;">确定修改
          </el-button>
        </div>
      </div>
    </div>
    <div v-if="reimbursementSel.select == 3">
      <div class="back-img" @click="gobackList">
        <div>
          <img src="../../assets/imgs/goback.png" />
        </div>
        <span class="font">返回</span>
      </div>
      <div class="flagTable">
        <div style="margin-bottom: 15px;">
          <span>行程名称：</span>
          <span>{{name}}</span>
        </div>
        <div style="margin-bottom: 15px;">
          <span>预计起止时间：</span>
          <span>{{startTime2[0] +' ~ '+startTime2[1]}}</span>
        </div>
        <div style="margin-bottom: 15px;padding-bottom: 15px;border-bottom: 1px solid #ddd;">
          <span>行程描述：</span>
          <span>{{des}}</span>
        </div>

        <div>
          <div style="margin-top: 15px;">
            <span>预估报销金额：</span>
            <span>{{formatNumberRgx(sysCheckMoney) + ' ' + 'HKD'}}</span>
          </div>
          <p style="margin: 0;font-size: 14px;color: #bbb;">实际报销费用以财务核算为准</p>
          <div v-if="records.length !== 0" style="margin-top: 30px;">
            <table>
              <tr>
                <th>类型</th>
                <th>金额</th>
                <th>时间</th>
                <th>操作</th>
              </tr>
              <tr v-for="(record,index) in records" :key="index">
                <td>{{record.type}}</td>
                <td>{{formatNumberRgx(record.estimateMoney) + ' ' + record.currency}}</td>
                <td>{{record.time}}</td>
                <td>
                  <el-tooltip class="item" effect="light" content="查看详情" placement="top-end">
                    <img src="../../assets/imgs/details.png" style="cursor:pointer;"
                      @click="updateRecord(record,index)" />
                  </el-tooltip>
                  <el-dialog title="记录详情" :visible.sync="dialogUpdateRecordVisible" center
                    :close-on-press-escape="false" :close-on-click-modal="false">
                    <div>
                      <div style="text-align: center;">
                        <p>{{formatNumberRgx(estimateMoney) + ' ' +currency}}</p>
                      </div>
                      <el-form label-width="120px">
                        <el-form-item label="日期：">
                          <span>{{time}}</span>
                        </el-form-item>
                        <el-form-item label="账单图片：">
                          <div style="display:flex;">
                            <div class="upload-imgs">
                              <div style="display:flex;position:relative;" id="delImg">
                                <div v-for="(imgurl,index) of imgurls" :key="index"
                                  style="margin-left:10px;position:relative;">
                                  <img v-show="imgurl !== ''" :src="img + imgurl" width="100px" height="100px"
                                    style="border-radius:5px;object-fit:cover;" />
                                </div>
                              </div>
                            </div>
                          </div>
                        </el-form-item>
                        <el-form-item label="备注：">
                          <span>{{remark}}</span>
                        </el-form-item>
                      </el-form>
                    </div>
                    <div slot="footer">
                      <el-button @click="dialogUpdateRecordVisible = false">取 消</el-button>
                      <el-button type="primary" @click="dialogUpdateRecordVisible = false">确 定</el-button>
                    </div>
                  </el-dialog>
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div v-if="reimbursementSel.select == 4">
      <div class="back-img" @click="gobackList">
        <div>
          <img src="../../assets/imgs/goback.png" />
        </div>
        <span class="font">返回</span>
      </div>
      <div class="flagTable">
        <div>
          <p>
            <span>行程名称：<span>{{journeyInfo.name}}</span></span>
          </p>
          <p>
            <span>起止时间：<span>{{journeyInfo.startTime + ' ~ ' + journeyInfo.endTime}}</span></span>
          </p>
          <p>
            <span>行程描述：<span>{{journeyInfo.des}}</span></span>
          </p>
        </div>
        <div>
          <table>
            <tr>
              <th>类型</th>
              <th>预估报销金额</th>
              <th>核算报销金额</th>
              <th>时间</th>
              <th>操作</th>
            </tr>
            <tr v-for="(every,index) in journeyInfo.recordList" :key="index">
              <td>{{every.type}}</td>
              <td>
                {{formatNumberRgx(every.sysCheckMoney) + ' ' + 'HKD'}}
              </td>
              <td>
                {{formatNumberRgx(every.checkMoney) + ' ' + 'HKD'}}
              </td>
              <td>{{every.time}}</td>
              <td>
                <el-tooltip class="item" effect="light" content="查看详情" placement="top-end">
                  <img src="../../assets/imgs/details.png" style="cursor:pointer;" @click="recordDetails(every)" />
                </el-tooltip>
                <el-dialog title="记录详情" :visible.sync="dialogRecordDetailsVisible" center>
                  <div>
                    <p style="text-align: center;">
                      <span>{{formatNumberRgx(recordDetailsMsg.estimateMoney) + ' ' + recordDetailsMsg.currency}}</span>
                    </p>
                    <p>
                      <span>日期： <span>{{recordDetailsMsg.time}}</span></span>
                    </p>
                    <div>
                      <span>账单图片：</span>
                      <div style="display:flex;position:relative;" id="delImg">
                        <div v-for="(imgurl,index) of imgurls" :key="index" style="margin-left:10px;position:relative;">
                          <img v-show="imgurl !== ''" :src="img + imgurl" width="100px" height="100px"
                            style="border-radius:5px;object-fit:cover;" />
                        </div>
                      </div>
                    </div>
                    <p>
                      <span>备注： <span>{{recordDetailsMsg.remark}}</span></span>
                    </p>
                    <div style="margin-top: 20px;border-top: 1px solid #ddd;">
                      <p>财务核算：</p>
                      <div style="padding-left: 15px;display: flex;justify-content: space-between;">
                        <p>汇率：<span>{{recordDetailsMsg.rate}}</span></p>
                        <img src="../../assets/imgs/calc.png" style="height: 35px;cursor: pointer;"
                          @click="rateCalcJump" />
                      </div>
                      <p style="margin-top: 0;padding-left: 15px;">
                        汇率日期：<span>{{recordDetailsMsg.rateTime}}</span>
                      </p>
                      <p style="padding-left: 15px;">
                        预估报销金额：<span>{{formatNumberRgx(recordDetailsMsg.sysCheckMoney) + ' ' + 'HKD'}}</span>
                      </p>
                      <p style="padding-left: 15px;">
                        核算报销金额：<span>{{formatNumberRgx(recordDetailsMsg.checkMoney) + ' ' + 'HKD'}}</span>
                      </p>
                    </div>
                  </div>
                  <div slot="footer">
                    <el-button @click="dialogRecordDetailsVisible = false">取 消</el-button>
                    <el-button type="primary" @click="dialogRecordDetailsVisible = false">确 认</el-button>
                  </div>
                </el-dialog>
              </td>
            </tr>
          </table>
        </div>
        <div>
          <p>财务核算：</p>
          <p style="margin-left: 20px;">预估报销金额：<span>{{formatNumberRgx(journeyInfo.sysCheckMoney) + ' ' + 'HKD'}}</span>
          </p>
          <p style="margin-left: 20px;">核算报销金额：<span>{{formatNumberRgx(journeyInfo.checkMoney) + ' ' + 'HKD'}}</span>
          </p>
        </div>
      </div>

    </div>
  </div>
</template>
<script>
  export default {
    data() {
      return {
        hintMsg: '数据加载中...',
        page: 1,
        pageNum: 10,
        reimburseList: [],
        total: 0,
        whether: 0,
        img1: require('../../assets/imgs/reim.png'),
        img2: require('../../assets/imgs/notReim.png'),
        updateType: 0,
        updateId: 0,
        deleteType: 0,
        deleteId: 0,
        img: this.$store.state.baseUrl,
        activeName: 'first',
        dialogFiltrateVisible: false,
        keyword: '',
        page: 1,
        pageNum: 10,
        typeList: ['行程报销', '非行程报销'],
        startTime: '',
        endTime: '',
        name: '', // 行程名称
        startTime2: [], // 行程开始时间
        des: '', // 行程描述
        type: '', // 记录详情类型
        records: [], // 记录列表
        dialogAddRecordVisible: false,
        time: '', // 记录日期
        estimateMoney: '', // 用户申报金额
        currencyList: [],
        currency: '', // 用户选择的币种
        imgurls: [],
        remark: '', // 账单备注
        sum: 0,
        dialogUpdateRecordVisible: false,
        updateIndex: 0,
        dialogDelRecordVisible: false,
        deleteIndex: 0,
        deleteRecordId: 0,
        dialogNotJourneyVisible: false,
        notType: '', // 非行程消费类型
        notTime: '', // 非行程消费日期
        notEstimateMoney: '', // 金额
        notCurrency: '', // 币种
        notRemark: '', // 备注
        dialogUpdateReimburseVisible: false,
        dialogDeleteReimVisible: false,
        flag: null,
        updateFlag: null,
        dialogFinishTripVisible: false,
        unReimbursementSel: {
          id: 0,
          select: 0
        },
        activeSecondName: 'one',
        checkPendingSel: {
          id: 0,
          select: 0
        },
        toConfirmedSel: {
          id: 0,
          select: 0
        },
        completeReimbursementSel: {
          select: 0
        },
        recordId: '',
        sysCheckMoney: 0,
        journeyInfo: {},
        recordDetailsMsg: {},
        dialogRecordDetailsVisible: false,
        dialogUnReimDetailsVisible: false,
        dialogUnReimbursementVisible: false,
        unJourneyInfo: {},

      }
    },
    props: ['reimbursementSel'],
    created() {
      this.handleReimburseList();
      this.handleCountryGet();
    },
    mounted() {
      this.handleSureReimbursement();
    },
    methods: {
      handleTabClick(tab, event) {
        console.log(this.activeName);
        if (this.activeName == 'second') {
          this.$emit('tabSelect', 1);
          this.activeSecondName = 'one';
        } else {
          this.$emit('tabSelect', 0);
          this.keyword = '';
          this.page = 1;
          this.handleReimburseList();
        };
        this.unReimbursementSel.select = 0;
        this.checkPendingSel.select = 0;
        this.toConfirmedSel.select = 0;
        this.completeReimbursementSel.select = 0;
      },
      handleSecondTabClick(tab, event) {
        console.log(this.activeSecondName);
        this.unReimbursementSel.select = 0;
        this.checkPendingSel.select = 0;
        this.toConfirmedSel.select = 0;
        this.completeReimbursementSel.select = 0;
      },
      rateCalcJump() {
        this.$emit('jumpRate', 11);
      },
      // 获取是否有需要确认的报销单
      handleSureReimbursement() {
        this.$axios.post(this.$store.state.baseUrl + '/UserClaimFormList?java', {
          page: 1,
          pageNum: 10,
          flag: 1
        }).then((res) => {
          console.log('是否有需要确认的报销单');
          console.log(res);
          if (res.data.lists.length !== 0) {
            this.whether = 1;
          } else {
            this.whether = 0;
          }
        }).catch((err) => {
          console.log(err);
        })
      },
      sumCom() {
        this.handleSureReimbursement();
        this.$emit('reimListen', this.whether);
      },
      // 获取消费列表
      handleReimburseList() {
        this.reimburseList = [];
        this.total = 0;
        this.hintMsg = '数据加载中...';
        this.$axios.post(this.$store.state.baseUrl + '/ReimburseList?java', {
          page: this.page,
          pageNum: this.pageNum,
          keyword: this.keyword,
          type: this.typeList.length > 1 ? 3 : (this.typeList[0] == '行程报销' ? 1 : 2),
          startTime: this.startTime,
          endTime: this.endTime,
        }).then((res) => {
          console.log('消费列表');
          console.log(res);
          this.reimburseList = res.data.lists;
          this.total = res.data.total;
          if (this.reimburseList.length == 0) {
            this.hintMsg = '啊哦~ 暂无数据';
          };
          // this.dialogFiltrateVisible = false;
        }).catch((err) => {
          console.log(err);
        })
      },
      // 筛选我的消费列表
      filtrateMsg() {
        this.dialogFiltrateVisible = true;
        // this.typeList = [];
        // this.startTime = '';
        // this.endTime = '';
        // this.page = 1;
      },
      // 确定筛选条件
      filtrateMsgSure() {
        console.log(this.typeList);
        this.page = 1;
        this.typeList = this.typeList;
        this.startTime = this.startTime;
        this.endTime = this.endTime;
        this.handleReimburseList();
        // this.dialogFiltrateVisible = false;
      },
      // 模糊搜索我的消费列表
      stockInSearch() {
        this.handleReimburseList();
      },

      // 修改查看我的消费单
      updateReimburse(type, flag, id) {
        console.log('修改');
        this.updateFlag = null;
        this.updateType = type;
        this.updateFlag = flag;
        this.updateId = id;
        console.log(this.updateType, this.updateId);
        this.notType = '';
        this.notTime = '';
        this.notEstimateMoney = '';
        this.notCurrency = '';
        this.notRemark = '';

        this.imgurls = [];

        this.name = '';
        this.startTime2 = [];
        this.des = '';
        this.type = '';
        this.records = [];
        this.sum = 0;
        this.currency = '';
        if (this.updateType == 0) {
          if (this.updateFlag < 2) {
            this.reimbursementSel.select = 2;
          } else if (this.updateFlag == 2) {
            this.reimbursementSel.select = 3;
          } else if (this.updateFlag > 2) {
            this.reimbursementSel.select = 4;
          }
          this.$axios.post(this.$store.state.baseUrl + '/TripInfo?java', {
            id: this.updateId
          }).then((res) => {
            console.log('行程详细信息');
            console.log(res);
            this.journeyInfo = res.data;
            this.name = res.data.name;
            this.startTime2.push(res.data.startTime);
            this.startTime2.push(res.data.endTime);
            this.des = res.data.des;
            this.sysCheckMoney = res.data.sysCheckMoney;
            this.records = res.data.recordList;
            for (let item of this.records) {
              console.log(item.estimateMoney);
              this.sum += Number(item.estimateMoney);
              console.log(this.sum);
              this.currency = item.currency;
            };
            (function smoothscroll() {
              var currentScroll =
                document.documentElement.scrollTop || document.body.scrollTop;
              if (currentScroll > 0) {
                window.requestAnimationFrame(smoothscroll);
                window.scrollTo(0, currentScroll - currentScroll / 5);
              }
            })();
          })
        } else if (this.updateType == 1) {
          if (this.updateFlag < 2) {
            this.dialogUpdateReimburseVisible = true;
          } else if (this.updateFlag == 2) {
            this.dialogUnReimDetailsVisible = true;
          } else if (this.updateFlag > 2) {
            this.dialogUnReimbursementVisible = true;
          }

          this.$axios.post(this.$store.state.baseUrl + '/RecordInfo?java', {
            id: this.updateId
          }).then((res) => {
            console.log('非行程消费记录详细信息');
            console.log(res);
            this.unJourneyInfo = res.data;
            this.notType = res.data.type;
            this.notTime = res.data.time;
            this.notEstimateMoney = res.data.estimateMoney;
            this.notCurrency = res.data.currency;
            if (res.data.billPics !== '') {
              if (res.data.billPics.indexOf('|') !== -1) {
                this.imgurls = res.data.billPics.split('|');
              } else {
                this.imgurls.push(res.data.billPics);
              }
            } else {
              this.imgurls = [];
            }

            this.notRemark = res.data.remark;
          })
        }
      },
      // 查看行程信息记录详情
      recordDetails(every) {
        this.recordDetailsMsg = every;
        console.log(this.recordDetailsMsg);
        this.imgurls = [];
        if (this.recordDetailsMsg.billPics !== null && this.recordDetailsMsg.billPics !== '') {
          if (this.recordDetailsMsg.billPics.indexOf('|') !== -1) {
            this.imgurls = this.recordDetailsMsg.billPics.split('|');
          } else {
            this.imgurls.push(this.recordDetailsMsg.billPics);
          }
        } else {
          this.imgurls = [];
        };
        this.dialogRecordDetailsVisible = true;
      },
      // 确定修改行程信息
      updateJourneySure() {
        console.log(this.startTime2);
        if (this.name !== '' && this.startTime2.length !== 0 && this.des !== '') {
          this.$axios.post(this.$store.state.baseUrl + '/TripSave?java', {
            id: this.updateId,
            name: this.name,
            startTime: this.startTime2[0],
            endTime: this.startTime2[1],
            des: this.des,
            records: this.records
          }).then((res) => {
            console.log('修改行程信息');
            console.log(res);
            this.$message.success({
              message: '修改行程消费成功',
              showClose: true,
              duration: 2000
            });
            this.reimbursementSel.select = 0;
            this.handleReimburseList();
          }).catch((err) => {
            console.log(err);
            this.$message.error({
              message: err.message,
              showClose: true,
              duration: 2000
            });
            this.reimbursementSel.select = 0;
            this.handleReimburseList();
          })
        } else {
          this.$message.error({
            message: '数据不能为空，请检查数据填写',
            showClose: true,
            duration: 2000
          });
        }
      },
      // 结束行程
      finishTrip() {
        if (this.records.length == 0) {
          this.$message.error({
            message: '消费记录为空不可结束行程，请添加消费记录',
            showClose: true,
            duration: 2000
          })
        } else {
          this.dialogFinishTripVisible = true;
        }
      },
      // 确定结束行程
      finishTripSure() {
        this.$axios.post(this.$store.state.baseUrl + '/CheckTrip?java', {
          id: this.updateId
        }).then((res) => {
          console.log('结束行程');
          console.log(res);
          this.$message.success({
            message: '结束行程成功',
            showClose: true,
            duration: 2000
          });
          this.dialogFinishTripVisible = false;
          this.reimbursementSel.select = 0;
          this.handleReimburseList();
        }).catch((err) => {
          console.log(err);
          this.$message.success({
            message: err.message,
            showClose: true,
            duration: 2000
          });
          this.dialogFinishTripVisible = false;
          this.reimbursementSel.select = 0;
          this.handleReimburseList();
        })
      },
      // 确定修改非行程信息
      updateReimburseSure() {
        if (this.notType == '' || this.notTime == '' || this.notEstimateMoney == '' || this.notCurrency == '' || this
          .notRemark == '') {
          this.$message.error({
            message: '数据不能为空，请检查数据填写',
            showClose: true,
            duration: 2000
          })
        } else {
          this.$axios.post(this.$store.state.baseUrl + '/RecordSave?java', {
            id: this.updateId,
            type: this.notType,
            time: this.notTime,
            estimateMoney: this.notEstimateMoney,
            currency: this.notCurrency,
            billPics: this.imgurls.join('|'),
            remark: this.notRemark
          }).then((res) => {
            console.log('修改非行程记录');
            console.log(res);
            this.$message.success({
              message: '修改非行程记录成功',
              showClose: true,
              duration: 2000
            });
            this.dialogUpdateReimburseVisible = false;
            this.handleReimburseList();
          }).catch((err) => {
            console.log(err);
            this.$message.error({
              message: err.message,
              showClose: true,
              duration: 2000
            });
            this.dialogUpdateReimburseVisible = false;
          })
        }
      },
      // 删除消费单
      deleteReimburse(type, id, flag) {
        this.deleteType = '';
        this.deleteId = '';
        this.flag = '';
        this.deleteType = type;
        this.deleteId = id;
        this.flag = flag;
        console.log(this.deleteType);
        console.log(this.deleteId);
        console.log(this.flag);
        // if (this.deleteType == 0 && this.flag !== 0) {
        //   this.$message.error({
        //     message: '该行程已结束，不可删除',
        //     showClose: true,
        //     duration: 2000
        //   })
        // } else {
        //   this.dialogDeleteReimVisible = true;
        // }
        if (this.flag > 1) {
          this.$message.error({
            message: '该消费已提交为报销单，不可删除',
            showClose: true,
            duration: 2000
          })
        } else {
          this.dialogDeleteReimVisible = true;
        }
      },
      // 确定删除
      deleteReimburseSure() {
        if (this.deleteType == 1) {
          this.$axios.post(this.$store.state.baseUrl + '/DelRecord?java', {
            id: this.deleteId
          }).then((res) => {
            console.log('删除消费单');
            console.log(res);
            this.$message.success({
              message: '删除消费单成功',
              showClose: true,
              duration: 2000
            });
            this.dialogDeleteReimVisible = false;
            this.handleReimburseList();
          }).catch((err) => {
            console.log(err);
            this.$message.error({
              message: err.message,
              showClose: true,
              duration: 2000
            });
          })
        } else if (this.deleteType == 0) {
          this.$axios.post(this.$store.state.baseUrl + '/DelTrip?java', {
            id: this.deleteId
          }).then((res) => {
            console.log('删除消费单');
            console.log(res);
            this.$message.success({
              message: '删除消费单成功',
              showClose: true,
              duration: 2000
            });
            this.dialogDeleteReimVisible = false;
            this.handleReimburseList();
          }).catch((err) => {
            console.log(err);
            this.$message.error({
              message: err.message,
              showClose: true,
              duration: 2000
            });
          })
        }
      },
      // 返回列表页
      gobackList() {
        this.reimbursementSel.select = 0;
        // this.handleReimburseList();
      },
      // 新增行程
      addJourney() {
        this.reimbursementSel.select = 1;
        this.name = '';
        this.startTime2 = '';
        this.des = '';
        this.type = '';
        this.sum = '';
        this.records = [];
      },
      // 增加记录
      addRecord() {
        this.time = '';
        this.estimateMoney = '';
        this.imgurls = [];
        this.remark = '';
        if (this.type == '') {
          this.$message.error({
            message: '请选择消费类型',
            showClose: true,
            duration: 2000
          })
        } else {
          this.dialogAddRecordVisible = true;
        }
      },
      // 上传图片
      inputChange(e) {
        let file = e.target.files[0];
        let that = this;
        if (file === undefined) {
          return
        }
        if (file.size / 1024 > 1025) { // 文件大于1M（根据需求更改），进行压缩上传
          this.photoCompress(file, { // 调用压缩图片方法
            quality: 0.7
          }, function (base64Codes) {
            // console.log("压缩后：" + base.length / 1024 + " " + base);
            let bl = that.base64UrlToBlob(base64Codes)
            // file.append('file', bl, 'file_' + Date.parse(new Date()) + '.jpg') // 文件对象
            that.uploadLice(bl) // 请求图片上传接口
          })
        } else { // 小于等于1M 原图上传
          this.uploadLice(file)
        }
      },

      // base64 转 Blob 格式 和file格式
      base64UrlToBlob(urlData) {
        let arr = urlData.split(','),
          mime = arr[0].match(/:(.*?);/)[1], // 去掉url的头，并转化为byte
          bstr = atob(arr[1]), // 处理异常,将ascii码小于0的转换为大于0
          n = bstr.length,
          u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        // 转blob
        // return new Blob([u8arr], {type: mime})
        let filename = Date.parse(new Date()) + '.jpg'
        // 转file
        return new File([u8arr], filename, {
          type: mime
        })
      },
      /*压缩图片
      file：文件(类型是图片格式)，
      obj：文件压缩后对象width， height， quality(0-1)
      callback：容器或者回调函数
      */
      photoCompress(file, obj, callback) {
        let that = this
        let ready = new FileReader()
        /* 开始读取指定File对象中的内容. 读取操作完成时,返回一个URL格式的字符串. */
        ready.readAsDataURL(file)
        ready.onload = function () {
          let re = this.result
          that.canvasDataURL(re, obj, callback) // 开始压缩
        }
      },
      /* 利用canvas数据化图片进行压缩 */
      /* 图片转base64 */
      canvasDataURL(path, obj, callback) {
        let img = new Image()
        img.src = path
        img.onload = function () {
          let that = this // 指到img
          // 默认按比例压缩
          let w = that.width,
            h = that.height,
            scale = w / h
          w = obj.width || w
          h = obj.height || (w / scale)
          let quality = 0.7 // 默认图片质量为0.7
          // 生成canvas
          let canvas = document.createElement('canvas')
          let ctx = canvas.getContext('2d')

          // 创建属性节点
          let anw = document.createAttribute('width')
          anw.nodeValue = w
          let anh = document.createAttribute('height')
          anh.nodeValue = h
          canvas.setAttributeNode(anw)
          canvas.setAttributeNode(anh)
          // 铺底色
          ctx.fillStyle = "#fff";
          ctx.fillRect(0, 0, w, h);
          ctx.drawImage(that, 0, 0, w, h)

          // 图像质量
          if (obj.quality && obj.quality >= 1 && obj.quality < 0) {
            quality = obj.quality
          }
          // quality值越小，所绘制出的图像越模糊
          let base64 = canvas.toDataURL('image/jpeg', quality)
          // 回调函数返回base64的值
          callback(base64)
        }
      },
      //  返回file文件，调用接口执行上传
      uploadLice(file) {
        console.log(file)
        let formdata1 = new FormData(); //创建form对象
        formdata1.append("img", file); //通过append向form对象添加数据
        this.uploadImg(formdata1);
      },
      uploadImg(formdata) {
        this.$axios
          .post(this.$store.state.baseUrl + "/imgrecv", formdata)
          .then(res => {
            if (res.status == 200) {
              this.$message.success({
                message: "图片上传成功",
                showClose: true,
                duration: 2000
              });
            }
            console.log(res);
            let imgurl = res.data.imgurl;
            if (this.imgurls.indexOf(imgurl) == -1) {
              this.imgurls.push(imgurl);
            }
          })
          .catch(err => {
            console.log(err);
            this.$message.error({
              message: err.message,
              showClose: true,
              duration: 2000
            });
          });
      },
      // 删除图片
      delImage(index) {
        this.imgurls.splice(index, 1);
      },
      // 确定增加行程记录
      addRecordSure() {
        if (this.time !== '' && this.estimateMoney !== '' && this.currency !== '' && this.remark !== '') {
          this.records.push({
            type: this.type,
            time: this.time,
            estimateMoney: this.estimateMoney,
            currency: this.currency,
            billPics: this.imgurls.join("|"),
            remark: this.remark
          });
          console.log(this.records);
          this.dialogAddRecordVisible = false;
          this.sum = 0;
          for (let item of this.records) {
            this.sum += Number(item.estimateMoney);
          };
          this.type = '';
        } else {
          this.$message.error({
            message: '数据不能为空，请检查数据填写',
            showClose: true,
            duration: 2000
          });
        }
      },
      // 修改记录
      updateRecord(record, index) {
        this.dialogUpdateRecordVisible = true;
        this.updateIndex = index;
        this.updateType = '';
        this.time = '';
        this.estimateMoney = '';
        this.currency = '';
        this.imgurls = [];
        this.remark = '';
        console.log(record);
        if (record.id) {
          this.recordId = record.id;
        } else {
          this.recordId = '';
        }

        this.updateType = record.type;
        this.time = record.time;
        this.estimateMoney = record.estimateMoney;
        this.currency = record.currency;
        if (record.billPics !== '') {
          if (record.billPics.indexOf('|') !== -1) {
            this.imgurls = record.billPics.split('|');
          } else {
            this.imgurls.push(record.billPics);
          }
        } else {
          this.imgurls = [];
        };
        this.remark = record.remark;
      },
      // 确定修改记录
      updateRecordSure() {
        console.log(this.type);
        if (this.time !== '' && this.estimateMoney !== '' && this.currency !== '' && this.remark !== '') {
          if (this.recordId !== '') {
            this.records.splice(this.updateIndex, 1, {
              id: this.recordId,
              type: this.updateType,
              time: this.time,
              estimateMoney: this.estimateMoney,
              currency: this.currency,
              billPics: this.imgurls.join("|"),
              remark: this.remark
            });
          } else {
            this.records.splice(this.updateIndex, 1, {
              type: this.updateType,
              time: this.time,
              estimateMoney: this.estimateMoney,
              currency: this.currency,
              billPics: this.imgurls.join("|"),
              remark: this.remark
            });
          }
          console.log(this.records);
          this.dialogUpdateRecordVisible = false;
          this.sum = 0;
          for (let item of this.records) {
            this.sum += Number(item.estimateMoney);
          };
          this.$message.success({
            message: '修改记录成功',
            showClose: true,
            duration: 2000
          })
        } else {
          this.$message.error({
            message: '数据不能为空，请检查数据填写',
            showClose: true,
            duration: 2000
          })
        }
      },
      // 删除记录
      deleteRecord(id, index) {
        this.dialogDelRecordVisible = true;
        this.deleteRecordId = id;
        this.deleteIndex = index;
        console.log('记录删除');
        console.log(this.deleteRecordId);
      },
      // 确定删除记录
      deleteRecordSure() {
        this.records.splice(this.deleteIndex, 1);
        this.dialogDelRecordVisible = false;
        // if (this.deleteRecordId !== undefined) {
        //   this.$axios.post(this.$store.state.baseUrl + '/DelRecord?java', {
        //     id: this.deleteRecordId
        //   }).then(res => {
        //     console.log('删除记录');
        //     console.log(res);
        //     this.$message.success({
        //       message: '删除记录成功',
        //       showClose: true,
        //       duration: 2000
        //     });
        //     this.records.splice(this.deleteIndex, 1);
        //     this.dialogDelRecordVisible = false;
        //   }).catch(err => {
        //     console.log(err);
        //     this.$message.error({
        //       message: res.message,
        //       showClose: true,
        //       duration: 2000
        //     });
        //   })
        // } else {
        //   this.records.splice(this.deleteIndex, 1);
        //   this.dialogDelRecordVisible = false;
        // }
      },
      // 确定增加行程
      addJourneySure() {
        console.log(this.startTime2);
        console.log(this.type);
        //  && this.records.length !== 0
        if (this.name !== '' && this.startTime2.length !== 0 && this.des !== '') {
          const loading = this.$loading({
            lock: true,
            text: '数据提交中...',
            spinner: 'el-icon-loading',
            background: 'rgba(0, 0, 0, 0.7)'
          });
          this.$axios.post(this.$store.state.baseUrl + '/TripSave?java', {
            name: this.name,
            startTime: this.startTime2[0],
            endTime: this.startTime2[1],
            des: this.des,
            records: this.records
          }).then((res) => {
            console.log('新增行程消费');
            console.log(res);
            loading.close();
            this.$message.success({
              message: '新增行程消费成功',
              showClose: true,
              duration: 2000
            });
            this.reimbursementSel.select = 0;
            this.handleReimburseList();
          }).catch((err) => {
            console.log(err);
            this.$message.error({
              message: err.message,
              showClose: true,
              duration: 2000
            });
            this.reimbursementSel.select = 0;
            this.handleReimburseList();
          })
        } else {
          this.$message.error({
            message: '数据不能为空，请检查数据填写',
            showClose: true,
            duration: 2000
          });
        }
      },
      // 新增非行程消费
      addNotJourney() {
        this.notType = '';
        this.notTime = '';
        this.notEstimateMoney = '';
        this.imgurls = [];
        this.notRemark = '';
        this.dialogNotJourneyVisible = true;
      },
      // 确定增加非行程
      addNotJourneySure() {
        console.log(this.notType);
        console.log(this.notTime);
        console.log(this.notEstimateMoney);
        console.log(this.notCurrency);
        console.log(this.notRemark);
        if (this.notType == '' || this.notTime == '' || this.notEstimateMoney == '' || this.notCurrency == '' || this
          .notRemark == '') {
          this.$message.error({
            message: '数据不能为空，请检查数据填写',
            showClose: true,
            duration: 2000
          })
        } else {
          this.$axios.post(this.$store.state.baseUrl + '/RecordSave?java', {
            type: this.notType,
            time: this.notTime,
            estimateMoney: this.notEstimateMoney,
            currency: this.notCurrency,
            billPics: this.imgurls.join('|'),
            remark: this.notRemark
          }).then((res) => {
            console.log('增加非行程消费');
            console.log(res);
            this.$message.success({
              message: '新增非行程消费成功',
              showClose: true,
              duration: 2000
            });
            this.dialogNotJourneyVisible = false;
            this.handleReimburseList();
          }).catch((err) => {
            console.log(err);
            this.$message.error({
              message: err.message,
              showClose: true,
              duration: 2000
            });
            this.dialogNotJourneyVisible = false;
          })
        }
      },
      // 获取所有币种
      handleCountryGet() {
        this.$axios.post(this.$store.state.baseUrl + '/CountryGet?java').then((res) => {
          console.log('获取所有币种');
          console.log(res);
          for (let item of res.data) {
            if (this.currencyList.indexOf(item.enCurrency) == -1) {
              this.currencyList.push(item.enCurrency);
            }
          };
          console.log(this.currencyList);
        }).catch((err) => {
          console.log(err);
        })
      },
      // 分页
      handleCurrentChange(val) {
        console.log(`当前页: ${val}`);
        this.page = val;
        this.handleReimburseList();
        (function smoothscroll() {
          var currentScroll =
            document.documentElement.scrollTop || document.body.scrollTop;
          if (currentScroll > 0) {
            window.requestAnimationFrame(smoothscroll);
            window.scrollTo(0, currentScroll - currentScroll / 5);
          }
        })();
      },
    },
  }
</script>
<style lang="scss" scoped>
  .reimbursement-container {
    width: 95%;
    margin: 0 auto;
    margin-top: -15px;

    .reimbursement-container-top {
      width: 100%;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;

      .queryBtn {
        width: 20%;
        margin: 30px 0;
      }
    }

    .reimbursement-container-center {
      // width: 100%;
      height: 80px;
      line-height: 80px;
      padding: 5px;
      display: flex;
      justify-content: space-around;
      border: 1px solid #ddd;
      border-radius: 10px;
    }

    .reimburse-list-table {
      width: 100%;
      background-color: #fff;
      margin-top: 20px;
      margin-bottom: 10px;
      padding: 30px;
      border-radius: 30px;
    }

    .back-img {
      width: 75px;
      height: 45px;
      margin: 20px 0;
      line-height: 45px;
      display: flex;
      justify-content: space-between;
      cursor: pointer;

      div {
        margin-top: 5px;

        img {
          width: 30px;
          height: 25px;
        }
      }

      .font {
        font-size: 17px;
      }
    }

    .add-container {
      // width: 90%;
      // margin: 0 auto;
      background-color: #fff;
      border-radius: 30px;
      padding: 40px;

      .add-second {
        width: 72%;
        height: 80px;
        line-height: 80px;
        padding: 10px;
        display: flex;
        justify-content: space-between;
        border: 1px solid #ddd;
        border-radius: 10px;
      }

      .upload-imgs {
        width: 100%;
        margin-bottom: 10px;
        position: relative;
        display: flex;

        .add {
          width: 100px;
          height: 100px;
          position: relative;
          border: 1px solid #ddd;
          border-radius: 5px;
          display: flex;

          .addIcon {
            width: 50px;
            height: 50px;
            position: absolute;
            top: 45%;
            left: 45%;
            z-index: 1;
          }

          .inputUpload {
            position: absolute;
            display: block;
            width: 100px;
            height: 100px;
            opacity: 0;
            cursor: pointer;
            z-index: 999;
          }
        }

        .spanStyle {
          width: 15px;
          height: 15px;
          position: absolute;
          top: 1px;
          right: 1px;
          text-align: center;
          line-height: 0.7;
          background-color: rgb(221, 221, 221);
          color: rgb(255, 255, 255);
          border: 1px solid rgb(221, 221, 221);
          border-radius: 50%;
          z-index: 999;
          cursor: pointer;
        }

        .previewImg {
          display: flex;
          z-index: 1;
        }
      }
    }

    .not-type {
      width: 75%;
      margin: 0 auto;
      padding: 10px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
      border-radius: 10px;
    }
  }

  .flagTable {
    padding: 40px;
    border-radius: 30px;
    background-color: #fff;
  }

  td {
    height: 60px;
    margin: 10px 0;
    padding: 20px 0;
    background-color: #f3fbf9;
    font-size: 15px;
    text-align: center;
  }

  .addBtn {
    width: 20%;
  }

  .input-style {
    width: 70% !important;
  }

  table {
    width: 100%;
    table-layout: fixed;
    border-collapse: separate;
    border-spacing: 0;

    tr {

      th,
      td {
        width: 25%;
        text-align: center;
        border: 0;
      }
    }
  }
</style>
<style lang="scss">
  #reimbursement {
    .el-tabs__item {
      font-size: 16px !important;
      padding-right: 100px !important;
    }

    .el-radio-button {
      margin-right: 10px;
    }

    .el-radio-button__inner {
      border-left: 1px solid #dcdfe6 !important;
      border-radius: 5px !important;
    }

    .el-form-item__content {
      display: flex;
    }

    .el-tabs__header {
      z-index: 0;
    }

    .el-checkbox__label {
      font-size: 15px;
    }

    .el-checkbox__inner {
      z-index: 0;
    }
  }
</style>