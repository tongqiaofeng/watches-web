{"remainingRequest":"D:\\aa-tong\\upgrade\\up-watches\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\aa-tong\\upgrade\\up-watches\\src\\components\\purch\\Tip-page.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\aa-tong\\upgrade\\up-watches\\src\\components\\purch\\Tip-page.vue","mtime":1585714278030},{"path":"D:\\aa-tong\\upgrade\\up-watches\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\aa-tong\\upgrade\\up-watches\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\upgrade\\up-watches\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnV5X2ZlZVN0YXRlOiB0cnVlLCAvLyDmmK/lkKbmnInlsI/otLkKICAgICAgYnV5X2ZlZXRpbWU6IG5ldyBEYXRlKCksIC8vIOWwj+i0ueaXtumXtAogICAgICBidXlfZmVlbW9uZXk6ICIiLCAvLyDlsI/otLnph5Hpop0KICAgICAgYnV5X2ZlZWN1cnJlbmN5OiAiIiwgLy8g5bCP6LS56YeR6aKd5biB56eNCiAgICAgIGJ1eV9mZWVub3RlOiAiIiAvLyDlsI/otLnlpIfms6gKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5hY3F1aXJlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhY3F1aXJlKCkgewogICAgICB0aGlzLiRheGlvcwogICAgICAgIC5wb3N0KHRoaXMuJHN0b3JlLnN0YXRlLmJhc2VVcmwgKyAiL0J1eU9yZGVyR2V0IiwgewogICAgICAgICAgYnV5X2lkOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJidXlfaWQiKQogICAgICAgIH0pCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgcmVzLmRhdGEud2F0Y2gpIHsKICAgICAgICAgICAgdGhpcy5idXlfZmVlY3VycmVuY3kgPSBpdGVtLmJ1eV93YXRjaGN1cnJlbmN5OwogICAgICAgICAgfTsKICAgICAgICAgIGlmIChyZXMuZGF0YS5mZWUuYnV5X2ZlZVN0YXRlID09IC0xKSB7CiAgICAgICAgICAgIHRoaXMuYnV5X2ZlZVN0YXRlID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLmZlZS5idXlfZmVlU3RhdGUgPT0gMCB8fCByZXMuZGF0YS5mZWUuYnV5X2ZlZVN0YXRlID09IDEpIHsKICAgICAgICAgICAgdGhpcy5idXlfZmVlU3RhdGUgPSB0cnVlOwogICAgICAgICAgICB0aGlzLmJ1eV9mZWV0aW1lID0gcmVzLmRhdGEuZmVlLmJ1eV9mZWV0aW1lOwogICAgICAgICAgICB0aGlzLmJ1eV9mZWVtb25leSA9IHJlcy5kYXRhLmZlZS5idXlfZmVlbW9uZXk7CiAgICAgICAgICAgIHRoaXMuYnV5X2ZlZW5vdGUgPSByZXMuZGF0YS5mZWUuYnV5X2ZlZW5vdGU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8g5L+d5a2Y5o+Q5Lqk5bCP6LS55L+h5oGvCiAgICBzdWJtaXRUaXAoKSB7CiAgICAgIHRoaXMuJGF4aW9zCiAgICAgICAgLnBvc3QodGhpcy4kc3RvcmUuc3RhdGUuYmFzZVVybCArICIvQnV5RmVlU2F2ZSIsIHsKICAgICAgICAgIGJ1eV9pZDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYnV5X2lkIiksCiAgICAgICAgICBidXlfZmVlU3RhdGU6IHRoaXMuYnV5X2ZlZVN0YXRlID09IHRydWUgPyAxIDogLTEsCiAgICAgICAgICBidXlfZmVldGltZTogdGhpcy5idXlfZmVlU3RhdGUgPT0gdHJ1ZSA/IHRoaXMuc2hlbGxEYXRlKHRoaXMuYnV5X2ZlZXRpbWUpIDogIiIsCiAgICAgICAgICBidXlfZmVlbW9uZXk6IHRoaXMuYnV5X2ZlZVN0YXRlID09IHRydWUgPyB0aGlzLmJ1eV9mZWVtb25leSA6ICIiLAogICAgICAgICAgYnV5X2ZlZWN1cnJlbmN5OiB0aGlzLmJ1eV9mZWVTdGF0ZSA9PSB0cnVlID8gdGhpcy5idXlfZmVlY3VycmVuY3kgOiAiIiwKICAgICAgICAgIGJ1eV9mZWVub3RlOiB0aGlzLmJ1eV9mZWVTdGF0ZSA9PSB0cnVlID8gdGhpcy5idXlfZmVlbm90ZSA6ICIiCiAgICAgICAgfSkKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2coIuWwj+i0ueS/oeaBr+aPkOS6pOaIkOWKnyIpOwogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIHRoaXMuJGVtaXQoImxpc3RlblRpcCIsIHJlcy5kYXRhLmJ1eV9mZWVTdGF0ZSk7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoewogICAgICAgICAgICBtZXNzYWdlOiAi5bCP6LS55L+h5oGv5L+d5a2Y5oiQ5YqfIiwKICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgfSk7CiAgICAgICAgICAvLyDpobXpnaLlm57liLDpobbpg6gKICAgICAgICAgIChmdW5jdGlvbiBzbW9vdGhzY3JvbGwoKSB7CiAgICAgICAgICAgIHZhciBjdXJyZW50U2Nyb2xsID0KICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgICBpZiAoY3VycmVudFNjcm9sbCA+IDApIHsKICAgICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNtb290aHNjcm9sbCk7CiAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIGN1cnJlbnRTY3JvbGwgLSBjdXJyZW50U2Nyb2xsIC8gNSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHsKICAgICAgICAgICAgbWVzc2FnZTogZXJyLmRhdGEubWVzc2FnZSwKICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9CiAgfQp9OwoK"},{"version":3,"sources":["Tip-page.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Tip-page.vue","sourceRoot":"src/components/purch","sourcesContent":["<template>\r\n  <div class=\"tip-container\">\r\n    <div class=\"drawback-top\">\r\n      <div class=\"top-form\">\r\n        <span class=\"top-span\">是否有小费</span>\r\n        <el-switch v-model=\"buy_feeState\" active-color=\"#13ce66\" inactive-color=\"#ff4949\"></el-switch>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"buy_feeState == true\" class=\"tip-center\">\r\n      <el-form label-width=\"10%\">\r\n        <el-form-item label=\"小费日期\">\r\n          <el-date-picker v-model=\"buy_feetime\" type=\"date\" class=\"input-style\"></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"小费金额\">\r\n          <el-input v-model=\"buy_feemoney\" class=\"input-style\">\r\n            <i slot=\"suffix\" style=\"color: #000;margin-right:5%;font-style:normal;\">{{buy_feecurrency}}</i>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"备注\">\r\n          <el-input type=\"textarea\" :autosize=\"{ minRows: 6}\" placeholder=\"请输入备注内容\" v-model=\"buy_feenote\"\r\n            class=\"input-style\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <div class=\"drawback-submit\">\r\n      <img src=\"../../assets/imgs/save.png\" @click=\"submitTip\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        buy_feeState: true, // 是否有小费\r\n        buy_feetime: new Date(), // 小费时间\r\n        buy_feemoney: \"\", // 小费金额\r\n        buy_feecurrency: \"\", // 小费金额币种\r\n        buy_feenote: \"\" // 小费备注\r\n      };\r\n    },\r\n    created() {\r\n      this.acquire();\r\n    },\r\n    methods: {\r\n      acquire() {\r\n        this.$axios\r\n          .post(this.$store.state.baseUrl + \"/BuyOrderGet\", {\r\n            buy_id: sessionStorage.getItem(\"buy_id\")\r\n          })\r\n          .then(res => {\r\n            for (let item of res.data.watch) {\r\n              this.buy_feecurrency = item.buy_watchcurrency;\r\n            };\r\n            if (res.data.fee.buy_feeState == -1) {\r\n              this.buy_feeState = false;\r\n            } else if (res.data.fee.buy_feeState == 0 || res.data.fee.buy_feeState == 1) {\r\n              this.buy_feeState = true;\r\n              this.buy_feetime = res.data.fee.buy_feetime;\r\n              this.buy_feemoney = res.data.fee.buy_feemoney;\r\n              this.buy_feenote = res.data.fee.buy_feenote;\r\n            }\r\n          });\r\n      },\r\n      // 保存提交小费信息\r\n      submitTip() {\r\n        this.$axios\r\n          .post(this.$store.state.baseUrl + \"/BuyFeeSave\", {\r\n            buy_id: sessionStorage.getItem(\"buy_id\"),\r\n            buy_feeState: this.buy_feeState == true ? 1 : -1,\r\n            buy_feetime: this.buy_feeState == true ? this.shellDate(this.buy_feetime) : \"\",\r\n            buy_feemoney: this.buy_feeState == true ? this.buy_feemoney : \"\",\r\n            buy_feecurrency: this.buy_feeState == true ? this.buy_feecurrency : \"\",\r\n            buy_feenote: this.buy_feeState == true ? this.buy_feenote : \"\"\r\n          })\r\n          .then(res => {\r\n            console.log(\"小费信息提交成功\");\r\n            console.log(res);\r\n            this.$emit(\"listenTip\", res.data.buy_feeState);\r\n            this.$message.success({\r\n              message: \"小费信息保存成功\",\r\n              showClose: true,\r\n              duration: 2000\r\n            });\r\n            // 页面回到顶部\r\n            (function smoothscroll() {\r\n              var currentScroll =\r\n                document.documentElement.scrollTop || document.body.scrollTop;\r\n              if (currentScroll > 0) {\r\n                window.requestAnimationFrame(smoothscroll);\r\n                window.scrollTo(0, currentScroll - currentScroll / 5);\r\n              }\r\n            })();\r\n          })\r\n          .catch(err => {\r\n            console.log(err);\r\n            this.$message.error({\r\n              message: err.data.message,\r\n              showClose: true,\r\n              duration: 2000\r\n            });\r\n          });\r\n      }\r\n    }\r\n  };\r\n\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .tip-container {\r\n    width: 100%;\r\n\r\n    .drawback-top {\r\n      width: 100%;\r\n\r\n      @media screen and (min-width: 1401px) {\r\n        .top-form {\r\n          width: 25%;\r\n        }\r\n      }\r\n\r\n      @media screen and (max-width: 1400px) {\r\n        .top-form {\r\n          width: 40%;\r\n        }\r\n      }\r\n\r\n      .top-form {\r\n        height: 80px;\r\n        padding-left: 40px;\r\n        line-height: 80px;\r\n        background-color: #fff;\r\n        border-radius: 30px;\r\n\r\n        .top-span {\r\n          margin-right: 30%;\r\n          font-size: 23px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .tip-center {\r\n      width: 100%;\r\n      margin: 40px 0;\r\n      padding: 40px 0;\r\n      background-color: #fff;\r\n      border-radius: 30px;\r\n\r\n      .input-style {\r\n        width: 50% !important;\r\n      }\r\n    }\r\n\r\n    .drawback-submit {\r\n      width: 100%;\r\n      margin-top: 30px;\r\n      text-align: right;\r\n\r\n      img {\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n\r\n</style>\r\n<style lang=\"scss\">\r\n  .el-form-item__label {\r\n    font-size: 16px;\r\n  }\r\n\r\n</style>\r\n"]}]}