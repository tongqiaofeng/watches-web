{"remainingRequest":"D:\\aa-tong\\my-projects\\copy\\watches-three\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\aa-tong\\my-projects\\copy\\watches-three\\src\\components\\purch\\Tip-page.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\aa-tong\\my-projects\\copy\\watches-three\\src\\components\\purch\\Tip-page.vue","mtime":1594785186597},{"path":"D:\\aa-tong\\my-projects\\copy\\watches-three\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\copy\\watches-three\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\copy\\watches-three\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\copy\\watches-three\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnV5X2ZlZVN0YXRlOiB0cnVlLCAvLyDmmK/lkKbmnInlsI/otLkKICAgICAgYnV5X2ZlZVRpbWU6IG5ldyBEYXRlKCksIC8vIOWwj+i0ueaXtumXtAogICAgICBidXlfZmVlTW9uZXk6ICIiLCAvLyDlsI/otLnph5Hpop0KICAgICAgYnV5X2ZlZUN1cnJlbmN5OiAiIiwgLy8g5bCP6LS56YeR6aKd5biB56eNCiAgICAgIGJ1eV9mZWVOb3RlOiAiIiAvLyDlsI/otLnlpIfms6gKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5hY3F1aXJlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhY3F1aXJlKCkgewogICAgICB0aGlzLiRheGlvcwogICAgICAgIC5wb3N0KHRoaXMuJHN0b3JlLnN0YXRlLmJhc2VVcmwgKyAiL0J1eU9yZGVyR2V0P2phdmEiLCB7CiAgICAgICAgICBidXlfaWQ6IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImJ1eV9pZCIpCiAgICAgICAgfSkKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiByZXMuZGF0YS53YXRjaCkgewogICAgICAgICAgICB0aGlzLmJ1eV9mZWVDdXJyZW5jeSA9IGl0ZW0uYnV5X3dhdGNoQ3VycmVuY3k7CiAgICAgICAgICB9OwogICAgICAgICAgaWYgKHJlcy5kYXRhLmZlZS5idXlfZmVlU3RhdGUgPT0gLTEpIHsKICAgICAgICAgICAgdGhpcy5idXlfZmVlU3RhdGUgPSBmYWxzZTsKICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmRhdGEuZmVlLmJ1eV9mZWVTdGF0ZSA9PSAwIHx8IHJlcy5kYXRhLmZlZS5idXlfZmVlU3RhdGUgPT0gMSkgewogICAgICAgICAgICB0aGlzLmJ1eV9mZWVTdGF0ZSA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuYnV5X2ZlZVRpbWUgPSByZXMuZGF0YS5mZWUuYnV5X2ZlZVRpbWU7CiAgICAgICAgICAgIHRoaXMuYnV5X2ZlZU1vbmV5ID0gcmVzLmRhdGEuZmVlLmJ1eV9mZWVNb25leTsKICAgICAgICAgICAgdGhpcy5idXlfZmVlTm90ZSA9IHJlcy5kYXRhLmZlZS5idXlfZmVlTm90ZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDkv53lrZjmj5DkuqTlsI/otLnkv6Hmga8KICAgIHN1Ym1pdFRpcCgpIHsKICAgICAgdGhpcy4kYXhpb3MKICAgICAgICAucG9zdCh0aGlzLiRzdG9yZS5zdGF0ZS5iYXNlVXJsICsgIi9CdXlGZWVTYXZlIiwgewogICAgICAgICAgYnV5X2lkOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJidXlfaWQiKSwKICAgICAgICAgIGJ1eV9mZWVTdGF0ZTogdGhpcy5idXlfZmVlU3RhdGUgPT0gdHJ1ZSA/IDEgOiAtMSwKICAgICAgICAgIGJ1eV9mZWVUaW1lOiB0aGlzLmJ1eV9mZWVTdGF0ZSA9PSB0cnVlID8gdGhpcy5zaGVsbERhdGUodGhpcy5idXlfZmVlVGltZSkgOiAiIiwKICAgICAgICAgIGJ1eV9mZWVNb25leTogdGhpcy5idXlfZmVlU3RhdGUgPT0gdHJ1ZSA/IHRoaXMuYnV5X2ZlZU1vbmV5IDogIiIsCiAgICAgICAgICBidXlfZmVlQ3VycmVuY3k6IHRoaXMuYnV5X2ZlZVN0YXRlID09IHRydWUgPyB0aGlzLmJ1eV9mZWVDdXJyZW5jeSA6ICIiLAogICAgICAgICAgYnV5X2ZlZU5vdGU6IHRoaXMuYnV5X2ZlZVN0YXRlID09IHRydWUgPyB0aGlzLmJ1eV9mZWVOb3RlIDogIiIKICAgICAgICB9KQogICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygi5bCP6LS55L+h5oGv5o+Q5Lqk5oiQ5YqfIik7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgdGhpcy4kZW1pdCgibGlzdGVuVGlwIiwgcmVzLmRhdGEuYnV5X2ZlZVN0YXRlKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICLlsI/otLnkv6Hmga/kv53lrZjmiJDlip8iLAogICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIOmhtemdouWbnuWIsOmhtumDqAogICAgICAgICAgKGZ1bmN0aW9uIHNtb290aHNjcm9sbCgpIHsKICAgICAgICAgICAgdmFyIGN1cnJlbnRTY3JvbGwgPQogICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CiAgICAgICAgICAgIGlmIChjdXJyZW50U2Nyb2xsID4gMCkgewogICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc21vb3Roc2Nyb2xsKTsKICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgY3VycmVudFNjcm9sbCAtIGN1cnJlbnRTY3JvbGwgLyA1KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgICBtZXNzYWdlOiBlcnIuZGF0YS5tZXNzYWdlLAogICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Tip-page.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Tip-page.vue","sourceRoot":"src/components/purch","sourcesContent":["<template>\r\n  <div class=\"tip-container\">\r\n    <div class=\"drawback-top\">\r\n      <div class=\"top-form\">\r\n        <span class=\"top-span\">是否有小费</span>\r\n        <el-switch v-model=\"buy_feeState\" active-color=\"#13ce66\" inactive-color=\"#ff4949\"></el-switch>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"buy_feeState == true\" class=\"tip-center\">\r\n      <el-form label-width=\"10%\">\r\n        <el-form-item label=\"小费日期：\">\r\n          <el-date-picker v-model=\"buy_feeTime\" type=\"date\" class=\"input-style\"></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"小费金额：\">\r\n          <el-input v-model=\"buy_feeMoney\" class=\"input-style\">\r\n            <i slot=\"suffix\" style=\"color: #000;margin-right:5%;font-style:normal;\">{{buy_feeCurrency}}</i>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"备注：\">\r\n          <el-input type=\"textarea\" :autosize=\"{ minRows: 6}\" placeholder=\"请输入备注内容\" v-model=\"buy_feeNote\"\r\n            class=\"input-style\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <div class=\"drawback-submit\">\r\n      <el-button type=\"primary\" @click=\"submitTip\">保 存</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        buy_feeState: true, // 是否有小费\r\n        buy_feeTime: new Date(), // 小费时间\r\n        buy_feeMoney: \"\", // 小费金额\r\n        buy_feeCurrency: \"\", // 小费金额币种\r\n        buy_feeNote: \"\" // 小费备注\r\n      };\r\n    },\r\n    created() {\r\n      this.acquire();\r\n    },\r\n    methods: {\r\n      acquire() {\r\n        this.$axios\r\n          .post(this.$store.state.baseUrl + \"/BuyOrderGet?java\", {\r\n            buy_id: sessionStorage.getItem(\"buy_id\")\r\n          })\r\n          .then(res => {\r\n            for (let item of res.data.watch) {\r\n              this.buy_feeCurrency = item.buy_watchCurrency;\r\n            };\r\n            if (res.data.fee.buy_feeState == -1) {\r\n              this.buy_feeState = false;\r\n            } else if (res.data.fee.buy_feeState == 0 || res.data.fee.buy_feeState == 1) {\r\n              this.buy_feeState = true;\r\n              this.buy_feeTime = res.data.fee.buy_feeTime;\r\n              this.buy_feeMoney = res.data.fee.buy_feeMoney;\r\n              this.buy_feeNote = res.data.fee.buy_feeNote;\r\n            }\r\n          });\r\n      },\r\n      // 保存提交小费信息\r\n      submitTip() {\r\n        this.$axios\r\n          .post(this.$store.state.baseUrl + \"/BuyFeeSave\", {\r\n            buy_id: sessionStorage.getItem(\"buy_id\"),\r\n            buy_feeState: this.buy_feeState == true ? 1 : -1,\r\n            buy_feeTime: this.buy_feeState == true ? this.shellDate(this.buy_feeTime) : \"\",\r\n            buy_feeMoney: this.buy_feeState == true ? this.buy_feeMoney : \"\",\r\n            buy_feeCurrency: this.buy_feeState == true ? this.buy_feeCurrency : \"\",\r\n            buy_feeNote: this.buy_feeState == true ? this.buy_feeNote : \"\"\r\n          })\r\n          .then(res => {\r\n            console.log(\"小费信息提交成功\");\r\n            console.log(res);\r\n            this.$emit(\"listenTip\", res.data.buy_feeState);\r\n            this.$message.success({\r\n              message: \"小费信息保存成功\",\r\n              showClose: true,\r\n              duration: 2000\r\n            });\r\n            // 页面回到顶部\r\n            (function smoothscroll() {\r\n              var currentScroll =\r\n                document.documentElement.scrollTop || document.body.scrollTop;\r\n              if (currentScroll > 0) {\r\n                window.requestAnimationFrame(smoothscroll);\r\n                window.scrollTo(0, currentScroll - currentScroll / 5);\r\n              }\r\n            })();\r\n          })\r\n          .catch(err => {\r\n            console.log(err);\r\n            this.$message.error({\r\n              message: err.data.message,\r\n              showClose: true,\r\n              duration: 2000\r\n            });\r\n          });\r\n      }\r\n    }\r\n  };\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .tip-container {\r\n    width: 100%;\r\n\r\n    .drawback-top {\r\n      width: 100%;\r\n\r\n      .top-form {\r\n        width: 190px;\r\n        height: 80px;\r\n        padding-left: 40px;\r\n        line-height: 80px;\r\n        background-color: #fff;\r\n        border-radius: 30px;\r\n\r\n        .top-span {\r\n          margin-right: 15px;\r\n          font-size: 22px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .tip-center {\r\n      width: 100%;\r\n      margin: 40px 0;\r\n      padding: 40px 0;\r\n      background-color: #fff;\r\n      border-radius: 30px;\r\n\r\n      .input-style {\r\n        width: 50% !important;\r\n      }\r\n    }\r\n\r\n    .drawback-submit {\r\n      width: 100%;\r\n      margin-top: 30px;\r\n      text-align: right;\r\n\r\n      img {\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n<style lang=\"scss\">\r\n  .el-form-item__label {\r\n    font-size: 16px;\r\n  }\r\n</style>"]}]}