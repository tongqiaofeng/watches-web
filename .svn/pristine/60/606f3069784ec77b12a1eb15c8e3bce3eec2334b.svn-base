{"remainingRequest":"D:\\aa-tong\\my-projects\\watches\\node_modules\\thread-loader\\dist\\cjs.js!D:\\aa-tong\\my-projects\\watches\\node_modules\\babel-loader\\lib\\index.js!D:\\aa-tong\\my-projects\\watches\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\aa-tong\\my-projects\\watches\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\aa-tong\\my-projects\\watches\\src\\components\\purch\\Tip-page.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\aa-tong\\my-projects\\watches\\src\\components\\purch\\Tip-page.vue","mtime":1594785186597},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkQ6XFxhYS10b25nXFxteS1wcm9qZWN0c1xcd2F0Y2hlc1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnV5X2ZlZVN0YXRlOiB0cnVlLAogICAgICAvLyDmmK/lkKbmnInlsI/otLkKICAgICAgYnV5X2ZlZVRpbWU6IG5ldyBEYXRlKCksCiAgICAgIC8vIOWwj+i0ueaXtumXtAogICAgICBidXlfZmVlTW9uZXk6ICIiLAogICAgICAvLyDlsI/otLnph5Hpop0KICAgICAgYnV5X2ZlZUN1cnJlbmN5OiAiIiwKICAgICAgLy8g5bCP6LS56YeR6aKd5biB56eNCiAgICAgIGJ1eV9mZWVOb3RlOiAiIiAvLyDlsI/otLnlpIfms6gKCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuYWNxdWlyZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgYWNxdWlyZTogZnVuY3Rpb24gYWNxdWlyZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJGF4aW9zLnBvc3QodGhpcy4kc3RvcmUuc3RhdGUuYmFzZVVybCArICIvQnV5T3JkZXJHZXQ/amF2YSIsIHsKICAgICAgICBidXlfaWQ6IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImJ1eV9pZCIpCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyZXMuZGF0YS53YXRjaCksCiAgICAgICAgICAgIF9zdGVwOwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgX3RoaXMuYnV5X2ZlZUN1cnJlbmN5ID0gaXRlbS5idXlfd2F0Y2hDdXJyZW5jeTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgfQoKICAgICAgICA7CgogICAgICAgIGlmIChyZXMuZGF0YS5mZWUuYnV5X2ZlZVN0YXRlID09IC0xKSB7CiAgICAgICAgICBfdGhpcy5idXlfZmVlU3RhdGUgPSBmYWxzZTsKICAgICAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLmZlZS5idXlfZmVlU3RhdGUgPT0gMCB8fCByZXMuZGF0YS5mZWUuYnV5X2ZlZVN0YXRlID09IDEpIHsKICAgICAgICAgIF90aGlzLmJ1eV9mZWVTdGF0ZSA9IHRydWU7CiAgICAgICAgICBfdGhpcy5idXlfZmVlVGltZSA9IHJlcy5kYXRhLmZlZS5idXlfZmVlVGltZTsKICAgICAgICAgIF90aGlzLmJ1eV9mZWVNb25leSA9IHJlcy5kYXRhLmZlZS5idXlfZmVlTW9uZXk7CiAgICAgICAgICBfdGhpcy5idXlfZmVlTm90ZSA9IHJlcy5kYXRhLmZlZS5idXlfZmVlTm90ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOS/neWtmOaPkOS6pOWwj+i0ueS/oeaBrwogICAgc3VibWl0VGlwOiBmdW5jdGlvbiBzdWJtaXRUaXAoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kYXhpb3MucG9zdCh0aGlzLiRzdG9yZS5zdGF0ZS5iYXNlVXJsICsgIi9CdXlGZWVTYXZlIiwgewogICAgICAgIGJ1eV9pZDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYnV5X2lkIiksCiAgICAgICAgYnV5X2ZlZVN0YXRlOiB0aGlzLmJ1eV9mZWVTdGF0ZSA9PSB0cnVlID8gMSA6IC0xLAogICAgICAgIGJ1eV9mZWVUaW1lOiB0aGlzLmJ1eV9mZWVTdGF0ZSA9PSB0cnVlID8gdGhpcy5zaGVsbERhdGUodGhpcy5idXlfZmVlVGltZSkgOiAiIiwKICAgICAgICBidXlfZmVlTW9uZXk6IHRoaXMuYnV5X2ZlZVN0YXRlID09IHRydWUgPyB0aGlzLmJ1eV9mZWVNb25leSA6ICIiLAogICAgICAgIGJ1eV9mZWVDdXJyZW5jeTogdGhpcy5idXlfZmVlU3RhdGUgPT0gdHJ1ZSA/IHRoaXMuYnV5X2ZlZUN1cnJlbmN5IDogIiIsCiAgICAgICAgYnV5X2ZlZU5vdGU6IHRoaXMuYnV5X2ZlZVN0YXRlID09IHRydWUgPyB0aGlzLmJ1eV9mZWVOb3RlIDogIiIKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2coIuWwj+i0ueS/oeaBr+aPkOS6pOaIkOWKnyIpOwogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgIF90aGlzMi4kZW1pdCgibGlzdGVuVGlwIiwgcmVzLmRhdGEuYnV5X2ZlZVN0YXRlKTsKCiAgICAgICAgX3RoaXMyLiRtZXNzYWdlLnN1Y2Nlc3MoewogICAgICAgICAgbWVzc2FnZTogIuWwj+i0ueS/oeaBr+S/neWtmOaIkOWKnyIsCiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgIH0pOyAvLyDpobXpnaLlm57liLDpobbpg6gKCgogICAgICAgIChmdW5jdGlvbiBzbW9vdGhzY3JvbGwoKSB7CiAgICAgICAgICB2YXIgY3VycmVudFNjcm9sbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CgogICAgICAgICAgaWYgKGN1cnJlbnRTY3JvbGwgPiAwKSB7CiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc21vb3Roc2Nyb2xsKTsKICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIGN1cnJlbnRTY3JvbGwgLSBjdXJyZW50U2Nyb2xsIC8gNSk7CiAgICAgICAgICB9CiAgICAgICAgfSkoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CgogICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcih7CiAgICAgICAgICBtZXNzYWdlOiBlcnIuZGF0YS5tZXNzYWdlLAogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Tip-page.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"tip-container\">\r\n    <div class=\"drawback-top\">\r\n      <div class=\"top-form\">\r\n        <span class=\"top-span\">是否有小费</span>\r\n        <el-switch v-model=\"buy_feeState\" active-color=\"#13ce66\" inactive-color=\"#ff4949\"></el-switch>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"buy_feeState == true\" class=\"tip-center\">\r\n      <el-form label-width=\"10%\">\r\n        <el-form-item label=\"小费日期：\">\r\n          <el-date-picker v-model=\"buy_feeTime\" type=\"date\" class=\"input-style\"></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"小费金额：\">\r\n          <el-input v-model=\"buy_feeMoney\" class=\"input-style\">\r\n            <i slot=\"suffix\" style=\"color: #000;margin-right:5%;font-style:normal;\">{{buy_feeCurrency}}</i>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"备注：\">\r\n          <el-input type=\"textarea\" :autosize=\"{ minRows: 6}\" placeholder=\"请输入备注内容\" v-model=\"buy_feeNote\"\r\n            class=\"input-style\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <div class=\"drawback-submit\">\r\n      <el-button type=\"primary\" @click=\"submitTip\">保 存</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        buy_feeState: true, // 是否有小费\r\n        buy_feeTime: new Date(), // 小费时间\r\n        buy_feeMoney: \"\", // 小费金额\r\n        buy_feeCurrency: \"\", // 小费金额币种\r\n        buy_feeNote: \"\" // 小费备注\r\n      };\r\n    },\r\n    created() {\r\n      this.acquire();\r\n    },\r\n    methods: {\r\n      acquire() {\r\n        this.$axios\r\n          .post(this.$store.state.baseUrl + \"/BuyOrderGet?java\", {\r\n            buy_id: sessionStorage.getItem(\"buy_id\")\r\n          })\r\n          .then(res => {\r\n            for (let item of res.data.watch) {\r\n              this.buy_feeCurrency = item.buy_watchCurrency;\r\n            };\r\n            if (res.data.fee.buy_feeState == -1) {\r\n              this.buy_feeState = false;\r\n            } else if (res.data.fee.buy_feeState == 0 || res.data.fee.buy_feeState == 1) {\r\n              this.buy_feeState = true;\r\n              this.buy_feeTime = res.data.fee.buy_feeTime;\r\n              this.buy_feeMoney = res.data.fee.buy_feeMoney;\r\n              this.buy_feeNote = res.data.fee.buy_feeNote;\r\n            }\r\n          });\r\n      },\r\n      // 保存提交小费信息\r\n      submitTip() {\r\n        this.$axios\r\n          .post(this.$store.state.baseUrl + \"/BuyFeeSave\", {\r\n            buy_id: sessionStorage.getItem(\"buy_id\"),\r\n            buy_feeState: this.buy_feeState == true ? 1 : -1,\r\n            buy_feeTime: this.buy_feeState == true ? this.shellDate(this.buy_feeTime) : \"\",\r\n            buy_feeMoney: this.buy_feeState == true ? this.buy_feeMoney : \"\",\r\n            buy_feeCurrency: this.buy_feeState == true ? this.buy_feeCurrency : \"\",\r\n            buy_feeNote: this.buy_feeState == true ? this.buy_feeNote : \"\"\r\n          })\r\n          .then(res => {\r\n            console.log(\"小费信息提交成功\");\r\n            console.log(res);\r\n            this.$emit(\"listenTip\", res.data.buy_feeState);\r\n            this.$message.success({\r\n              message: \"小费信息保存成功\",\r\n              showClose: true,\r\n              duration: 2000\r\n            });\r\n            // 页面回到顶部\r\n            (function smoothscroll() {\r\n              var currentScroll =\r\n                document.documentElement.scrollTop || document.body.scrollTop;\r\n              if (currentScroll > 0) {\r\n                window.requestAnimationFrame(smoothscroll);\r\n                window.scrollTo(0, currentScroll - currentScroll / 5);\r\n              }\r\n            })();\r\n          })\r\n          .catch(err => {\r\n            console.log(err);\r\n            this.$message.error({\r\n              message: err.data.message,\r\n              showClose: true,\r\n              duration: 2000\r\n            });\r\n          });\r\n      }\r\n    }\r\n  };\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .tip-container {\r\n    width: 100%;\r\n\r\n    .drawback-top {\r\n      width: 100%;\r\n\r\n      .top-form {\r\n        width: 190px;\r\n        height: 80px;\r\n        padding-left: 40px;\r\n        line-height: 80px;\r\n        background-color: #fff;\r\n        border-radius: 30px;\r\n\r\n        .top-span {\r\n          margin-right: 15px;\r\n          font-size: 22px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .tip-center {\r\n      width: 100%;\r\n      margin: 40px 0;\r\n      padding: 40px 0;\r\n      background-color: #fff;\r\n      border-radius: 30px;\r\n\r\n      .input-style {\r\n        width: 50% !important;\r\n      }\r\n    }\r\n\r\n    .drawback-submit {\r\n      width: 100%;\r\n      margin-top: 30px;\r\n      text-align: right;\r\n\r\n      img {\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n<style lang=\"scss\">\r\n  .el-form-item__label {\r\n    font-size: 16px;\r\n  }\r\n</style>"],"sourceRoot":"src/components/purch"}]}