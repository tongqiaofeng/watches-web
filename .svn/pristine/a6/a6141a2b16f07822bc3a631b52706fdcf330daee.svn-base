{"remainingRequest":"D:\\aa-tong\\my-projects\\watches\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\aa-tong\\my-projects\\watches\\src\\components\\purch\\Peer.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\aa-tong\\my-projects\\watches\\src\\components\\purch\\Peer.vue","mtime":1595396277779},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW1nOiB0aGlzLiRzdG9yZS5zdGF0ZS5iYXNlVXJsLAogICAgICBkYXRhUGVlckxpc3Q6IFtdLCAvL+aJgOacieWQjOihjAogICAgICBidXlfZGF0ZTogbmV3IERhdGUoKSwgLy/ph4fotK3ml6XmnJ8KICAgICAgYnV5X3dhdGNoOiBbXSwgLy/ph4fotK3miYvooajliJfooagKICAgICAgc3RvcmU6ICIiLCAvL+mHh+i0reW6l+mTuuWQjeensAogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIGNlbnRlckRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBkaWFsb2dVcGRhdGVXYXRjaFZpc2libGU6IGZhbHNlLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgYWRkRGlhbG9nOiBmYWxzZSwKICAgICAgYnV5X3N0b3JlSWQ6IDAsIC8v6YeH6LSt5bqX6ZO6aWQKICAgICAgY291bnRyeTogIiIsCiAgICAgIGtleXdvcmQ6ICIiLCAvL+mHh+i0reWFs+mUruWtlwogICAgICBidXlfd2F0Y2g6ICIiLCAvL+mHh+i0reaJi+ihqOWIl+ihqAogICAgICBtb2RlbDogIiIsCiAgICAgIG1vZGVsczogW10sCiAgICAgIG15QnJhbmQ6ICIiLAogICAgICBteU1vZGVsOiAiIiwKICAgICAgYnV5X3dhdGNoSWQ6ICIiLCAvL+mHh+i0reaJi+ihqGlkCiAgICAgIHdhdGNoX21vZGVsOiAiIiwKICAgICAgYnV5X3dhdGNoUHJpY2U6ICIiLCAvL+mHh+i0reS7t+agvAogICAgICBidXlfd2F0Y2hDdXJyZW5jeTogIiIsIC8v5Lu35qC85biB56eNCiAgICAgIGJ1eV93YXRjaFNuOiAiIiwgLy/mnLroiq/lj7cKICAgICAgYnV5X3dhdGNoQ2FyZDogbmV3IERhdGUoKSwgLy/ph4fotK3kv53ljaHml6XmnJ8KICAgICAgYnV5X3dhdGNoUGFydHM6ICIiLCAvL+mHh+i0remFjeS7tgogICAgICBhY2Nlc3Nvcnk6IFtdLAogICAgICBhY2Nlc3NvcmllczogWwogICAgICAgICLkv53ljaEiLAogICAgICAgICLor7TmmI7kuaYiLAogICAgICAgICLmma7pgJrooajnm5IiLAogICAgICAgICLosIPpkogiLAogICAgICAgICLmi4bljbjlt6XlhbciLAogICAgICAgICLpop3lpJbooajluKblpZciLAogICAgICAgICLooajohpwiLAogICAgICAgICLkuoznu7TnoIEiLAogICAgICAgICJV55uYIiwKICAgICAgICAi5ZCO55uWIiwKICAgICAgICAi5L6/5pC655uSIiwKICAgICAgICAi54m55q6K6KGo55uSIgogICAgICBdLAogICAgICBidXlfd2F0Y2hCYW5kOiAiIiwgLy/ph4fotK3pop3lpJbooajluKbmlbAKICAgICAgd2F0Y2g6IHt9LAogICAgICB3YXRjaExpc3Q6IFtdLAogICAgICBidXlfaWQ6IDAsIC8v6YeH6LSt5Y2VaWQKICAgICAgYnV5X3dhdGNoU3RhdGU6IDAsIC8v5omL6KGo5a6M5oiQ54q25oCBCiAgICAgIGJ1eV93YXRjaHBpY3M6ICIiLCAvL+aJi+ihqOWbvueJhwogICAgICBkZWxpZDogMCwKICAgICAgd2F0Y2hpZDogMCwKICAgICAgZGV0YWlsc1NlbGVjdDogewogICAgICAgIGlkOiAxLAogICAgICAgIG51bTogMAogICAgICB9LAogICAgICBwaWNzOiBbXSwKICAgICAgaW1nU2VsczogJycsCiAgICAgIG51bTogMCwKICAgICAgdXBkYXRlSW5kZXg6IDAsCiAgICAgIGRpYWxvZ0FkZFBlZXJWaXNpYmxlOiBmYWxzZSwKICAgICAgbmFtZTogJycsIC8vIOi0uOaYk+WVhuWQjeensAogICAgICB0eXBlOiAwLCAvLyDnsbvlnosKICAgICAgY291bnRyeVByaWNlOiAn5Lit5Zu96aaZ5rivJywgLy8g5Zu95a62CiAgICAgIGNvdW50cnlMaXN0OiBbXSwKICAgICAgY29udGFjdFR5cGU6ICcnLCAvLyDogZTns7vmlrnlvI8KICAgICAgd2F0Y2hCcmFuZExpc3Q6IFtdLAogICAgICBzZWxsQnJhbmRMaXN0OiBbXSwgLy8g5omA6YCJ5oup55qE5Li76JCl5ZOB54mMCiAgICAgIHNlbGxCcmFuZDogJycsIC8vIOS4u+iQpeWTgeeJjAoKICAgIH07CiAgfSwKICBwcm9wczogWyJwdXJjaGFzZVNlbGVjdCJdLAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmhhbmRsZUNvdW50cnkoKTsKICAgIHRoaXMuaGFuZGxlQnJhbmQoKTsKICAgIHRoaXMua2V5d29yZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3BlZXJDb250YWluZXInKTsKICAgIHRoaXMuc3RvcmUgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdwZWVyQ29udGFpbmVyJyk7CiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdwZWVyQ29udGFpbmVyJywgJycpOwogICAgdGhpcy5idXlfc3RvcmVJZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3BlZXJJZCcpOwogICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgncGVlcklkJywgJycpOwogICAgdGhpcy5jb3VudHJ5ID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgncGVlckNvdW50cnknKTsKICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3BlZXJDb3VudHJ5JywgJycpOwogIH0sCiAgbWV0aG9kczogewogICAgZ29iYWNrKHZhbCkgewogICAgICB0aGlzLnB1cmNoYXNlU2VsZWN0Lm51bXMgPSB2YWw7CiAgICAgIHRoaXMuYnV5X2RhdGUgPSBuZXcgRGF0ZSgpOwogICAgICB0aGlzLmtleXdvcmQgPSAnJzsKICAgICAgdGhpcy5tb2RlbCA9ICcnOwogICAgICB0aGlzLmJ1eV93YXRjaEN1cnJlbmN5ID0gJyc7CiAgICAgIHRoaXMud2F0Y2hMaXN0ID0gW107CiAgICB9LAogICAgLy8g5pel5pyfIOWei+WPtyDku7fmoLwg5b+F6aG7CiAgICAvLyDotLjmmJPllYbpgInmi6kKICAgIHF1ZXJ5U2VhcmNoQXN5bmMocXVlcnlTdHJpbmcsIGNhbGxiYWNrKSB7CiAgICAgIGlmICh0aGlzLmtleXdvcmQgPT0gJycpIHsKICAgICAgICB0aGlzLiRheGlvcwogICAgICAgICAgLnBvc3QodGhpcy4kc3RvcmUuc3RhdGUuYmFzZVVybCArICIvRGF0YVBlZXJMaXN0IikKICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJmZW5nIik7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgcmVzLmRhdGEucGVlcnMpIHsKICAgICAgICAgICAgICBpdGVtLnZhbHVlID0gaXRlbS5uYW1lOwogICAgICAgICAgICAgIGl0ZW0uaWQgPSBpdGVtLmlkOwogICAgICAgICAgICAgIGl0ZW0uQ291bnRyeUNuID0gaXRlbS5jb3VudHJ5OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuZGF0YVBlZXJMaXN0ID0gcmVzLmRhdGEucGVlcnM7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZGF0YVBlZXJMaXN0KTsKICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5kYXRhUGVlckxpc3QpOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coJzk5OTk5OTk5OTknKTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGFQZWVyTGlzdCk7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5rZXl3b3JkKTsKICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMuZGF0YVBlZXJMaXN0KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5Yy56YWNJyk7CiAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtKTsKICAgICAgICAgIGlmICh0aGlzLmtleXdvcmQgIT09ICcnKSB7CiAgICAgICAgICAgIGlmIChpdGVtLm5hbWUuaW5kZXhPZih0aGlzLmtleXdvcmQpICE9PSAtMSkgewogICAgICAgICAgICAgIGl0ZW0udmFsdWUgPSBpdGVtLm5hbWU7CiAgICAgICAgICAgICAgaXRlbS5pZCA9IGl0ZW0uaWQ7CiAgICAgICAgICAgICAgaXRlbS5Db3VudHJ5Q24gPSBpdGVtLmNvdW50cnk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaXRlbS52YWx1ZSA9ICcnOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpdGVtLnZhbHVlID0gaXRlbS5uYW1lOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjYWxsYmFjayh0aGlzLmRhdGFQZWVyTGlzdCk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVTZWxlY3QoaXRlbSkgewogICAgICBjb25zb2xlLmxvZygicmVzdG5oam5qbiIpOwogICAgICBjb25zb2xlLmxvZyhpdGVtKTsKICAgICAgY29uc29sZS5sb2coaXRlbS5Db3VudHJ5Q24pOwogICAgICBjb25zb2xlLmxvZyhpdGVtLmlkKTsKICAgICAgdGhpcy5idXlfc3RvcmVJZCA9IDA7CiAgICAgIHRoaXMuYnV5X3N0b3JlSWQgPSBpdGVtLmlkOwogICAgICB0aGlzLmNvdW50cnkgPSBpdGVtLkNvdW50cnlDbjsKICAgICAgdGhpcy5zdG9yZSA9ICcnOwogICAgICB0aGlzLnN0b3JlID0gaXRlbS52YWx1ZTsKICAgICAgaXRlbS52YWx1ZSA9ICcnOwogICAgfSwKICAgIC8vIOaWsOWinui0uOaYk+WVhgogICAgYWRkUGVlckp1bXAoKSB7CiAgICAgIHRoaXMuZGlhbG9nQWRkUGVlclZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIC8vIOWinuWKoOi0uOaYk+WVhgogICAgYWRkUGVlcigpIHsKICAgICAgdGhpcy5kaWFsb2dBZGRQZWVyVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMubmFtZSA9ICcnOwogICAgICB0aGlzLnR5cGUgPSAwOwogICAgICB0aGlzLmNvdW50cnlQcmljZSA9ICfkuK3lm73pppnmuK8nOyAvLyDlm73lrrYKICAgICAgdGhpcy5jb250YWN0VHlwZSA9ICcnOyAvLyDogZTns7vmlrnlvI8KICAgICAgdGhpcy5zZWxsQnJhbmRMaXN0ID0gW107IC8vIOaJgOmAieaLqeeahOS4u+iQpeWTgeeJjAogICAgICB0aGlzLnNlbGxCcmFuZCA9ICcnOyAvLyDkuLvokKXlk4HniYwKICAgIH0sCiAgICAvLyDojrflj5bmiYDmnInlm73lrrYKICAgIGhhbmRsZUNvdW50cnkoKSB7CiAgICAgIHRoaXMuJGF4aW9zLnBvc3QodGhpcy4kc3RvcmUuc3RhdGUuYmFzZVVybCArICcvQ291bnRyeUdldCcpLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCfmiYDmnInlm73lrrYnKTsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIHRoaXMuY291bnRyeUxpc3QgPSByZXMuZGF0YTsKICAgICAgfSkuY2F0Y2goKGVycikgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pCiAgICB9LAogICAgLy8g6I635Y+W5omA5pyJ5ZOB54mMCiAgICBoYW5kbGVCcmFuZCgpIHsKICAgICAgdGhpcy4kYXhpb3MucG9zdCh0aGlzLiRzdG9yZS5zdGF0ZS5iYXNlVXJsICsgJy9EYXRhV2F0Y2hCcmFuZExpc3QnKS50aGVuKChyZXMpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygn5ZOB54mM5YiX6KGoJyk7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICB0aGlzLndhdGNoQnJhbmRMaXN0ID0gcmVzLmRhdGE7CiAgICAgIH0pCiAgICB9LAogICAgLy8g5o+Q5Lqk5YmN5pWw5o2u55qE6aqM6K+BCiAgICBzZWxsQnJhbmRDaGFuZ2UoKSB7CiAgICAgIC8vIOS4u+iQpeWTgeeJjAogICAgICBjb25zb2xlLmxvZyh0aGlzLnNlbGxCcmFuZExpc3QpOwogICAgICB0aGlzLnNlbGxCcmFuZCA9IHRoaXMuc2VsbEJyYW5kTGlzdC5qb2luKCd8Jyk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2VsbEJyYW5kKTsKICAgICAgaWYgKHRoaXMubmFtZSA9PSAnJyB8fCB0aGlzLmNvdW50cnlQcmljZSA9PSAnJyB8fCB0aGlzLnNlbGxCcmFuZCA9PSAnJykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgbWVzc2FnZTogJ+aVsOaNruS4jeiDveS4uuepuu+8jOivt+ajgOafpeaVsOaNruWhq+WGmScsCiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgIH0pCiAgICAgICAgcmV0dXJuIDE7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnoa7lrprlop7liqDotLjmmJPllYYKICAgIHN1cmVQZWVyQWRkKCkgewogICAgICBpZiAodGhpcy5zZWxsQnJhbmRDaGFuZ2UoKSAhPT0gMSkgewogICAgICAgIGNvbnN0IGxvYWRpbmcgPSB0aGlzLiRsb2FkaW5nKHsKICAgICAgICAgIGxvY2s6IHRydWUsCiAgICAgICAgICB0ZXh0OiAn5pWw5o2u5o+Q5Lqk5LitLi4uJywKICAgICAgICAgIHNwaW5uZXI6ICdlbC1pY29uLWxvYWRpbmcnLAogICAgICAgICAgYmFja2dyb3VuZDogJ3JnYmEoMCwgMCwgMCwgMC43KScKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRheGlvcy5wb3N0KHRoaXMuJHN0b3JlLnN0YXRlLmJhc2VVcmwgKyAnL0RhdGFQZWVyU2F2ZScsIHsKICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSwKICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSwKICAgICAgICAgIGNvdW50cnk6IHRoaXMuY291bnRyeVByaWNlLAogICAgICAgICAgY29udGFjdFR5cGU6IHRoaXMuY29udGFjdFR5cGUsCiAgICAgICAgICBzZWxsQnJhbmQ6IHRoaXMuc2VsbEJyYW5kCiAgICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5aKe5Yqg6LS45piT5ZWGJyk7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgdGhpcy5idXlfc3RvcmVJZCA9IHJlcy5kYXRhLmlkOwogICAgICAgICAgdGhpcy5zdG9yZSA9IHJlcy5kYXRhLm5hbWU7CiAgICAgICAgICB0aGlzLmtleXdvcmQgPSByZXMuZGF0YS5uYW1lOwogICAgICAgICAgdGhpcy5jb3VudHJ5ID0gcmVzLmRhdGEuY291bnRyeTsKICAgICAgICAgIHRoaXMucHJpY2UoKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfmlrDlop7otLjmmJPllYbmiJDlip8nLAogICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZGlhbG9nQWRkUGVlclZpc2libGUgPSBmYWxzZTsKICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHsKICAgICAgICAgICAgbWVzc2FnZTogZXJyLmRhdGEubWVzc2FnZSwKICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgLy8g5re75Yqg5omL6KGoCiAgICBhZGRXYXRjaCgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5idXlfZGF0ZSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3RvcmUpOwogICAgICBpZiAodGhpcy5idXlfZGF0ZSA9PSBudWxsKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih7CiAgICAgICAgICBtZXNzYWdlOiAi6YeH6LSt5pel5pyf5LiN6IO95Li656m6IiwKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgfSkKICAgICAgfSBlbHNlIGlmICh0aGlzLnN0b3JlID09ICIiIHx8IHRoaXMuc3RvcmUgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih7CiAgICAgICAgICBtZXNzYWdlOiAi6LS45piT5ZWG5LiN6IO95Li656m6IiwKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsKICAgICAgfTsKICAgICAgdGhpcy5wcmljZSgpOwogICAgICB0aGlzLndhdGNoID0ge307CiAgICAgIHRoaXMuYnV5X3dhdGNoUHJpY2UgPSAiIjsKICAgICAgdGhpcy5idXlfd2F0Y2hTbiA9ICIiOwogICAgICB0aGlzLmFjY2Vzc29yeSA9IFtdOwogICAgICB0aGlzLmJ1eV93YXRjaFBhcnRzID0gJyc7CiAgICAgIHRoaXMuYnV5X3dhdGNoQmFuZCA9ICIiOwogICAgICB0aGlzLmJ1eV93YXRjaEJyYW5kID0gIiI7CiAgICAgIHRoaXMuYnV5X3dhdGNoTW9kZWwgPSAiIjsKICAgIH0sCiAgICAvLyDmiYvooajlnovlj7cKICAgIGZldGNoU3VnZ2VzdGlvbnMocXVlcnlTdHJpbmcsIGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuJGF4aW9zCiAgICAgICAgLnBvc3QodGhpcy4kc3RvcmUuc3RhdGUuYmFzZVVybCArICIvV2F0Y2hTZWFyY2giLCB7CiAgICAgICAgICBrZXl3b3JkOiB0aGlzLm1vZGVsCiAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgcmVzLmRhdGEpIHsKICAgICAgICAgICAgaXRlbS52YWx1ZSA9IGl0ZW0uYnJhbmQgKyAiLSIgKyBpdGVtLm1vZGVsOwogICAgICAgICAgICBpdGVtLmlkID0gaXRlbS5pZDsKICAgICAgICAgICAgaXRlbS5icmFuZCA9IGl0ZW0uYnJhbmQ7CiAgICAgICAgICAgIGl0ZW0ubW9kZWwgPSBpdGVtLm1vZGVsOwogICAgICAgICAgICBpdGVtLnBpY3MgPSBpdGVtLnBpY3M7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLm1vZGVscyA9IHJlcy5kYXRhOwogICAgICAgICAgY2FsbGJhY2sodGhpcy5tb2RlbHMpOwogICAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZU1vZGVsKGl0ZW0pIHsKICAgICAgdGhpcy5idXlfd2F0Y2hJZCA9IGl0ZW0uaWQ7CiAgICAgIHRoaXMubXlCcmFuZCA9IGl0ZW0uYnJhbmQ7CiAgICAgIHRoaXMubXlNb2RlbCA9IGl0ZW0ubW9kZWw7CiAgICAgIHRoaXMudmFsdWUgPSBpdGVtLnZhbHVlOwogICAgICBjb25zb2xlLmxvZyhpdGVtKTsKICAgICAgaWYgKGl0ZW0ucGljcyAhPT0gbnVsbCkgewogICAgICAgIHRoaXMuaW1nU2VscyA9IGl0ZW0ucGljcy5zcGxpdCgnfCcpWzBdOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW1nU2VscyA9IFtdOwogICAgICB9CiAgICB9LAogICAgLy8g6YeH6LSt5Lu35qC8CiAgICB3YXRjaHByaWNlKCkgewogICAgICBpZiAodGhpcy5idXlfd2F0Y2hQcmljZSA8IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHsKICAgICAgICAgIG1lc3NhZ2U6ICfku7fmoLzkuI3og73kuLrotJ/vvIzor7fph43mlrDovpPlhaUnLAogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgLy8g5Lu35qC85biB56eNCiAgICBwcmljZSgpIHsKICAgICAgdGhpcy4kYXhpb3MucG9zdCh0aGlzLiRzdG9yZS5zdGF0ZS5iYXNlVXJsICsgIi9Db3VudHJ5R2V0IikudGhlbihyZXMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCfku7fmoLzluIHnp40nKTsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY291bnRyeSk7CiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiByZXMuZGF0YSkgewogICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jb3VudHJ5KTsKICAgICAgICAgIGlmICh0aGlzLmNvdW50cnkgPT0gaXRlbS5jbk5hbWUpIHsKICAgICAgICAgICAgdGhpcy5idXlfd2F0Y2hDdXJyZW5jeSA9IGl0ZW0uZW5DdXJyZW5jeTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOmqjOivgeaVsOaNruaYr+WQpuS4uuepugogICAgdmVyaWZ5KCkgewogICAgICBjb25zb2xlLmxvZygiMTExIik7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYnV5X2RhdGUpOwogICAgICBpZiAodGhpcy5idXlfd2F0Y2hJZCA9PSAiIikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgbWVzc2FnZTogIuaJi+ihqOWei+WPt+S4jeiDveS4uuepuiIsCiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgIH0pCiAgICAgICAgcmV0dXJuIDE7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5idXlfd2F0Y2hQcmljZSA9PSAiIikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgbWVzc2FnZTogIumHh+i0reS7t+agvOS4jeiDveS4uuepuiIsCiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgIH0pCiAgICAgICAgcmV0dXJuIDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIDI7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnoa7orqTkv53lrZjmiYvooajkv6Hmga8KICAgIG1lc3NhZ2VTdXJlKCkgewogICAgICBpZiAodGhpcy52ZXJpZnkoKSA9PSAyKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5hY2Nlc3NvcnkpOwogICAgICAgIC8vIHRoaXMuYnV5X3dhdGNoUGFydHMgPSAnJzsKICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMuYWNjZXNzb3J5KSB7CiAgICAgICAgICB0aGlzLmJ1eV93YXRjaFBhcnRzICs9IGl0ZW0gKyAifCI7CiAgICAgICAgfQogICAgICAgIGlmICgKICAgICAgICAgIHRoaXMuYnV5X3dhdGNoSWQgPT0gIiIgfHwKICAgICAgICAgIHRoaXMuYnV5X3dhdGNoUHJpY2UgPT0gIiIgfHwKICAgICAgICAgIHRoaXMuYnV5X3dhdGNoQ3VycmVuY3kgPT0gIiIgfHwKICAgICAgICAgIHRoaXMuYnV5X3dhdGNoU24gPT0gIiIgfHwKICAgICAgICAgIHRoaXMuYnV5X3dhdGNoQ2FyZCA9PSAiIiB8fAogICAgICAgICAgdGhpcy5idXlfd2F0Y2hQYXJ0cyA9PSAiIiB8fAogICAgICAgICAgdGhpcy5idXlfd2F0Y2hCYW5kID09ICIiIHx8CiAgICAgICAgICB0aGlzLmJ1eV93YXRjaEJyYW5kID09ICIiIHx8CiAgICAgICAgICB0aGlzLmJ1eV93YXRjaE1vZGVsID09ICIiCiAgICAgICAgKSB7CiAgICAgICAgICB0aGlzLmJ1eV93YXRjaFN0YXRlID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5idXlfd2F0Y2hTdGF0ZSA9IDE7CiAgICAgICAgfQogICAgICAgIHRoaXMud2F0Y2ggPSB7CiAgICAgICAgICBidXlfd2F0Y2hJZDogdGhpcy5idXlfd2F0Y2hJZCwKICAgICAgICAgIGJ1eV93YXRjaFByaWNlOiB0aGlzLmJ1eV93YXRjaFByaWNlLAogICAgICAgICAgYnV5X3dhdGNoQ3VycmVuY3k6IHRoaXMuYnV5X3dhdGNoQ3VycmVuY3ksCiAgICAgICAgICBidXlfd2F0Y2hTbjogdGhpcy5idXlfd2F0Y2hTbiwKICAgICAgICAgIGJ1eV93YXRjaENhcmQ6IHRoaXMuc2hlbGxEYXRlKHRoaXMuYnV5X3dhdGNoQ2FyZCksCiAgICAgICAgICBidXlfd2F0Y2hQYXJ0czogdGhpcy5idXlfd2F0Y2hQYXJ0cywKICAgICAgICAgIGJ1eV93YXRjaEJhbmQ6IHRoaXMuYnV5X3dhdGNoQmFuZCwKICAgICAgICAgIGJ1eV93YXRjaEJyYW5kOiB0aGlzLm15QnJhbmQsCiAgICAgICAgICBidXlfd2F0Y2hNb2RlbDogdGhpcy5teU1vZGVsLAogICAgICAgICAgYnV5X3dhdGNoU3RhdGU6IHRoaXMuYnV5X3dhdGNoU3RhdGUsCiAgICAgICAgICBidXlfcGljczogdGhpcy5pbWdTZWxzCiAgICAgICAgICAvLyBidXlfd2F0Y2hwaWNzOiB0aGlzLiRzdG9yZS5zdGF0ZS5pbWdVcmwKICAgICAgICB9OwogICAgICAgIHRoaXMud2F0Y2hMaXN0LnB1c2godGhpcy53YXRjaCk7CiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy53YXRjaExpc3QpOwogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc2hlbGxEYXRlKHRoaXMuYnV5X2RhdGUpKTsKICAgICAgICB0aGlzLndhdGNoID0ge307CiAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIHRoaXMuYnV5X3dhdGNoUHJpY2UgPSAiIjsKICAgICAgICB0aGlzLmJ1eV93YXRjaFNuID0gIiI7CiAgICAgICAgdGhpcy5hY2Nlc3NvcnkgPSBbXTsKICAgICAgICB0aGlzLmJ1eV93YXRjaFBhcnRzID0gJyc7CiAgICAgICAgdGhpcy5idXlfd2F0Y2hCYW5kID0gIiI7CiAgICAgICAgdGhpcy5idXlfd2F0Y2hCcmFuZCA9ICIiOwogICAgICAgIHRoaXMuYnV5X3dhdGNoTW9kZWwgPSAiIjsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnBpY3MpOwogICAgICB9CiAgICB9LAogICAgLy8g5L+u5pS55omL6KGo5L+h5oGvCiAgICB1cGRhdGVXYXRjaChpdGVtLCBpbmRleCkgewogICAgICBjb25zb2xlLmxvZyhpdGVtKTsKICAgICAgY29uc29sZS5sb2coaW5kZXgpOwogICAgICB0aGlzLnVwZGF0ZUluZGV4ID0gaW5kZXg7CiAgICAgIHRoaXMuZGlhbG9nVXBkYXRlV2F0Y2hWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5tb2RlbCA9IGl0ZW0uYnV5X3dhdGNoQnJhbmQgKyAnLScgKyBpdGVtLmJ1eV93YXRjaE1vZGVsOwogICAgICB0aGlzLmJ1eV93YXRjaFByaWNlID0gaXRlbS5idXlfd2F0Y2hQcmljZTsKICAgICAgdGhpcy5idXlfd2F0Y2hTbiA9IGl0ZW0uYnV5X3dhdGNoU247CiAgICAgIHRoaXMuYnV5X3dhdGNoQ2FyZCA9IGl0ZW0uYnV5X3dhdGNoQ2FyZDsKICAgICAgdGhpcy5hY2Nlc3NvcnkgPSBpdGVtLmJ1eV93YXRjaFBhcnRzLnNwbGl0KCJ8Iik7CiAgICAgIHRoaXMuYnV5X3dhdGNoQmFuZCA9IGl0ZW0uYnV5X3dhdGNoQmFuZDsKICAgIH0sCiAgICAvLyDnoa7orqTkv67mlLkKICAgIG1lc3NhZ2VTdXJlVXBkYXRlKCkgewogICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMuYWNjZXNzb3J5KSB7CiAgICAgICAgdGhpcy5idXlfd2F0Y2hQYXJ0cyArPSBpdGVtICsgInwiOwogICAgICB9CiAgICAgIGlmICgKICAgICAgICB0aGlzLmJ1eV93YXRjaElkID09ICIiIHx8CiAgICAgICAgdGhpcy5idXlfd2F0Y2hQcmljZSA9PSAiIiB8fAogICAgICAgIHRoaXMuYnV5X3dhdGNoQ3VycmVuY3kgPT0gIiIgfHwKICAgICAgICB0aGlzLmJ1eV93YXRjaFNuID09ICIiIHx8CiAgICAgICAgdGhpcy5idXlfd2F0Y2hDYXJkID09ICIiIHx8CiAgICAgICAgdGhpcy5idXlfd2F0Y2hQYXJ0cyA9PSAiIiB8fAogICAgICAgIHRoaXMuYnV5X3dhdGNoQmFuZCA9PSAiIiB8fAogICAgICAgIHRoaXMuYnV5X3dhdGNoQnJhbmQgPT0gIiIgfHwKICAgICAgICB0aGlzLmJ1eV93YXRjaE1vZGVsID09ICIiCiAgICAgICkgewogICAgICAgIHRoaXMuYnV5X3dhdGNoU3RhdGUgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYnV5X3dhdGNoU3RhdGUgPSAxOwogICAgICB9CiAgICAgIHRoaXMud2F0Y2ggPSB7CiAgICAgICAgYnV5X3dhdGNoSWQ6IHRoaXMuYnV5X3dhdGNoSWQsCiAgICAgICAgYnV5X3dhdGNoUHJpY2U6IHRoaXMuYnV5X3dhdGNoUHJpY2UsCiAgICAgICAgYnV5X3dhdGNoQ3VycmVuY3k6IHRoaXMuYnV5X3dhdGNoQ3VycmVuY3ksCiAgICAgICAgYnV5X3dhdGNoU246IHRoaXMuYnV5X3dhdGNoU24sCiAgICAgICAgYnV5X3dhdGNoQ2FyZDogdGhpcy5zaGVsbERhdGUodGhpcy5idXlfd2F0Y2hDYXJkKSwKICAgICAgICBidXlfd2F0Y2hQYXJ0czogdGhpcy5idXlfd2F0Y2hQYXJ0cywKICAgICAgICBidXlfd2F0Y2hCYW5kOiB0aGlzLmJ1eV93YXRjaEJhbmQsCiAgICAgICAgYnV5X3dhdGNoQnJhbmQ6IHRoaXMubXlCcmFuZCwKICAgICAgICBidXlfd2F0Y2hNb2RlbDogdGhpcy5teU1vZGVsLAogICAgICAgIGJ1eV93YXRjaFN0YXRlOiB0aGlzLmJ1eV93YXRjaFN0YXRlLAogICAgICAgIGJ1eV9waWNzOiB0aGlzLmltZ1NlbHMKICAgICAgICAvLyBidXlfd2F0Y2hwaWNzOiB0aGlzLiRzdG9yZS5zdGF0ZS5pbWdVcmwKICAgICAgfTsKICAgICAgdGhpcy53YXRjaExpc3Quc3BsaWNlKHRoaXMudXBkYXRlSW5kZXgsIDEsIHRoaXMud2F0Y2gpOwogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLndhdGNoTGlzdCk7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc2hlbGxEYXRlKHRoaXMuYnV5X2RhdGUpKTsKICAgICAgdGhpcy53YXRjaCA9IHt9OwogICAgICB0aGlzLmRpYWxvZ1VwZGF0ZVdhdGNoVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLmJ1eV93YXRjaFByaWNlID0gIiI7CiAgICAgIHRoaXMuYnV5X3dhdGNoU24gPSAiIjsKICAgICAgdGhpcy5hY2Nlc3NvcnkgPSBbXTsKICAgICAgdGhpcy5idXlfd2F0Y2hQYXJ0cyA9ICIiOwogICAgICB0aGlzLmJ1eV93YXRjaEJhbmQgPSAiIjsKICAgICAgdGhpcy5idXlfd2F0Y2hCcmFuZCA9ICIiOwogICAgICB0aGlzLmJ1eV93YXRjaE1vZGVsID0gIiI7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMucGljcyk7CiAgICB9LAogICAgLy8g6aqM6K+B6aKd5aSW6KGo5bim5pWwCiAgICB3YXljaGJhbmRJbnB1dCgpIHsKICAgICAgaWYgKE1hdGguZmxvb3IodGhpcy5idXlfd2F0Y2hCYW5kKSAhPT0gTnVtYmVyKHRoaXMuYnV5X3dhdGNoQmFuZCkpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHsKICAgICAgICAgIG1lc3NhZ2U6ICfovpPlhaXlhoXlrrnlj6rog73kuLrmlbTlnovmlbDlrZcnLAogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgLy8g5Yig6Zmk5omL6KGo5L+h5oGvCiAgICBkZWwoaW5kZXgpIHsKICAgICAgY29uc29sZS5sb2coIjIyMjIyMjIyMiIpOwogICAgICBjb25zb2xlLmxvZyhpbmRleCk7CiAgICAgIHRoaXMuZGVsaWQgPSBpbmRleDsKICAgICAgdGhpcy5jZW50ZXJEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBkZWxNZXNzYWdlKCkgewogICAgICB0aGlzLndhdGNoTGlzdC5zcGxpY2UodGhpcy5kZWxpZCwgMSk7CiAgICAgIHRoaXMucGljcy5zcGxpY2UodGhpcy5kZWxpZCwgMSk7CiAgICAgIHRoaXMuY2VudGVyRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIC8vIOaPkOS6pAogICAgc3VibWl0V2F0Y2hlcygpIHsKICAgICAgaWYgKHRoaXMuYnV5X3dhdGNoLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih7CiAgICAgICAgICBtZXNzYWdlOiAn6K+35re75Yqg5omL6KGo5L+h5oGvJywKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgfSkKICAgICAgICByZXR1cm4gMTsKICAgICAgfQogICAgfSwKICAgIHN1Ym1pdFB1cmNoYXNlKCkgewogICAgICB0aGlzLmJ1eV93YXRjaCA9IHRoaXMud2F0Y2hMaXN0OwogICAgICBpZiAodGhpcy5zdWJtaXRXYXRjaGVzKCkgIT09IDEpIHsKICAgICAgICBjb25zdCBsb2FkaW5nID0gdGhpcy4kbG9hZGluZyh7CiAgICAgICAgICBsb2NrOiB0cnVlLAogICAgICAgICAgdGV4dDogJ+aVsOaNruaPkOS6pOS4rS4uLicsCiAgICAgICAgICBzcGlubmVyOiAnZWwtaWNvbi1sb2FkaW5nJywKICAgICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDAsIDAsIDAsIDAuNyknCiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5idXlfc3RvcmVJZCk7CiAgICAgICAgdGhpcy4kYXhpb3MKICAgICAgICAgIC5wb3N0KHRoaXMuJHN0b3JlLnN0YXRlLmJhc2VVcmwgKyAiL0J1eU9yZGVySW5zZXJ0IiwgewogICAgICAgICAgICBidXlfZGF0ZTogdGhpcy5zaGVsbERhdGUodGhpcy5idXlfZGF0ZSksCiAgICAgICAgICAgIGJ1eV9zdG9yZUlkOiB0aGlzLmJ1eV9zdG9yZUlkLAogICAgICAgICAgICBidXlfd2F0Y2g6IHRoaXMuYnV5X3dhdGNoCiAgICAgICAgICB9KQogICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+a3u+WKoOmHh+i0reWNlScpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICB0aGlzLndhdGNoaWQgPSByZXMuZGF0YS5idXlfaWQ7CiAgICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiYnV5X2lkIiwgIiIpOwogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJidXlfaWQiLCByZXMuZGF0YS5idXlfaWQpOwogICAgICAgICAgICBjb25zb2xlLmxvZygienp6eiIpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJidXlfaWQiKSk7CiAgICAgICAgICAgIHRoaXMuYWRkRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHsKICAgICAgICAgICAgICBtZXNzYWdlOiBlcnIuZGF0YS5tZXNzYWdlLAogICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgICB9KQogICAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIC8vIOa3u+WKoOaWsOeahOmHh+i0reWNlQogICAgYWRkTmV3KCkgewogICAgICB0aGlzLmFkZERpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLmJ1eV9kYXRlID0gbmV3IERhdGUoKTsKICAgICAgdGhpcy5rZXl3b3JkID0gJyc7CiAgICAgIHRoaXMubW9kZWwgPSAnJzsKICAgICAgdGhpcy5idXlfd2F0Y2hDdXJyZW5jeSA9ICcnOwogICAgICB0aGlzLndhdGNoTGlzdCA9IFtdOwogICAgICAvLyDpobXpnaLlm57liLDpobbpg6gKICAgICAgKGZ1bmN0aW9uIHNtb290aHNjcm9sbCgpIHsKICAgICAgICB2YXIgY3VycmVudFNjcm9sbCA9CiAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgIGlmIChjdXJyZW50U2Nyb2xsID4gMCkgewogICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzbW9vdGhzY3JvbGwpOwogICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIGN1cnJlbnRTY3JvbGwgLSBjdXJyZW50U2Nyb2xsIC8gNSk7CiAgICAgICAgfQogICAgICB9KSgpOwogICAgfSwKICAgIC8vIOWujOWWhOivpemHh+i0reWNleS/oeaBrwogICAgY29tcGxldGUoKSB7CiAgICAgIHRoaXMuYWRkRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMucHVyY2hhc2VTZWxlY3QubnVtcyA9IDE7CiAgICAgIC8vIOmhtemdouWbnuWIsOmhtumDqAogICAgICAoZnVuY3Rpb24gc21vb3Roc2Nyb2xsKCkgewogICAgICAgIHZhciBjdXJyZW50U2Nyb2xsID0KICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CiAgICAgICAgaWYgKGN1cnJlbnRTY3JvbGwgPiAwKSB7CiAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNtb290aHNjcm9sbCk7CiAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgY3VycmVudFNjcm9sbCAtIGN1cnJlbnRTY3JvbGwgLyA1KTsKICAgICAgICB9CiAgICAgIH0pKCk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Peer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Peer.vue","sourceRoot":"src/components/purch","sourcesContent":["<template>\r\n  <div class=\"purchase-container\" id=\"peer-container\">\r\n    <!-- <h1>贸易商新增采购</h1> -->\r\n    <div class=\"purchase-center\">\r\n      <div class=\"purchase-form\" v-if=\"purchaseSelect.nums == 0\">\r\n        <div class=\"purchase\">\r\n          <el-form label-width=\"100px\">\r\n            <el-row :gutter=\"24\">\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"采购日期\" required>\r\n                  <el-date-picker style=\"width: 100%;\" v-model=\"buy_date\" type=\"date\" placeholder=\"选择日期\">\r\n                  </el-date-picker>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"贸易商\" required>\r\n                  <div style=\"width: 100%;display: flex;\">\r\n                    <el-autocomplete class=\"inline-input\" style=\"width: 100%;\" v-model=\"keyword\"\r\n                      :fetch-suggestions=\"querySearchAsync\" placeholder=\"可输入同行名称进行搜索\" @select=\"handleSelect\"\r\n                      @blur=\"price\">\r\n                    </el-autocomplete>\r\n                    <div style=\"margin-top: 5px;\">\r\n                      <el-tooltip class=\"item\" effect=\"light\" content=\"新增贸易商\" placement=\"top-end\">\r\n                        <img src=\"../../assets/imgs/peer.png\" style=\"height: 35px;margin-left: 10px;cursor: pointer;\"\r\n                          @click=\"addPeerJump\" />\r\n                      </el-tooltip>\r\n                    </div>\r\n                    <el-dialog title=\"新增贸易商\" :visible.sync=\"dialogAddPeerVisible\" center :close-on-press-escape=\"false\"\r\n                      :close-on-click-modal=\"false\">\r\n                      <el-form label-width=\"120px\">\r\n                        <el-form-item label=\"名称：\" required>\r\n                          <el-input v-model=\"name\" placeholder=\"请输入贸易商名称\" class=\"input-style\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"类型：\" required>\r\n                          <el-radio-group v-model=\"type\">\r\n                            <el-radio :label=\"0\">贸易商公司</el-radio>\r\n                            <el-radio :label=\"1\">贸易商个体</el-radio>\r\n                          </el-radio-group>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"国家：\" required>\r\n                          <el-select v-model=\"countryPrice\" placeholder=\"请选择\" class=\"input-style\">\r\n                            <el-option v-for=\"(coun,index) of countryList\" :key=\"index\" :label=\"coun.cnName\"\r\n                              :value=\"coun.cnName\">\r\n                            </el-option>\r\n                          </el-select>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"主营品牌：\" required>\r\n                          <el-checkbox-group v-model=\"sellBrandList\">\r\n                            <el-checkbox :label=\"brand.name\" v-for=\"(brand, index) of watchBrandList\" :key=\"index\">\r\n                            </el-checkbox>\r\n                          </el-checkbox-group>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"备注：\">\r\n                          <el-input type=\"textarea\" v-model=\"contactType\" placeholder=\"请输入备注信息\" class=\"input-style\">\r\n                          </el-input>\r\n                        </el-form-item>\r\n                      </el-form>\r\n                      <div slot=\"footer\">\r\n                        <el-button @click=\"dialogAddPeerVisible = false\">取 消</el-button>\r\n                        <el-button type=\"primary\" @click=\"surePeerAdd\">确 定</el-button>\r\n                      </div>\r\n                    </el-dialog>\r\n                  </div>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n          </el-form>\r\n          <div style=\"display: flex; justify-content: space-between;\">\r\n            <div @click=\"addWatch\" class=\"add\">\r\n              <span class=\"add-style\">\r\n                <span>+</span> 添加手表\r\n              </span>\r\n            </div>\r\n            <el-dialog title=\"手表信息\" :visible.sync=\"dialogFormVisible\" center :close-on-press-escape=\"false\"\r\n              :close-on-click-modal=\"false\" style=\"padding: 20px 30px;\">\r\n              <el-form label-width=\"100px\">\r\n                <el-form-item label=\"手表型号:\" required>\r\n                  <el-autocomplete v-model=\"model\" placeholder=\"请输入手表品牌、型号或昵称简称\" :fetch-suggestions=\"fetchSuggestions\"\r\n                    :trigger-on-focus=\"false\" @select=\"handleModel\"></el-autocomplete>\r\n                </el-form-item>\r\n                <el-form-item label=\"采购价格:\" required>\r\n                  <el-input placeholder=\"请输入采购价格\" type=\"text\" v-model=\"buy_watchPrice\" class=\"input-style\"\r\n                    @input=\"watchprice\">\r\n                    <i slot=\"suffix\" style=\"color: #000;margin-right:5%;font-style:normal;\">{{buy_watchCurrency}}</i>\r\n                  </el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"机芯号:\">\r\n                  <el-input placeholder=\"请输入机芯号\" v-model=\"buy_watchSn\" class=\"input-style\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"保卡日期:\">\r\n                  <el-date-picker v-model=\"buy_watchCard\" type=\"date\" placeholder=\"选择日期\"></el-date-picker>\r\n                </el-form-item>\r\n                <el-form-item label=\"配件:\">\r\n                  <el-checkbox-group required>\r\n                    <el-checkbox-group v-model=\"accessory\" class=\"accessories\">\r\n                      <el-checkbox v-for=\"accessory in accessories\" :label=\"accessory\" :key=\"accessory\">{{accessory}}\r\n                      </el-checkbox>\r\n                    </el-checkbox-group>\r\n                  </el-checkbox-group>\r\n                </el-form-item>\r\n                <el-form-item label=\"额外表带:\">\r\n                  <el-input placeholder=\"请输入额外表带数\" type=\"text\" v-model=\"buy_watchBand\" class=\"input-style\"\r\n                    @input=\"waychbandInput\">\r\n                    <i slot=\"suffix\" style=\"color: #000;margin-right:5%;font-style:normal;\">条</i>\r\n                  </el-input>\r\n                </el-form-item>\r\n              </el-form>\r\n              <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"messageSure\">保 存</el-button>\r\n              </div>\r\n            </el-dialog>\r\n            <button class=\"top-search-button\" @click=\"submitPurchase\">提 交</button>\r\n            <el-dialog title=\"提示\" :visible.sync=\"addDialog\" width=\"45%\" center>\r\n              <div style=\"text-align:center;\">\r\n                <span>采购单已提交到系统中</span>\r\n              </div>\r\n              <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"addNew\" style=\"width: 35%;margin-right:10px;\">添加新的采购单</el-button>\r\n                <el-button @click=\"complete\" style=\"width: 35%;background:#0c8563;color:#fff;\">继续完善该采购单</el-button>\r\n              </span>\r\n            </el-dialog>\r\n          </div>\r\n          <div v-show=\"watchList.length !== 0\" class=\"pruducts-list\">\r\n            <table>\r\n              <tr>\r\n                <th class=\"table-th\">图片</th>\r\n                <th class=\"table-th\">手表型号</th>\r\n                <th class=\"table-th\">采购价格</th>\r\n                <th class=\"table-th\">操作</th>\r\n              </tr>\r\n              <tr v-for=\"(item,index) in watchList\" :key=\"index\">\r\n                <td>\r\n                  <img v-image-preview\r\n                    :src=\"item.buy_pics == null || item.buy_pics == '' ? '' : img + '/img/watch/'+ item.buy_pics\"\r\n                    style=\"width: 100px;height: 100px;object-fit: cover;border-radius: 30px;\" />\r\n                </td>\r\n                <td>\r\n                  <p style=\"margin: 0;\">{{item.buy_watchBrand}}</p>\r\n                  <p style=\"margin: 0;\">{{item.buy_watchModel}}</p>\r\n                </td>\r\n                <td>{{item.buy_watchCurrency}} {{formatNumberRgx(item.buy_watchPrice)}}</td>\r\n                <td>\r\n                  <el-tooltip class=\"item\" effect=\"light\" content=\"修改查看信息\" placement=\"top-end\">\r\n                    <img src=\"../../assets/imgs/details.png\" style=\"cursor:pointer;\" @click=\"updateWatch(item,index)\" />\r\n                  </el-tooltip>\r\n                  <el-dialog title=\"手表信息\" :visible.sync=\"dialogUpdateWatchVisible\" center :close-on-press-escape=\"false\"\r\n                    :close-on-click-modal=\"false\">\r\n                    <el-form label-width=\"120px\">\r\n                      <el-form-item label=\"手表型号:\" required>\r\n                        <el-autocomplete v-model=\"model\" placeholder=\"请输入手表品牌、型号或昵称简称\"\r\n                          :fetch-suggestions=\"fetchSuggestions\" :trigger-on-focus=\"false\" @select=\"handleModel\">\r\n                        </el-autocomplete>\r\n                      </el-form-item>\r\n                      <el-form-item label=\"采购价格:\" required>\r\n                        <el-input placeholder=\"请输入采购价格\" type=\"text\" v-model=\"buy_watchPrice\" class=\"input-style\"\r\n                          @input=\"watchprice\">\r\n                          <i slot=\"suffix\"\r\n                            style=\"color: #000;margin-right:5%;font-style:normal;\">{{buy_watchCurrency}}</i>\r\n                        </el-input>\r\n                      </el-form-item>\r\n                      <el-form-item label=\"机芯号：\">\r\n                        <el-input placeholder=\"请输入机芯号\" v-model=\"buy_watchSn\" class=\"input-style\"></el-input>\r\n                      </el-form-item>\r\n                      <el-form-item label=\"保卡日期：\">\r\n                        <el-date-picker v-model=\"buy_watchCard\" type=\"date\" placeholder=\"选择日期\" class=\"input-style\">\r\n                        </el-date-picker>\r\n                      </el-form-item>\r\n                      <el-form-item label=\"配件：\">\r\n                        <el-checkbox-group required>\r\n                          <el-checkbox-group v-model=\"accessory\" class=\"accessories\">\r\n                            <el-checkbox v-for=\"accessory in accessories\" :label=\"accessory\" :key=\"accessory\">\r\n                              {{accessory}}\r\n                            </el-checkbox>\r\n                          </el-checkbox-group>\r\n                        </el-checkbox-group>\r\n                      </el-form-item>\r\n                      <el-form-item label=\"额外表带：\">\r\n                        <el-input placeholder=\"请输入额外表带数\" type=\"text\" v-model=\"buy_watchBand\" class=\"input-style\"\r\n                          @input=\"waychbandInput\">\r\n                          <i slot=\"suffix\" style=\"color: #000;margin-right:5%;font-style:normal;\">条</i>\r\n                        </el-input>\r\n                      </el-form-item>\r\n                    </el-form>\r\n                    <div slot=\"footer\" class=\"dialog-footer\">\r\n                      <el-button @click=\"dialogUpdateWatchVisible = false\">取 消</el-button>\r\n                      <el-button type=\"primary\" @click=\"messageSureUpdate\">保 存</el-button>\r\n                    </div>\r\n                  </el-dialog>\r\n                  <el-tooltip class=\"item\" effect=\"light\" content=\"删除\" placement=\"top-end\">\r\n                    <img src=\"../../assets/imgs/delete.png\" style=\"margin-left: 30px;cursor:pointer;\"\r\n                      @click=\"del(index)\" />\r\n                  </el-tooltip>\r\n                  <el-dialog title=\"提示\" :visible.sync=\"centerDialogVisible\" width=\"50%\" center>\r\n                    <div style=\"text-align:center;\">\r\n                      <span>是否删除该手表信息，删除后不能恢复</span>\r\n                    </div>\r\n                    <span slot=\"footer\" class=\"dialog-footer\">\r\n                      <el-button @click=\"centerDialogVisible = false\">取 消</el-button>\r\n                      <el-button type=\"primary\" @click=\"delMessage\">确 定</el-button>\r\n                    </span>\r\n                  </el-dialog>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"purchaseSelect.nums == 1\">\r\n        <Details @goback=\"goback\" :detailsSelect=\"detailsSelect\"></Details>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        img: this.$store.state.baseUrl,\r\n        dataPeerList: [], //所有同行\r\n        buy_date: new Date(), //采购日期\r\n        buy_watch: [], //采购手表列表\r\n        store: \"\", //采购店铺名称\r\n        dialogFormVisible: false,\r\n        centerDialogVisible: false,\r\n        dialogUpdateWatchVisible: false,\r\n        dialogVisible: false,\r\n        addDialog: false,\r\n        buy_storeId: 0, //采购店铺id\r\n        country: \"\",\r\n        keyword: \"\", //采购关键字\r\n        buy_watch: \"\", //采购手表列表\r\n        model: \"\",\r\n        models: [],\r\n        myBrand: \"\",\r\n        myModel: \"\",\r\n        buy_watchId: \"\", //采购手表id\r\n        watch_model: \"\",\r\n        buy_watchPrice: \"\", //采购价格\r\n        buy_watchCurrency: \"\", //价格币种\r\n        buy_watchSn: \"\", //机芯号\r\n        buy_watchCard: new Date(), //采购保卡日期\r\n        buy_watchParts: \"\", //采购配件\r\n        accessory: [],\r\n        accessories: [\r\n          \"保卡\",\r\n          \"说明书\",\r\n          \"普通表盒\",\r\n          \"调针\",\r\n          \"拆卸工具\",\r\n          \"额外表带套\",\r\n          \"表膜\",\r\n          \"二维码\",\r\n          \"U盘\",\r\n          \"后盖\",\r\n          \"便携盒\",\r\n          \"特殊表盒\"\r\n        ],\r\n        buy_watchBand: \"\", //采购额外表带数\r\n        watch: {},\r\n        watchList: [],\r\n        buy_id: 0, //采购单id\r\n        buy_watchState: 0, //手表完成状态\r\n        buy_watchpics: \"\", //手表图片\r\n        delid: 0,\r\n        watchid: 0,\r\n        detailsSelect: {\r\n          id: 1,\r\n          num: 0\r\n        },\r\n        pics: [],\r\n        imgSels: '',\r\n        num: 0,\r\n        updateIndex: 0,\r\n        dialogAddPeerVisible: false,\r\n        name: '', // 贸易商名称\r\n        type: 0, // 类型\r\n        countryPrice: '中国香港', // 国家\r\n        countryList: [],\r\n        contactType: '', // 联系方式\r\n        watchBrandList: [],\r\n        sellBrandList: [], // 所选择的主营品牌\r\n        sellBrand: '', // 主营品牌\r\n\r\n      };\r\n    },\r\n    props: [\"purchaseSelect\"],\r\n    mounted() {\r\n      this.handleCountry();\r\n      this.handleBrand();\r\n      this.keyword = sessionStorage.getItem('peerContainer');\r\n      this.store = sessionStorage.getItem('peerContainer');\r\n      sessionStorage.setItem('peerContainer', '');\r\n      this.buy_storeId = sessionStorage.getItem('peerId');\r\n      sessionStorage.setItem('peerId', '');\r\n      this.country = sessionStorage.getItem('peerCountry');\r\n      sessionStorage.setItem('peerCountry', '');\r\n    },\r\n    methods: {\r\n      goback(val) {\r\n        this.purchaseSelect.nums = val;\r\n        this.buy_date = new Date();\r\n        this.keyword = '';\r\n        this.model = '';\r\n        this.buy_watchCurrency = '';\r\n        this.watchList = [];\r\n      },\r\n      // 日期 型号 价格 必须\r\n      // 贸易商选择\r\n      querySearchAsync(queryString, callback) {\r\n        if (this.keyword == '') {\r\n          this.$axios\r\n            .post(this.$store.state.baseUrl + \"/DataPeerList\")\r\n            .then(res => {\r\n              // console.log(\"feng\");\r\n              // console.log(res);\r\n              for (let item of res.data.peers) {\r\n                item.value = item.name;\r\n                item.id = item.id;\r\n                item.CountryCn = item.country;\r\n              }\r\n              this.dataPeerList = res.data.peers;\r\n              console.log(this.dataPeerList);\r\n              callback(this.dataPeerList);\r\n            })\r\n            .catch(err => {\r\n              console.log(err);\r\n            });\r\n        } else {\r\n          console.log('9999999999');\r\n          console.log(this.dataPeerList);\r\n          console.log(this.keyword);\r\n          for (let item of this.dataPeerList) {\r\n            console.log('匹配');\r\n            console.log(item);\r\n            if (this.keyword !== '') {\r\n              if (item.name.indexOf(this.keyword) !== -1) {\r\n                item.value = item.name;\r\n                item.id = item.id;\r\n                item.CountryCn = item.country;\r\n              } else {\r\n                item.value = '';\r\n              }\r\n            } else {\r\n              item.value = item.name;\r\n            }\r\n          }\r\n          callback(this.dataPeerList);\r\n        }\r\n      },\r\n      handleSelect(item) {\r\n        console.log(\"restnhjnjn\");\r\n        console.log(item);\r\n        console.log(item.CountryCn);\r\n        console.log(item.id);\r\n        this.buy_storeId = 0;\r\n        this.buy_storeId = item.id;\r\n        this.country = item.CountryCn;\r\n        this.store = '';\r\n        this.store = item.value;\r\n        item.value = '';\r\n      },\r\n      // 新增贸易商\r\n      addPeerJump() {\r\n        this.dialogAddPeerVisible = true;\r\n      },\r\n      // 增加贸易商\r\n      addPeer() {\r\n        this.dialogAddPeerVisible = true;\r\n        this.name = '';\r\n        this.type = 0;\r\n        this.countryPrice = '中国香港'; // 国家\r\n        this.contactType = ''; // 联系方式\r\n        this.sellBrandList = []; // 所选择的主营品牌\r\n        this.sellBrand = ''; // 主营品牌\r\n      },\r\n      // 获取所有国家\r\n      handleCountry() {\r\n        this.$axios.post(this.$store.state.baseUrl + '/CountryGet').then((res) => {\r\n          console.log('所有国家');\r\n          console.log(res);\r\n          this.countryList = res.data;\r\n        }).catch((err) => {\r\n          console.log(err);\r\n        })\r\n      },\r\n      // 获取所有品牌\r\n      handleBrand() {\r\n        this.$axios.post(this.$store.state.baseUrl + '/DataWatchBrandList').then((res) => {\r\n          console.log('品牌列表');\r\n          console.log(res);\r\n          this.watchBrandList = res.data;\r\n        })\r\n      },\r\n      // 提交前数据的验证\r\n      sellBrandChange() {\r\n        // 主营品牌\r\n        console.log(this.sellBrandList);\r\n        this.sellBrand = this.sellBrandList.join('|');\r\n        console.log(this.sellBrand);\r\n        if (this.name == '' || this.countryPrice == '' || this.sellBrand == '') {\r\n          this.$message.error({\r\n            message: '数据不能为空，请检查数据填写',\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n          return 1;\r\n        }\r\n      },\r\n      // 确定增加贸易商\r\n      surePeerAdd() {\r\n        if (this.sellBrandChange() !== 1) {\r\n          const loading = this.$loading({\r\n            lock: true,\r\n            text: '数据提交中...',\r\n            spinner: 'el-icon-loading',\r\n            background: 'rgba(0, 0, 0, 0.7)'\r\n          });\r\n          this.$axios.post(this.$store.state.baseUrl + '/DataPeerSave', {\r\n            name: this.name,\r\n            type: this.type,\r\n            country: this.countryPrice,\r\n            contactType: this.contactType,\r\n            sellBrand: this.sellBrand\r\n          }).then((res) => {\r\n            console.log('增加贸易商');\r\n            console.log(res);\r\n            this.buy_storeId = res.data.id;\r\n            this.store = res.data.name;\r\n            this.keyword = res.data.name;\r\n            this.country = res.data.country;\r\n            this.price();\r\n            this.$message.success({\r\n              message: '新增贸易商成功',\r\n              showClose: true,\r\n              duration: 2000\r\n            });\r\n            this.dialogAddPeerVisible = false;\r\n            loading.close();\r\n          }).catch((err) => {\r\n            loading.close();\r\n            this.$message.error({\r\n              message: err.data.message,\r\n              showClose: true,\r\n              duration: 2000\r\n            })\r\n          })\r\n        }\r\n      },\r\n      // 添加手表\r\n      addWatch() {\r\n        console.log(this.buy_date);\r\n        console.log(this.store);\r\n        if (this.buy_date == null) {\r\n          this.$message.error({\r\n            message: \"采购日期不能为空\",\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n        } else if (this.store == \"\" || this.store == undefined) {\r\n          this.$message.error({\r\n            message: \"贸易商不能为空\",\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n        } else {\r\n          this.dialogFormVisible = true;\r\n        };\r\n        this.price();\r\n        this.watch = {};\r\n        this.buy_watchPrice = \"\";\r\n        this.buy_watchSn = \"\";\r\n        this.accessory = [];\r\n        this.buy_watchParts = '';\r\n        this.buy_watchBand = \"\";\r\n        this.buy_watchBrand = \"\";\r\n        this.buy_watchModel = \"\";\r\n      },\r\n      // 手表型号\r\n      fetchSuggestions(queryString, callback) {\r\n        this.$axios\r\n          .post(this.$store.state.baseUrl + \"/WatchSearch\", {\r\n            keyword: this.model\r\n          }).then(res => {\r\n            console.log(res);\r\n            for (let item of res.data) {\r\n              item.value = item.brand + \"-\" + item.model;\r\n              item.id = item.id;\r\n              item.brand = item.brand;\r\n              item.model = item.model;\r\n              item.pics = item.pics;\r\n            }\r\n            this.models = res.data;\r\n            callback(this.models);\r\n          });\r\n      },\r\n      handleModel(item) {\r\n        this.buy_watchId = item.id;\r\n        this.myBrand = item.brand;\r\n        this.myModel = item.model;\r\n        this.value = item.value;\r\n        console.log(item);\r\n        if (item.pics !== null) {\r\n          this.imgSels = item.pics.split('|')[0];\r\n        } else {\r\n          this.imgSels = [];\r\n        }\r\n      },\r\n      // 采购价格\r\n      watchprice() {\r\n        if (this.buy_watchPrice < 0) {\r\n          this.$message.error({\r\n            message: '价格不能为负，请重新输入',\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n        }\r\n      },\r\n      // 价格币种\r\n      price() {\r\n        this.$axios.post(this.$store.state.baseUrl + \"/CountryGet\").then(res => {\r\n          console.log('价格币种');\r\n          console.log(res);\r\n          console.log(this.country);\r\n          for (let item of res.data) {\r\n            // console.log(this.country);\r\n            if (this.country == item.cnName) {\r\n              this.buy_watchCurrency = item.enCurrency;\r\n            }\r\n          }\r\n        });\r\n      },\r\n      // 验证数据是否为空\r\n      verify() {\r\n        console.log(\"111\");\r\n        console.log(this.buy_date);\r\n        if (this.buy_watchId == \"\") {\r\n          this.$message.error({\r\n            message: \"手表型号不能为空\",\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n          return 1;\r\n        } else if (this.buy_watchPrice == \"\") {\r\n          this.$message.error({\r\n            message: \"采购价格不能为空\",\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n          return 1;\r\n        } else {\r\n          return 2;\r\n        }\r\n      },\r\n      // 确认保存手表信息\r\n      messageSure() {\r\n        if (this.verify() == 2) {\r\n          // console.log(this.accessory);\r\n          // this.buy_watchParts = '';\r\n          for (let item of this.accessory) {\r\n            this.buy_watchParts += item + \"|\";\r\n          }\r\n          if (\r\n            this.buy_watchId == \"\" ||\r\n            this.buy_watchPrice == \"\" ||\r\n            this.buy_watchCurrency == \"\" ||\r\n            this.buy_watchSn == \"\" ||\r\n            this.buy_watchCard == \"\" ||\r\n            this.buy_watchParts == \"\" ||\r\n            this.buy_watchBand == \"\" ||\r\n            this.buy_watchBrand == \"\" ||\r\n            this.buy_watchModel == \"\"\r\n          ) {\r\n            this.buy_watchState = 0;\r\n          } else {\r\n            this.buy_watchState = 1;\r\n          }\r\n          this.watch = {\r\n            buy_watchId: this.buy_watchId,\r\n            buy_watchPrice: this.buy_watchPrice,\r\n            buy_watchCurrency: this.buy_watchCurrency,\r\n            buy_watchSn: this.buy_watchSn,\r\n            buy_watchCard: this.shellDate(this.buy_watchCard),\r\n            buy_watchParts: this.buy_watchParts,\r\n            buy_watchBand: this.buy_watchBand,\r\n            buy_watchBrand: this.myBrand,\r\n            buy_watchModel: this.myModel,\r\n            buy_watchState: this.buy_watchState,\r\n            buy_pics: this.imgSels\r\n            // buy_watchpics: this.$store.state.imgUrl\r\n          };\r\n          this.watchList.push(this.watch);\r\n          // console.log(this.watchList);\r\n          // console.log(this.shellDate(this.buy_date));\r\n          this.watch = {};\r\n          this.dialogFormVisible = false;\r\n          this.buy_watchPrice = \"\";\r\n          this.buy_watchSn = \"\";\r\n          this.accessory = [];\r\n          this.buy_watchParts = '';\r\n          this.buy_watchBand = \"\";\r\n          this.buy_watchBrand = \"\";\r\n          this.buy_watchModel = \"\";\r\n          console.log(this.pics);\r\n        }\r\n      },\r\n      // 修改手表信息\r\n      updateWatch(item, index) {\r\n        console.log(item);\r\n        console.log(index);\r\n        this.updateIndex = index;\r\n        this.dialogUpdateWatchVisible = true;\r\n        this.model = item.buy_watchBrand + '-' + item.buy_watchModel;\r\n        this.buy_watchPrice = item.buy_watchPrice;\r\n        this.buy_watchSn = item.buy_watchSn;\r\n        this.buy_watchCard = item.buy_watchCard;\r\n        this.accessory = item.buy_watchParts.split(\"|\");\r\n        this.buy_watchBand = item.buy_watchBand;\r\n      },\r\n      // 确认修改\r\n      messageSureUpdate() {\r\n        for (let item of this.accessory) {\r\n          this.buy_watchParts += item + \"|\";\r\n        }\r\n        if (\r\n          this.buy_watchId == \"\" ||\r\n          this.buy_watchPrice == \"\" ||\r\n          this.buy_watchCurrency == \"\" ||\r\n          this.buy_watchSn == \"\" ||\r\n          this.buy_watchCard == \"\" ||\r\n          this.buy_watchParts == \"\" ||\r\n          this.buy_watchBand == \"\" ||\r\n          this.buy_watchBrand == \"\" ||\r\n          this.buy_watchModel == \"\"\r\n        ) {\r\n          this.buy_watchState = 0;\r\n        } else {\r\n          this.buy_watchState = 1;\r\n        }\r\n        this.watch = {\r\n          buy_watchId: this.buy_watchId,\r\n          buy_watchPrice: this.buy_watchPrice,\r\n          buy_watchCurrency: this.buy_watchCurrency,\r\n          buy_watchSn: this.buy_watchSn,\r\n          buy_watchCard: this.shellDate(this.buy_watchCard),\r\n          buy_watchParts: this.buy_watchParts,\r\n          buy_watchBand: this.buy_watchBand,\r\n          buy_watchBrand: this.myBrand,\r\n          buy_watchModel: this.myModel,\r\n          buy_watchState: this.buy_watchState,\r\n          buy_pics: this.imgSels\r\n          // buy_watchpics: this.$store.state.imgUrl\r\n        };\r\n        this.watchList.splice(this.updateIndex, 1, this.watch);\r\n        // console.log(this.watchList);\r\n        // console.log(this.shellDate(this.buy_date));\r\n        this.watch = {};\r\n        this.dialogUpdateWatchVisible = false;\r\n        this.buy_watchPrice = \"\";\r\n        this.buy_watchSn = \"\";\r\n        this.accessory = [];\r\n        this.buy_watchParts = \"\";\r\n        this.buy_watchBand = \"\";\r\n        this.buy_watchBrand = \"\";\r\n        this.buy_watchModel = \"\";\r\n        console.log(this.pics);\r\n      },\r\n      // 验证额外表带数\r\n      waychbandInput() {\r\n        if (Math.floor(this.buy_watchBand) !== Number(this.buy_watchBand)) {\r\n          this.$message.error({\r\n            message: '输入内容只能为整型数字',\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n        }\r\n      },\r\n      // 删除手表信息\r\n      del(index) {\r\n        console.log(\"222222222\");\r\n        console.log(index);\r\n        this.delid = index;\r\n        this.centerDialogVisible = true;\r\n      },\r\n      delMessage() {\r\n        this.watchList.splice(this.delid, 1);\r\n        this.pics.splice(this.delid, 1);\r\n        this.centerDialogVisible = false;\r\n      },\r\n      // 提交\r\n      submitWatches() {\r\n        if (this.buy_watch.length == 0) {\r\n          this.$message.error({\r\n            message: '请添加手表信息',\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n          return 1;\r\n        }\r\n      },\r\n      submitPurchase() {\r\n        this.buy_watch = this.watchList;\r\n        if (this.submitWatches() !== 1) {\r\n          const loading = this.$loading({\r\n            lock: true,\r\n            text: '数据提交中...',\r\n            spinner: 'el-icon-loading',\r\n            background: 'rgba(0, 0, 0, 0.7)'\r\n          });\r\n          console.log(this.buy_storeId);\r\n          this.$axios\r\n            .post(this.$store.state.baseUrl + \"/BuyOrderInsert\", {\r\n              buy_date: this.shellDate(this.buy_date),\r\n              buy_storeId: this.buy_storeId,\r\n              buy_watch: this.buy_watch\r\n            })\r\n            .then(res => {\r\n              console.log('添加采购单');\r\n              console.log(res);\r\n              this.watchid = res.data.buy_id;\r\n              loading.close();\r\n              sessionStorage.setItem(\"buy_id\", \"\");\r\n              sessionStorage.setItem(\"buy_id\", res.data.buy_id);\r\n              console.log(\"zzzz\");\r\n              console.log(sessionStorage.getItem(\"buy_id\"));\r\n              this.addDialog = true;\r\n            }).catch((err) => {\r\n              loading.close();\r\n              this.$message.error({\r\n                message: err.data.message,\r\n                showClose: true,\r\n                duration: 2000\r\n              })\r\n            })\r\n        }\r\n      },\r\n      // 添加新的采购单\r\n      addNew() {\r\n        this.addDialog = false;\r\n        this.buy_date = new Date();\r\n        this.keyword = '';\r\n        this.model = '';\r\n        this.buy_watchCurrency = '';\r\n        this.watchList = [];\r\n        // 页面回到顶部\r\n        (function smoothscroll() {\r\n          var currentScroll =\r\n            document.documentElement.scrollTop || document.body.scrollTop;\r\n          if (currentScroll > 0) {\r\n            window.requestAnimationFrame(smoothscroll);\r\n            window.scrollTo(0, currentScroll - currentScroll / 5);\r\n          }\r\n        })();\r\n      },\r\n      // 完善该采购单信息\r\n      complete() {\r\n        this.addDialog = false;\r\n        this.purchaseSelect.nums = 1;\r\n        // 页面回到顶部\r\n        (function smoothscroll() {\r\n          var currentScroll =\r\n            document.documentElement.scrollTop || document.body.scrollTop;\r\n          if (currentScroll > 0) {\r\n            window.requestAnimationFrame(smoothscroll);\r\n            window.scrollTo(0, currentScroll - currentScroll / 5);\r\n          }\r\n        })();\r\n      }\r\n    }\r\n  };\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .purchase-container {\r\n    width: 100%;\r\n\r\n    .purchase-center {\r\n      width: 100%;\r\n      margin: 0 auto;\r\n      // margin-top: 50px;\r\n\r\n      .purchase-form {\r\n        width: 95%;\r\n        margin: 0 auto;\r\n        padding: 50px 0 30px 0;\r\n        background-color: #fff;\r\n        border-radius: 15px;\r\n\r\n        .purchase {\r\n          width: 90%;\r\n          margin: 0 auto;\r\n\r\n          .pruducts-list {\r\n            padding-top: 20px;\r\n\r\n            .table-th {\r\n              // padding-bottom: 20px;\r\n              color: #000;\r\n              font-size: 17px;\r\n              font-weight: normal;\r\n            }\r\n\r\n            td {\r\n              padding: 20px;\r\n              background-color: #f3fbf9;\r\n              font-size: 15px;\r\n            }\r\n\r\n            .first-td {\r\n              // padding: 30px;\r\n              border-top-left-radius: 30px;\r\n              border-bottom-left-radius: 30px;\r\n            }\r\n\r\n            .last-td {\r\n              border-top-right-radius: 30px;\r\n              border-bottom-right-radius: 30px;\r\n            }\r\n          }\r\n\r\n          .add {\r\n            width: 144px;\r\n            height: 48px;\r\n            margin: 20px 0;\r\n            line-height: 48px;\r\n            border-radius: 6px;\r\n            text-align: center;\r\n            cursor: pointer;\r\n            background-color: #0c7063;\r\n\r\n            .add-style {\r\n              display: inline-block;\r\n              font-size: 16px;\r\n              color: #fff;\r\n            }\r\n          }\r\n\r\n          .top-search-button {\r\n            width: 110px;\r\n            height: 48px;\r\n            margin-top: 20px;\r\n            background-color: #0c7063;\r\n            color: #fff;\r\n            outline: none;\r\n            border: none;\r\n            border-radius: 6px;\r\n            font-size: 16px;\r\n            cursor: pointer;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .input-style {\r\n      width: 60% !important;\r\n    }\r\n\r\n    .accessories {\r\n      width: 90%;\r\n    }\r\n  }\r\n\r\n  .input-style {\r\n    width: 60%;\r\n  }\r\n\r\n  table {\r\n    width: 100%;\r\n    border-collapse: separate;\r\n    border-spacing: 0;\r\n  }\r\n\r\n  tr {\r\n\r\n    th,\r\n    td {\r\n      width: 21%;\r\n      text-align: center;\r\n    }\r\n  }\r\n</style>\r\n<style lang=\"scss\">\r\n  #peer-container {\r\n    .buy_watchBand {\r\n      right: 10%;\r\n    }\r\n\r\n    .el-form-item .el-form-item {\r\n      margin-bottom: 20px;\r\n    }\r\n\r\n    .el-date-editor.el-input,\r\n    .el-date-editor.el-input__inner {\r\n      width: 60%;\r\n    }\r\n\r\n    .el-autocomplete {\r\n      width: 60%;\r\n    }\r\n\r\n    .el-form-item__label {\r\n      width: 10%;\r\n    }\r\n\r\n    .el-input__suffix {\r\n      width: 15%;\r\n    }\r\n\r\n    .el-input__inner {\r\n      height: 45px;\r\n      border-radius: 30px;\r\n    }\r\n\r\n    .el-input__prefix,\r\n    .el-input__suffix {\r\n      top: 2px;\r\n    }\r\n\r\n    .el-dialog--center .el-dialog__footer {\r\n      text-align: center;\r\n    }\r\n  }\r\n</style>"]}]}