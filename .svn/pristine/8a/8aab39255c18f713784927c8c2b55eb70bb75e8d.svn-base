{"remainingRequest":"D:\\aa-tong\\my-projects\\watches\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\aa-tong\\my-projects\\watches\\src\\components\\message\\Rate-query.vue?vue&type=style&index=0&id=9c707d5a&lang=scss&scoped=true&","dependencies":[{"path":"D:\\aa-tong\\my-projects\\watches\\src\\components\\message\\Rate-query.vue","mtime":1597654896756},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\watches\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnJhdGUtcXVlcnktY29udGFpbmVyIHsKICB3aWR0aDogMTAwJTsKCiAgLnJhdGUtcXVlcnkgewogICAgd2lkdGg6IDk1JTsKICAgIG1hcmdpbjogMCBhdXRvOwoKICAgIC5yYXRlLXF1ZXJ5LXRvcCB7CiAgICAgIHdpZHRoOiA5NSU7CiAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICBwYWRkaW5nOiAyMHB4IDQwcHg7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICAgICAgYm9yZGVyLXJhZGl1czogMzBweDsKICAgIH0KCiAgICAucmF0ZS1xdWVyeS1jZW50ZXIgewogICAgICBtYXJnaW46IDIwcHggMDsKICAgICAgcGFkZGluZzogMjBweCAzMHB4OwogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogICAgICBib3JkZXItcmFkaXVzOiAzMHB4OwoKICAgICAgdGggewogICAgICAgIGhlaWdodDogNTBweDsKICAgICAgICBsaW5lLWhlaWdodDogNTBweDsKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDdlYmU3OwogICAgICB9CgogICAgICB0ZCB7CiAgICAgICAgcGFkZGluZzogMjBweDsKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjNmYmY5OwogICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZDdlYmU3OwoKICAgICAgICAuZnJlaWdodC1pbnB1dCB7CiAgICAgICAgICB3aWR0aDogNDAlOwogICAgICAgICAgaGVpZ2h0OiA0MHB4OwogICAgICAgICAgYm9yZGVyOiAwOwogICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7CiAgICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICAuZ29iYWNrIHsKICAgIHdpZHRoOiA5NSU7CiAgICBtYXJnaW46IDAgYXV0bzsKCiAgICAuYmFjay1pbWcgewogICAgICB3aWR0aDogNzVweDsKICAgICAgaGVpZ2h0OiA0NXB4OwogICAgICBsaW5lLWhlaWdodDogNDVweDsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICBjdXJzb3I6IHBvaW50ZXI7CgogICAgICBkaXYgewogICAgICAgIG1hcmdpbi10b3A6IDVweDsKCiAgICAgICAgaW1nIHsKICAgICAgICAgIHdpZHRoOiAzMHB4OwogICAgICAgICAgaGVpZ2h0OiAyNXB4OwogICAgICAgIH0KICAgICAgfQoKICAgICAgLmZvbnQgewogICAgICAgIGZvbnQtc2l6ZTogMTdweDsKICAgICAgfQogICAgfQogIH0KCiAgLnJhdGUtY2FsYyB7CiAgICAvLyB3aWR0aDogODAlOwogICAgLy8gbWFyZ2luOiAwIGF1dG87CiAgICAvLyBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogICAgLy8gYm9yZGVyLXJhZGl1czogMzBweDsKCiAgICAuY2FsYy10b3AgewogICAgICAvLyB3aWR0aDogNTAlOwogICAgICBtYXJnaW46IDAgYXV0bzsKICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwoKICAgICAgLmNhbGMtYnV0dG9uIHsKICAgICAgICB3aWR0aDogMTEwcHg7CiAgICAgICAgaGVpZ2h0OiA0MHB4ICFpbXBvcnRhbnQ7CiAgICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7CiAgICAgICAgZm9udC1zaXplOiAxNHB4ICFpbXBvcnRhbnQ7CiAgICAgIH0KICAgIH0KCiAgICAuY2FsYy1jZW50ZXIgewogICAgICB3aWR0aDogNzAlOwogICAgICBtYXJnaW46IDMwcHggYXV0bzsKICAgICAgbWFyZ2luLWJvdHRvbTogMDsKICAgICAgcGFkZGluZzogMCAzMHB4OwogICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICBib3JkZXItcmFkaXVzOiAzMHB4OwogICAgfQoKICAgIC5jYWxjLWJvdHRvbSB7CiAgICAgIC8vIHdpZHRoOiA2MCU7CiAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICBwYWRkaW5nOiAzMHB4OwogICAgfQogIH0KfQoKLmlucHV0LXN0eWxlIHsKICB3aWR0aDogOTAlOwp9Cgp0YWJsZSB7CiAgd2lkdGg6IDEwMCU7CiAgYm9yZGVyLWNvbGxhcHNlOiBzZXBhcmF0ZTsKICBib3JkZXItc3BhY2luZzogMDsKfQoKdHIgewoKICB0aCwKICB0ZCB7CiAgICB3aWR0aDogMjAlOwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogIH0KfQo="},{"version":3,"sources":["Rate-query.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+nBA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Rate-query.vue","sourceRoot":"src/components/message","sourcesContent":["<template>\r\n  <div class=\"rate-query-container\">\r\n    <!-- <h3>汇率查询页面</h3> -->\r\n    <div class=\"rate-query\" v-if=\"rateQuerySel.select == 0\">\r\n      <div class=\"rate-query-top\">\r\n        <div>\r\n          <span>日期：</span>\r\n          <el-date-picker v-model=\"time\" type=\"date\" style=\"width:230px\" @change=\"dateChange\" value-format=\"yyyy-MM-dd\">\r\n          </el-date-picker>\r\n        </div>\r\n        <div v-show=\"rateAuthority[9] == 1\" style=\"display: flex;cursor: pointer;\" @click=\"rateCalc\">\r\n          <img src=\"../../assets/imgs/calc.png\" style=\"height: 45px;\" />\r\n        </div>\r\n        <el-dialog title=\"价格计算器\" :visible.sync=\"dialogCalcVisible\" center :close-on-press-escape=\"false\"\r\n          :close-on-click-modal=\"false\">\r\n          <div class=\"rate-calc\">\r\n            <div class=\"calc-top\">\r\n              <div>\r\n                <el-date-picker v-model=\"calcTime\" type=\"date\" style=\"width: 50%;\" @change=\"dateChange2\"\r\n                  value-format=\"yyyy-MM-dd\">\r\n                </el-date-picker>\r\n                <el-button type=\"primary\" @click=\"handleRateCalcResult\" class=\"calc-button\">计算</el-button>\r\n              </div>\r\n              <p style=\"width: 40%;margin: 20px auto;text-align: left;\">\r\n                <span>{{1 + ' ' + selectCurrency + ' = '}}</span>\r\n                <span>{{selectRate + ' CNY'}}</span>\r\n              </p>\r\n              <p style=\"width: 40%;margin: 0 auto;text-align: left;\">\r\n                <span>{{1 + ' CNY' + ' = '}}</span>\r\n                <span>{{selectHKD + ' HKD'}}</span>\r\n              </p>\r\n            </div>\r\n            <div class=\"calc-center\">\r\n              <h4 style=\"margin-bottom: 0;\">结果：</h4>\r\n              <div>\r\n                <div style=\"display: flex;\">\r\n                  <p style=\"width: 130px;margin-top: 0;text-align: right;\">税后价格：</p>\r\n                  <span>{{VATInc}}</span>\r\n                </div>\r\n                <div style=\"display: flex;\">\r\n                  <p style=\"width: 130px;margin-top: 0;text-align: right;\">最终人民币：</p>\r\n                  <span>{{CNYFinal}}</span>\r\n                </div>\r\n                <div style=\"display: flex;\">\r\n                  <p style=\"width: 130px;margin-top: 0;text-align: right;\">最终港币：</p>\r\n                  <span>{{HKDFinal}}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"calc-bottom\">\r\n              <el-form label-width=\"100px\">\r\n                <el-form-item label=\"地区：\">\r\n                  <div style=\"display: flex;\">\r\n                    <el-select class=\"input-style\" v-model=\"country\" @change=\"countryChange\">\r\n                      <el-option v-for=\"(item,index) in countryList\" :key=\"index\" :label=\"item.cnName\"\r\n                        :value=\"item.cnName\">\r\n                      </el-option>\r\n                    </el-select>\r\n                    <div style=\"margin-top: 10px;margin-left: 5px;\">\r\n                      <img src=\"../../assets/imgs/position.png\" style=\"width: 25px;height: 25px;cursor: pointer;\"\r\n                        @click=\"countryPosition\" />\r\n                    </div>\r\n                  </div>\r\n                </el-form-item>\r\n                <el-form-item label=\"价格：\">\r\n                  <el-input v-model=\"price\" class=\"input-style\" placeholder=\"请输入\">\r\n                    <i slot=\"suffix\" style=\"color: #000;margin-right:5%;font-style:normal;\">{{selectCurrency}}</i>\r\n                  </el-input>\r\n                </el-form-item>\r\n              </el-form>\r\n              <el-form :inline=\"true\" label-width=\"100px\">\r\n                <el-form-item label=\"退税：\">\r\n                  <el-radio-group v-model=\"rateSymbol\">\r\n                    <el-radio label=\"x\"></el-radio>\r\n                    <el-radio label=\"÷\"></el-radio>\r\n                  </el-radio-group>\r\n                </el-form-item>\r\n                <el-form-item label=\"\">\r\n                  <el-input v-model=\"rateNum\" placeholder=\"请输入\" class=\"input-style\"></el-input>\r\n                </el-form-item>\r\n              </el-form>\r\n              <el-form label-width=\"100px\">\r\n                <el-form-item label=\"退税折损：\">\r\n                  <el-input v-model=\"breakage\" class=\"input-style\">\r\n                    <i slot=\"suffix\" style=\"color: #000;margin-right:5%;font-style:normal;\">%</i>\r\n                  </el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"折扣：\">\r\n                  <el-input v-model=\"discount\" class=\"input-style\">\r\n                    <i slot=\"suffix\" style=\"color: #000;margin-right:5%;font-style:normal;\">个点</i>\r\n                  </el-input>\r\n                </el-form-item>\r\n              </el-form>\r\n            </div>\r\n          </div>\r\n          <div slot=\"footer\">\r\n            <el-button @click=\"dialogCalcVisible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"dialogCalcVisible = false\">确 定</el-button>\r\n          </div>\r\n        </el-dialog>\r\n      </div>\r\n      <div>\r\n        <div v-show=\"dataRateList.length !== 0\">\r\n          <p>银行汇率：<span>{{time1}}</span></p>\r\n          <div class=\"rate-query-center\">\r\n            <table>\r\n              <tr>\r\n                <th>币种</th>\r\n                <th>汇率</th>\r\n                <th>操作</th>\r\n              </tr>\r\n              <tr v-for=\"(rate,index) in dataRateList\" :key=\"index\">\r\n                <td v-show=\"rate.type == 0\">\r\n                  {{rate.currencyCn + ' ' + rate.currencyEn}}\r\n                </td>\r\n                <td v-show=\"rate.type == 0\">\r\n                  <span>{{rate.rate}}</span>\r\n                  <img v-show=\"rate.change !== 0\" :src=\"rate.change == 1 ? img1 : img2\"\r\n                    style=\"width: 25px;height: 25px;\" />\r\n                </td>\r\n                <td v-show=\"rate.type == 0\">\r\n                  <el-tooltip class=\"item\" effect=\"light\" content=\"查看汇率变化曲线图\" placement=\"top-end\">\r\n                    <img :src=\"rate.change == 1 ? upImg : (rate.change == -1 ? downImg : noImg)\" style=\"cursor:pointer;\"\r\n                      @click=\"rateLine(rate.type,rate.currencyEn)\" />\r\n                  </el-tooltip>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n          </div>\r\n          <p>钱庄汇率：<span>{{time2}}</span></p>\r\n          <div class=\"rate-query-center\">\r\n            <table>\r\n              <tr>\r\n                <th>货币</th>\r\n                <th>汇率</th>\r\n                <th>操作</th>\r\n              </tr>\r\n              <tr v-for=\"(rate,index) in dataRateList\" :key=\"index\">\r\n                <td v-if=\"rate.type == 2\">\r\n                  {{rate.currencyCn + ' -> ' + '人民币'}}\r\n                </td>\r\n                <td v-if=\"rate.type == 2\">\r\n                  <div style=\"display: flex;justify-content: center;\">\r\n                    <div style=\"display: flex;justify-content: center;\">\r\n                      <input type=\"text\" v-model=\"rate.rate\" class=\"freight-input\"\r\n                        :readonly=\"rateAuthority[8] == 1 ? false : true\" @change=\"rateInput($event)\" />\r\n                      <div style=\"margin-top: 15px;margin-left: 5px;cursor: pointer;\">\r\n                        <img src=\"../../assets/imgs/preserve.png\" v-if=\"rateAuthority[8] == 1\"\r\n                          @click=\"rateInputChange\" />\r\n                      </div>\r\n                    </div>\r\n                    <div style=\"margin-top: 10px;\">\r\n                      <img v-show=\"rate.change !== 0\" :src=\"rate.change == 1 ? img1 : img2\"\r\n                        style=\"width: 25px;height: 25px;margin-left: 5px;\" />\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td v-if=\"rate.type == 2\">\r\n                  <el-tooltip class=\"item\" effect=\"light\" content=\"查看汇率变化曲线图\" placement=\"top-end\">\r\n                    <img :src=\"rate.change == 1 ? upImg : (rate.change == -1 ? downImg : noImg)\" style=\"cursor:pointer;\"\r\n                      @click=\"rateLine(rate.type,rate.currencyEn)\" />\r\n                  </el-tooltip>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n          </div>\r\n          <p>现钞汇率</p>\r\n          <div class=\"rate-query-center\">\r\n            <table>\r\n              <tr>\r\n                <th>货币</th>\r\n                <th>买入价</th>\r\n                <th>卖出价</th>\r\n                <th>操作</th>\r\n              </tr>\r\n              <tr v-for=\"(rate,index) in dataRateList\" :key=\"index\">\r\n                <td v-show=\"rate.currencyCn !== '港币' && rate.type == 0\">\r\n                  {{rate.currencyCn + ' -> ' + '港币'}}\r\n                </td>\r\n                <td v-show=\"rate.currencyCn !== '港币' && rate.type == 0\">\r\n                  <span>{{(rate.rate/moneyShopRate).toFixed(5)}}</span>\r\n                </td>\r\n                <td v-show=\"rate.currencyCn !== '港币' && rate.type == 0\">\r\n                  <span>{{(Number(rate.rate/moneyShopRate + 0.003)).toFixed(5)}}</span>\r\n                </td>\r\n                <td v-show=\"rate.currencyCn !== '港币' && rate.type == 0\">\r\n                  <el-tooltip class=\"item\" effect=\"light\" content=\"查看汇率变化曲线图\" placement=\"top-end\">\r\n                    <img src=\"../../assets/imgs/line.png\" style=\"cursor:pointer;\"\r\n                      @click=\"rateLineOof(rate.currencyEn)\" />\r\n                  </el-tooltip>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"rateQuerySel.select == 1\">\r\n      <div class=\"goback\">\r\n        <div class=\"back-img\" @click=\"gobackList\">\r\n          <div>\r\n            <img src=\"../../assets/imgs/goback.png\" />\r\n          </div>\r\n          <span class=\"font\">返回</span>\r\n        </div>\r\n      </div>\r\n      <div id=\"myChart\" style=\"width: 95%;height: 500px;margin: 0 auto;margin-top: 50px;\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        img1: require('../../assets/imgs/upPrice.png'),\r\n        img2: require('../../assets/imgs/downPrice.png'),\r\n        upImg: require('../../assets/imgs/up-line.png'),\r\n        noImg: require('../../assets/imgs/line.png'),\r\n        downImg: require('../../assets/imgs/down-line.png'),\r\n        time: '',\r\n        dataRateList: [],\r\n        dataRateHistoryList: [],\r\n        xList: [],\r\n        yList: [],\r\n        yList2: [],\r\n        updateRate: 0,\r\n        moneyShopRate: 0,\r\n        dialogCalcVisible: false,\r\n        calcRateList: [],\r\n        calcTime: '',\r\n        selectCurrency: '',\r\n        selectRate: '',\r\n        selectHKD: '',\r\n        VATInc: '', // 税后价格\r\n        CNYFinal: '', // 最终人民币\r\n        HKDFinal: '', // 最终港币\r\n        countryList: [],\r\n        country: '', // 国家\r\n        price: '', // 价格\r\n        rateSymbol: '', // 退税运算符号\r\n        rateNum: '', // 退税数值\r\n        breakage: 10, // 退税折损\r\n        discount: 0, // 折扣\r\n\r\n        time1: '',\r\n        time2: '',\r\n        moneyShopHistory: [],\r\n        rateAuthority: [],\r\n\r\n      }\r\n    },\r\n    props: [\"rateQuerySel\"],\r\n    created() {\r\n      this.role = sessionStorage.getItem('role');\r\n      this.rateAuthority = sessionStorage.getItem('authority').split('|');\r\n      this.handleDataRatesGet();\r\n      this.handleCountryGet();\r\n    },\r\n    methods: {\r\n      // 时间查询汇率\r\n      handleDataRatesGet() {\r\n        console.log(this.time);\r\n        this.dataRateList = [];\r\n        this.$axios.post(this.$store.state.baseUrl + '/DataRatesGet?java', {\r\n          time: this.time\r\n        }).then((res) => {\r\n          console.log('时间查询汇率');\r\n          console.log(res);\r\n          // this.time = res.data.time;\r\n          this.dataRateList = res.data;\r\n          for (let item of this.dataRateList) {\r\n            if (item.type === 2) {\r\n              this.moneyShopRate = item.rate;\r\n              this.time2 = item.time;\r\n              if (this.time !== '') {\r\n                if (item.time !== this.time) {\r\n                  this.$message.warning({\r\n                    message: '此日期汇率数据不完整，已为您展示最近完整数据',\r\n                    showClose: true,\r\n                    duration: 5000\r\n                  })\r\n                };\r\n              };\r\n            } else if (item.type === 0) {\r\n              this.time1 = item.time;\r\n            }\r\n          };\r\n          console.log(this.moneyShopRate);\r\n        }).catch((err) => {\r\n          console.log(err);\r\n        })\r\n      },\r\n      // 汇率查询\r\n      dateChange() {\r\n        this.dataRateList = [];\r\n        this.handleDataRatesGet();\r\n      },\r\n      // 钱庄汇率改变\r\n      rateInput(e) {\r\n        console.log(e.target.value);\r\n        this.updateRate = e.target.value;\r\n      },\r\n      // 确定修改钱庄汇率\r\n      rateInputChange() {\r\n        let date = new Date();\r\n        let y = date.getFullYear();\r\n        let m = date.getMonth() + 1;\r\n        let d = date.getDate();\r\n        m = m < 10 ? ('0' + m) : m;\r\n        d = d < 10 ? ('0' + d) : d;\r\n        let times = y + '-' + m + '-' + d;\r\n        this.$axios.post(this.$store.state.baseUrl + '/DataRateSave?java', {\r\n          time: times,\r\n          rate: this.updateRate\r\n        }).then((res) => {\r\n          console.log('修改钱庄汇率');\r\n          console.log(res);\r\n          this.$message.success({\r\n            message: '汇率修改成功',\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.handleDataRatesGet();\r\n          (function smoothscroll() {\r\n            var currentScroll =\r\n              document.documentElement.scrollTop || document.body.scrollTop;\r\n            if (currentScroll > 0) {\r\n              window.requestAnimationFrame(smoothscroll);\r\n              window.scrollTo(0, currentScroll - currentScroll / 5);\r\n            }\r\n          })();\r\n        }).catch((err) => {\r\n          console.log(err);\r\n        })\r\n      },\r\n      // 币种历史汇率\r\n      rateLine(type, currency) {\r\n        console.log(type, currency);\r\n        this.dataRateHistoryList = [];\r\n        this.xList = [];\r\n        this.yList = [];\r\n        (function smoothscroll() {\r\n          var currentScroll =\r\n            document.documentElement.scrollTop || document.body.scrollTop;\r\n          if (currentScroll > 0) {\r\n            window.requestAnimationFrame(smoothscroll);\r\n            window.scrollTo(0, currentScroll - currentScroll / 5);\r\n          }\r\n        })();\r\n        this.$axios.post(this.$store.state.baseUrl + '/DataRateHisGet?java', {\r\n          currency: currency,\r\n          type: type\r\n        }).then((res) => {\r\n          console.log('币种历史汇率');\r\n          console.log(res);\r\n          this.dataRateHistoryList = res.data;\r\n          for (let item of this.dataRateHistoryList) {\r\n            this.xList.push(item.time);\r\n            this.yList.push(item.rate);\r\n          };\r\n          // console.log(this.xList);\r\n          // console.log(this.yList);\r\n          this.rateQuerySel.select = 1;\r\n          // Vue 实现响应式并不是数据发生变化之后 DOM 立即变化，nextTick会保证其内的代码在DOM更新后执行\r\n          this.$nextTick(() => {\r\n            // 基于准备好的dom，初始化echarts实例\r\n            let myChart = this.$echarts.init(document.getElementById('myChart'));\r\n            myChart.resize();\r\n            // 绘制图表\r\n            myChart.setOption({\r\n              title: {\r\n                text: '汇率变化曲线图',\r\n                x: 'center'\r\n              },\r\n              tooltip: {},\r\n              xAxis: {\r\n                data: this.xList\r\n              },\r\n              yAxis: {},\r\n              series: [{\r\n                name: '汇率',\r\n                type: 'line',\r\n                data: this.yList\r\n              }]\r\n            });\r\n            window.addEventListener(\"resize\", function () {\r\n              myChart.resize();\r\n            })\r\n          })\r\n        }).catch((err) => {\r\n          console.log(err);\r\n        })\r\n      },\r\n      // 现钞历史汇率\r\n      rateLineOof(currency) {\r\n        console.log(currency);\r\n        this.moneyShopHistory = [];\r\n        this.xList = [];\r\n        this.yList = [];\r\n        this.yList2 = [];\r\n        (function smoothscroll() {\r\n          var currentScroll =\r\n            document.documentElement.scrollTop || document.body.scrollTop;\r\n          if (currentScroll > 0) {\r\n            window.requestAnimationFrame(smoothscroll);\r\n            window.scrollTo(0, currentScroll - currentScroll / 5);\r\n          }\r\n        })();\r\n        this.$axios.post(this.$store.state.baseUrl + '/DataRateHistory?java', {\r\n          currency: currency,\r\n        }).then((res) => {\r\n          console.log('现钞历史汇率');\r\n          console.log(res);\r\n          this.moneyShopHistory = res.data;\r\n          for (let item of this.moneyShopHistory) {\r\n            this.xList.push(item.time);\r\n            this.yList.push(Number(item.bankRate / item.underBankRate).toFixed(5));\r\n            this.yList2.push(Number((Number(item.bankRate / item.underBankRate) + 0.003)).toFixed(5));\r\n          };\r\n          this.rateQuerySel.select = 1;\r\n          (function smoothscroll() {\r\n            var currentScroll =\r\n              document.documentElement.scrollTop || document.body.scrollTop;\r\n            if (currentScroll > 0) {\r\n              window.requestAnimationFrame(smoothscroll);\r\n              window.scrollTo(0, currentScroll - currentScroll / 5);\r\n            }\r\n          })();\r\n          if (this.yList.length !== 0 && this.yList2.length !== 0) {\r\n            this.oofLine();\r\n          }\r\n        }).catch((err) => {\r\n          console.log(err);\r\n        })\r\n      },\r\n      // 现钞汇率变化曲线图\r\n      oofLine() {\r\n        // Vue 实现响应式并不是数据发生变化之后 DOM 立即变化，nextTick会保证其内的代码在DOM更新后执行\r\n        this.$nextTick(() => {\r\n          // 基于准备好的dom，初始化echarts实例\r\n          let myChart = this.$echarts.init(document.getElementById('myChart'));\r\n          myChart.resize();\r\n          // 绘制图表\r\n          myChart.setOption({\r\n            title: {\r\n              text: '汇率变化曲线图',\r\n              x: '10%'\r\n            },\r\n            tooltip: {\r\n              trigger: 'axis'\r\n            },\r\n            legend: {\r\n              x: '70%',\r\n              textStyle: {\r\n                color: '#000',\r\n                fontSize: '16px'\r\n              },\r\n              icon: 'rect',\r\n              itemWidth: 20,\r\n              itemHeight: 15,\r\n              data: ['买入价', '卖出价'],\r\n            },\r\n            xAxis: {\r\n              data: this.xList\r\n            },\r\n            yAxis: {},\r\n            series: [{\r\n                name: '买入价',\r\n                type: 'line',\r\n                data: this.yList\r\n              },\r\n              {\r\n                name: '卖出价',\r\n                type: 'line',\r\n                data: this.yList2\r\n              }\r\n            ]\r\n          });\r\n          window.addEventListener(\"resize\", function () {\r\n            myChart.resize();\r\n          })\r\n        })\r\n      },\r\n      // 返回列表页\r\n      gobackList() {\r\n        this.rateQuerySel.select = 0;\r\n      },\r\n      // 汇率计算器\r\n      rateCalc() {\r\n        this.calcTime = '';\r\n        this.dateChange2();\r\n\r\n        this.VATInc = ''; // 税后价格\r\n        this.CNYFinal = ''; // 最终人民币\r\n        this.HKDFinal = ''; // 最终港币\r\n        this.price = ''; // 价格\r\n        // this.rateSymbol = 'x'; // 退税运算符号\r\n        // this.rateNum = ''; // 退税数值\r\n        // this.breakage = 10; // 退税折损\r\n        // this.discount = 0; // 折扣\r\n\r\n        this.dialogCalcVisible = true;\r\n      },\r\n      // 计算器时间查询汇率\r\n      dateChange2() {\r\n        this.calcRateList = [];\r\n        this.$axios.post(this.$store.state.baseUrl + '/DataRatesGet?java', {\r\n          time: this.calcTime\r\n        }).then((res) => {\r\n          console.log('时间查询汇率');\r\n          console.log(res);\r\n          this.calcRateList = res.data;\r\n          for (let item of this.calcRateList) {\r\n            if (item.type == 2) {\r\n              console.log(item.rate);\r\n              this.selectHKD = Number(Number(1 / item.rate) + 0.003).toFixed(5);\r\n            } else if (item.type == 0) {\r\n              this.calcTime = item.time;\r\n            }\r\n          };\r\n          if (this.country !== '') {\r\n            this.countryChange();\r\n          };\r\n        }).catch((err) => {\r\n          console.log(err);\r\n        })\r\n      },\r\n      // 定位获得当前国家\r\n      countryPosition() {\r\n        console.log(navigator.geolocation);\r\n        if (navigator.geolocation) {\r\n          console.log(\"h5 定位中\");\r\n          navigator.geolocation.getCurrentPosition(function (position) {\r\n            if (typeof position.address !== \"undefined\") {\r\n              console.log('h5定位成功；');\r\n              this.country = position.address.country;\r\n              this.countryChange();\r\n            }\r\n            console.log(this.country);\r\n          }, function (error) {\r\n            console.log('h5定位失败；');\r\n          })\r\n        }\r\n      },\r\n      // 国家选择\r\n      countryChange() {\r\n        this.price = '';\r\n        this.VATInc = '';\r\n        this.CNYFinal = '';\r\n        this.HKDFinal = '';\r\n        for (let item of this.countryList) {\r\n          // console.log(item);\r\n          // console.log(this.country);\r\n          if (this.country == item.cnName) {\r\n            console.log('国家选择');\r\n            console.log(item);\r\n            this.selectCurrency = item.enCurrency;\r\n            if (item.taxType == 0) {\r\n              this.rateSymbol = 'x';\r\n            } else if (item.taxType == 1) {\r\n              this.rateSymbol = '÷';\r\n            } else {\r\n              this.rateSymbol = '';\r\n            };\r\n            if (item.taxRate == 0) {\r\n              this.rateNum = '';\r\n            } else {\r\n              this.rateNum = item.taxRate;\r\n            };\r\n          };\r\n          console.log(this.rateSymbol);\r\n        };\r\n        console.log(this.selectCurrency);\r\n        this.selectRate = 0;\r\n        for (let item of this.calcRateList) {\r\n          console.log(item);\r\n          if (item.currencyEn == this.selectCurrency) {\r\n            this.selectRate = item.rate;\r\n          };\r\n        };\r\n        if (this.country == '中国') {\r\n          this.selectRate = 1;\r\n        };\r\n        if (this.selectRate == 0) {\r\n          this.$message.error({\r\n            message: '暂无该地区此时间对应汇率',\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n        }\r\n        console.log(this.selectRate);\r\n      },\r\n      // 计算结果\r\n      handleRateCalcResult() {\r\n        if (this.breakage == '') {\r\n          this.breakage = 0;\r\n        };\r\n        if (this.discount == '') {\r\n          this.discount = 0;\r\n        };\r\n        // 税后价格\r\n        if (this.rateSymbol == 'x') {\r\n          this.VATInc = Number((this.price - this.price * this.rateNum) * (this.breakage / 100) + this.price * this\r\n            .rateNum).toFixed(3);\r\n        } else if (this.rateSymbol == '÷') {\r\n          this.VATInc = Number((this.price - this.price / this.rateNum) * (this.breakage / 100) + this.price / this\r\n            .rateNum).toFixed(3);\r\n        };\r\n        // 最终人民币\r\n        this.CNYFinal = Number(this.VATInc * this.selectRate * (100 - this.discount) / 100).toFixed(3);\r\n        // 最终港币\r\n        this.HKDFinal = Number(this.CNYFinal * (1 / this.selectHKD + 0.003)).toFixed(3);\r\n        console.log(this.VATInc);\r\n        console.log(this.CNYFinal);\r\n        console.log(this.HKDFinal);\r\n        if (this.rateNum !== '') {\r\n          for (let item of this.countryList) {\r\n            // console.log(item);\r\n            // console.log(this.country);\r\n            if (this.country == item.cnName) {\r\n              item.taxRate = this.rateNum;\r\n              console.log(item);\r\n            };\r\n            console.log(this.rateSymbol);\r\n          };\r\n        }\r\n      },\r\n      // 获取所有国家\r\n      handleCountryGet() {\r\n        this.$axios.post(this.$store.state.baseUrl + '/CountryGet?java').then((res) => {\r\n          console.log('国家列表');\r\n          console.log(res);\r\n          this.countryList = res.data;\r\n        })\r\n      },\r\n    },\r\n  }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .rate-query-container {\r\n    width: 100%;\r\n\r\n    .rate-query {\r\n      width: 95%;\r\n      margin: 0 auto;\r\n\r\n      .rate-query-top {\r\n        width: 95%;\r\n        margin: 0 auto;\r\n        padding: 20px 40px;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        background-color: #fff;\r\n        border-radius: 30px;\r\n      }\r\n\r\n      .rate-query-center {\r\n        margin: 20px 0;\r\n        padding: 20px 30px;\r\n        background-color: #fff;\r\n        border-radius: 30px;\r\n\r\n        th {\r\n          height: 50px;\r\n          line-height: 50px;\r\n          background-color: #d7ebe7;\r\n        }\r\n\r\n        td {\r\n          padding: 20px;\r\n          background-color: #f3fbf9;\r\n          border-bottom: 1px solid #d7ebe7;\r\n\r\n          .freight-input {\r\n            width: 40%;\r\n            height: 40px;\r\n            border: 0;\r\n            border-bottom: 1px solid #ddd;\r\n            outline: none;\r\n            background-color: transparent;\r\n            text-align: center;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .goback {\r\n      width: 95%;\r\n      margin: 0 auto;\r\n\r\n      .back-img {\r\n        width: 75px;\r\n        height: 45px;\r\n        line-height: 45px;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        cursor: pointer;\r\n\r\n        div {\r\n          margin-top: 5px;\r\n\r\n          img {\r\n            width: 30px;\r\n            height: 25px;\r\n          }\r\n        }\r\n\r\n        .font {\r\n          font-size: 17px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .rate-calc {\r\n      // width: 80%;\r\n      // margin: 0 auto;\r\n      // background-color: #fff;\r\n      // border-radius: 30px;\r\n\r\n      .calc-top {\r\n        // width: 50%;\r\n        margin: 0 auto;\r\n        text-align: center;\r\n\r\n        .calc-button {\r\n          width: 110px;\r\n          height: 40px !important;\r\n          margin-left: 20px;\r\n          font-size: 14px !important;\r\n        }\r\n      }\r\n\r\n      .calc-center {\r\n        width: 70%;\r\n        margin: 30px auto;\r\n        margin-bottom: 0;\r\n        padding: 0 30px;\r\n        border: 1px solid #ddd;\r\n        border-radius: 30px;\r\n      }\r\n\r\n      .calc-bottom {\r\n        // width: 60%;\r\n        margin: 0 auto;\r\n        padding: 30px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .input-style {\r\n    width: 90%;\r\n  }\r\n\r\n  table {\r\n    width: 100%;\r\n    border-collapse: separate;\r\n    border-spacing: 0;\r\n  }\r\n\r\n  tr {\r\n\r\n    th,\r\n    td {\r\n      width: 20%;\r\n      text-align: center;\r\n    }\r\n  }\r\n</style>"]}]}