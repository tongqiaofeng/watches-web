{"remainingRequest":"D:\\aa-tong\\my-projects\\copy\\watches-three\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\aa-tong\\my-projects\\copy\\watches-three\\src\\components\\purch\\Shipping.vue?vue&type=style&index=1&lang=scss&","dependencies":[{"path":"D:\\aa-tong\\my-projects\\copy\\watches-three\\src\\components\\purch\\Shipping.vue","mtime":1596520463105},{"path":"D:\\aa-tong\\my-projects\\copy\\watches-three\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\copy\\watches-three\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\copy\\watches-three\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\copy\\watches-three\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\copy\\watches-three\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\copy\\watches-three\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi8vIC5lbC1jaGVja2JveF9faW5wdXQuaXMtY2hlY2tlZCAuZWwtY2hlY2tib3hfX2lubmVyLAovLyAuZWwtY2hlY2tib3hfX2lucHV0LmlzLWluZGV0ZXJtaW5hdGUgLmVsLWNoZWNrYm94X19pbm5lciB7Ci8vICAgYmFja2dyb3VuZC1jb2xvcjogIzJkNGU2NTsKLy8gICBib3JkZXItY29sb3I6ICMyZDRlNjU7Ci8vIH0K"},{"version":3,"sources":["Shipping.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0bA;AACA;AACA;AACA;AACA","file":"Shipping.vue","sourceRoot":"src/components/purch","sourcesContent":["<template>\r\n  <div class=\"shipping-container\">\r\n    <!-- 发货 -->\r\n    <div v-if=\"shipping.msg == 0\" id=\"search\" style=\"margin-top: 75px;\">\r\n      <div v-show=\"shippingList.length == 0\" ref=\"hello\" style=\"text-align: center;\">\r\n        <p>{{hintMsg}}</p>\r\n      </div>\r\n      <div v-if=\"shippingList.length !== 0\">\r\n        <div style=\"margin-left: 20px;\">\r\n          <p style=\"margin-top: 0;margin-bottom: 20px;font-size: 18px;\">\r\n            <span>{{'商品数量:  ' + ' ' + totalNum + ' '}}</span>\r\n            <span style=\"color: red;\">(信息录入未完成的商品，不能进行发货)</span>\r\n          </p>\r\n        </div>\r\n        <div class=\"sure\">\r\n          <input type=\"button\" value=\"确 认\" class=\"sure-button\" @click=\"shippingSure\">\r\n        </div>\r\n        <div v-for=\"(item,index) of shippingList\" :key=\"index\" class=\"mypurchase-table\">\r\n          <div class=\"purchase-row\">\r\n            <span class=\"purchase-number\">采购单号: {{\"   \" + item.buy_id}}</span>\r\n            <span class=\"purchase-date\">采购日期: {{item.buy_date}}</span>\r\n          </div>\r\n          <div class=\"div-table\">\r\n            <table>\r\n              <tr class=\"table-tr\">\r\n                <th class=\"table-th\">选择发货</th>\r\n                <th class=\"table-th first-img\">图片</th>\r\n                <th class=\"table-th\">手表型号</th>\r\n                <th class=\"table-th\">机芯号</th>\r\n                <th class=\"table-th\">采购价</th>\r\n                <th class=\"table-th\">商品信息录入</th>\r\n                <th class=\"table-th\">操作</th>\r\n              </tr>\r\n              <tr v-for=\"(content,indexs) of item.watch\" :key=\"indexs\" class=\"table-tr-container\">\r\n                <td>\r\n                  <input class=\"selBtn\" type=\"checkbox\" v-model=\"hobby\" :value=\"content\"\r\n                    @change=\"checkedChange($event,content)\" :disabled=\"content.buy_watchState == 1 ? false : true\">\r\n                </td>\r\n                <td style=\"padding: 20px;\">\r\n                  <img v-image-preview\r\n                    :src=\"content.buy_watchPics == null || content.buy_watchPics == '' ? '' : img + '/img/watch/'+ (content.buy_watchPics || '').split('|')[0]\"\r\n                    style=\"width: 100px;height: 100px;object-fit: cover;\" class=\"first-img\" />\r\n                </td>\r\n                <td>\r\n                  <p>{{content.buy_watchBrand}}</p>\r\n                  <p>{{content.buy_watchModel}}</p>\r\n                </td>\r\n                <td>{{content.buy_watchSn}}</td>\r\n                <td>{{content.buy_watchCurrency}} {{formatNumberRgx(content.buy_watchPrice)}}</td>\r\n                <td>\r\n                  <div style=\"display: flex;justify-content: center;\">\r\n                    <div>\r\n                      <img :src=\"content.buy_watchState == 1 ? completeness1 : completeness2\"\r\n                        style=\"width: 20px;height: 20px;\" />\r\n                    </div>\r\n                    <span style=\"margin-left: 3px;\">{{content.buy_watchState == 1 ? \"已完成\" : \"未完成\"}}</span>\r\n                  </div>\r\n                </td>\r\n                <td>\r\n                  <el-button v-if=\"content.buy_watchState == 0\" type=\"text\" @click=\"fillMsg(item.buy_id)\">完善信息\r\n                  </el-button>\r\n                  <el-button v-if=\"content.buy_watchState == 1\" type=\"text\" style=\"color: #c8c8c8;\">无需填写</el-button>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div style=\"width: 100%;height: 80px;\">\r\n          <div style=\"margin:15px 0;position:absolute;left: 50px;\">\r\n            <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"page\"\r\n              layout=\"total, prev, pager, next, jumper\" :total=\"total\">\r\n            </el-pagination>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n    <div v-if=\"shipping.msg == 1\">\r\n      <Logistics-msg @logisticsMsg=\"logisticsMsg\" @selecting=\"selecting\"></Logistics-msg>\r\n    </div>\r\n    <div v-if=\"shipping.msg == 3\">\r\n      <Details @watchstate=\"changeMsg\" @goback=\"goback\" :detailsSelect=\"detailsSelect\"></Details>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        hintMsg: '数据加载中...',\r\n        keyword: '',\r\n        img: this.$store.state.baseUrl,\r\n        isChecked: [],\r\n        shippingList: [],\r\n        total: 0,\r\n        page: 1,\r\n        pageNum: 10,\r\n        completeness1: require(\"../../assets/imgs/sureImg.png\"),\r\n        completeness2: require(\"../../assets/imgs/error.png\"),\r\n        detailsSelect: {\r\n          id: 1,\r\n          num: 0\r\n        },\r\n        hobby: [],\r\n        filtrate: 2,\r\n        totalNum: 0,\r\n\r\n      }\r\n    },\r\n    created() {\r\n      this.filtrate = this.shipping.filtrate;\r\n      this.handleList();\r\n    },\r\n    props: [\"shipping\"],\r\n    methods: {\r\n      goback(val) {\r\n        this.shipping.msg = 0;\r\n        this.$emit('shippingState', 0);\r\n        // this.handleList();\r\n        console.log(this.keyword);\r\n        this.stockInSearch();\r\n      },\r\n      // 本次发货完成后，重新加载页面\r\n      logisticsMsg(val) {\r\n        console.log(\"9999999999999999999\");\r\n        console.log(val);\r\n        this.isChecked = [];\r\n        // this.handleList();\r\n        console.log(this.keyword);\r\n        this.stockInSearch();\r\n      },\r\n      selecting(val) {\r\n        this.shipping.msg = 0;\r\n        this.$emit('shippingState', 0);\r\n      },\r\n      changeMsg(val) {\r\n        this.handleList();\r\n      },\r\n      // 模糊查询\r\n      stockInSearch() {\r\n        if (this.keyword !== '') {\r\n          this.shippingList = [];\r\n          this.total = 0;\r\n          this.totalNum = 0;\r\n          this.hintMsg = '数据加载中...';\r\n          this.$axios\r\n            .post(this.$store.state.baseUrl + \"/BuyOrderListEx\", {\r\n              page: this.page,\r\n              pageNum: this.pageNum,\r\n              type: this.filtrate,\r\n              keyword: this.keyword\r\n            })\r\n            .then(res => {\r\n              console.log(\"模糊搜索获取订单\");\r\n              console.log(res);\r\n              this.shippingList = res.data.orders;\r\n              console.log(this.shippingList);\r\n              this.total = res.data.total;\r\n              this.totalNum = res.data.watchTotal;\r\n              if (this.shippingList.length == 0) {\r\n                this.hintMsg = '啊哦~暂无数据'\r\n              }\r\n            });\r\n        } else if (this.keyword == '') {\r\n          this.page = 1;\r\n          this.shippingList = [];\r\n          this.total = 0;\r\n          this.totalNum = 0;\r\n          this.handleList();\r\n        }\r\n      },\r\n      // 获取未发货商品列表\r\n      handleList() {\r\n        console.log('bbbbbbbbbb' + this.shipping.filtrate);\r\n        this.hintMsg = '数据加载中...';\r\n        this.$axios.post(this.$store.state.baseUrl + '/BuyOrderListEx', {\r\n          page: this.page,\r\n          pageNum: this.pageNum,\r\n          type: this.filtrate\r\n        }).then((res) => {\r\n          console.log('pfgdgd');\r\n          console.log(res);\r\n          this.shippingList = res.data.orders;\r\n          console.log(this.shippingList);\r\n          this.total = res.data.total;\r\n          this.totalNum = res.data.watchTotal;\r\n          if (this.shippingList.length == 0) {\r\n            this.hintMsg = '啊哦~暂无数据'\r\n          }\r\n        }).catch((err) => {\r\n          console.log(err);\r\n        })\r\n      },\r\n      // 选择发货商品\r\n      checkedChange(e, content) {\r\n        console.log('feng');\r\n        console.log(e);\r\n        console.log(content);\r\n        if (e.target.checked == true) {\r\n          this.isChecked.push(content);\r\n        } else if (e.target.checked == false) {\r\n          for (let index in this.isChecked) {\r\n            if (this.isChecked[index].id == content.id) {\r\n              this.isChecked.splice(index, 1);\r\n            }\r\n          }\r\n        }\r\n        sessionStorage.setItem(\"isSelected\", JSON.stringify(this.isChecked));\r\n        console.log('99000');\r\n        console.log(this.isChecked);\r\n        // this.isChecked = [];\r\n      },\r\n      // 分页\r\n      handleSizeChange(val) {\r\n        console.log(`每页 ${val} 条`);\r\n      },\r\n      handleCurrentChange(val) {\r\n        console.log(`当前页: ${val}`);\r\n        this.page = val;\r\n        console.log(this.page);\r\n        if (this.keyword == '') {\r\n          this.handleList();\r\n        } else {\r\n          this.stockInSearch();\r\n        }\r\n        // 换页回到顶部\r\n        (function smoothscroll() {\r\n          var currentScroll = document.documentElement.scrollTop || document.body.scrollTop;\r\n          if (currentScroll > 0) {\r\n            window.requestAnimationFrame(smoothscroll);\r\n            window.scrollTo(0, currentScroll - (currentScroll / 5));\r\n          }\r\n        })()\r\n        let selectedIs = document.getElementsByClassName(\"selBtn\");\r\n        for (let i = 0; i < selectedIs.length; i++) {\r\n          selectedIs[i].checked = false;\r\n        }\r\n        console.log(\"hhhhhhhhh\");\r\n        console.log(selectedIs);\r\n      },\r\n      // 确认选择发货\r\n      shippingSure() {\r\n        console.log(this.isChecked);\r\n        if (this.isChecked.length == 0) {\r\n          this.$message.error({\r\n            message: '请选择发货商品',\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n        } else {\r\n          this.shipping.msg = 1;\r\n          this.$emit('shippingState', 1);\r\n          console.log('2222');\r\n          // 页面回到顶部\r\n          (function smoothscroll() {\r\n            var currentScroll = document.documentElement.scrollTop || document.body.scrollTop;\r\n            if (currentScroll > 0) {\r\n              window.requestAnimationFrame(smoothscroll);\r\n              window.scrollTo(0, currentScroll - (currentScroll / 5));\r\n            }\r\n          })()\r\n        }\r\n      },\r\n      // 完善信息\r\n      fillMsg(buy_id) {\r\n        console.log('完善信息id');\r\n        console.log(buy_id);\r\n        this.shipping.msg = 3;\r\n        this.$emit('shippingState', 1);\r\n        sessionStorage.setItem(\"buy_id\", buy_id);\r\n        console.log(buy_id);\r\n        // 页面回到顶部\r\n        (function smoothscroll() {\r\n          var currentScroll = document.documentElement.scrollTop || document.body.scrollTop;\r\n          if (currentScroll > 0) {\r\n            window.requestAnimationFrame(smoothscroll);\r\n            window.scrollTo(0, currentScroll - (currentScroll / 5));\r\n          }\r\n        })()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .shipping-container {\r\n    width: 100%;\r\n    margin: 0 auto;\r\n\r\n    .mypurchase-table {\r\n      width: 100%;\r\n      margin-bottom: 20px;\r\n      background-color: #fff;\r\n      border-radius: 20px;\r\n\r\n\r\n      .purchase-row {\r\n        padding-top: 30px;\r\n        padding-left: 30px;\r\n\r\n        .purchase-number {\r\n          font-size: 18px;\r\n          font-weight: bold;\r\n        }\r\n\r\n        .purchase-date {\r\n          margin-left: 20px;\r\n          color: #c8c8c8;\r\n        }\r\n      }\r\n\r\n\r\n      .div-table {\r\n        padding: 20px 30px;\r\n\r\n        .table-tr {\r\n          height: 40px;\r\n          line-height: 40px;\r\n          border-bottom: 0;\r\n\r\n          .first-img {\r\n            padding-left: 0;\r\n          }\r\n\r\n          .table-th {\r\n            font-size: 17px;\r\n            font-weight: normal;\r\n          }\r\n        }\r\n\r\n        .table-tr-container {\r\n          background-color: #fff;\r\n\r\n          td {\r\n            background-color: #f3fbf9;\r\n            font-size: 15px;\r\n          }\r\n\r\n          .first-img {\r\n            width: 100px;\r\n            height: 100px;\r\n            object-fit: cover;\r\n            border-radius: 30px;\r\n          }\r\n\r\n          .jump-div {\r\n            display: flex;\r\n            cursor: pointer;\r\n\r\n            .jump-img {\r\n              width: 20px;\r\n              height: 20px;\r\n            }\r\n\r\n            .button-mypurchase {\r\n              border: 0;\r\n              outline: none;\r\n              color: #000;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  table {\r\n    width: 100%;\r\n    table-layout: fixed;\r\n    border-collapse: separate;\r\n    border-spacing: 0;\r\n\r\n    tr {\r\n\r\n      th,\r\n      td {\r\n        width: 18%;\r\n        text-align: center;\r\n        border: 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  input[type=checkbox] {\r\n    width: 18px;\r\n    height: 18px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    width: 15px;\r\n    height: 15px;\r\n    font-size: 15px;\r\n  }\r\n\r\n  input[type=checkbox]::after {\r\n    position: absolute;\r\n    top: 0;\r\n    background-color: #fff;\r\n    color: #000;\r\n    width: 15px;\r\n    height: 15px;\r\n    display: inline-block;\r\n    visibility: visible;\r\n    padding-left: 0px;\r\n    text-align: center;\r\n    content: ' ';\r\n    border: 1px solid #c8c8c8;\r\n    border-radius: 3px\r\n  }\r\n\r\n  input[type=checkbox]:disabled::after {\r\n    content: ' ';\r\n    border: 1px solid #c8c8c8;\r\n    border-radius: 3px;\r\n    background-color: #ddd;\r\n    cursor: not-allowed;\r\n  }\r\n\r\n  input[type=checkbox]:checked::after {\r\n    content: \"✓\";\r\n    font-size: 13px;\r\n    font-weight: bolder;\r\n  }\r\n\r\n  .sure {\r\n    width: 100%;\r\n    position: fixed;\r\n    top: 92%;\r\n    left: 72%;\r\n\r\n    .sure-button {\r\n      width: 15%;\r\n      height: 45px;\r\n      background-color: #0c8563;\r\n      color: #fff;\r\n      border: 0;\r\n      border-radius: 30px;\r\n      outline: none;\r\n      font-size: 15px;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n</style>\r\n<style lang=\"scss\">\r\n  // .el-checkbox__input.is-checked .el-checkbox__inner,\r\n  // .el-checkbox__input.is-indeterminate .el-checkbox__inner {\r\n  //   background-color: #2d4e65;\r\n  //   border-color: #2d4e65;\r\n  // }\r\n</style>"]}]}